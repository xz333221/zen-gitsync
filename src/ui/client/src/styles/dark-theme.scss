/* =======================================================
   深色主题样式文件 - 专门处理深色模式的样式覆盖
   ======================================================= */

/* 导入全局CSS变量 */
@use './variables';

/* =======================================================
   深色主题变量覆盖
   ======================================================= */
   
[data-theme="dark"] {
  /* Element Plus深色主题CSS变量 */
  --el-bg-color: var(--bg-container-dark);
  --el-bg-color-page: var(--bg-page-dark);
  --el-text-color-primary: var(--text-primary-dark);
  --el-text-color-regular: var(--text-secondary-dark);
  --el-text-color-secondary: var(--text-tertiary-dark);
  --el-text-color-placeholder: var(--text-placeholder-dark);
  --el-border-color: var(--border-color-dark);
  --el-border-color-light: rgba(255, 255, 255, 0.08);
  --el-border-color-lighter: rgba(255, 255, 255, 0.05);
  --el-fill-color: rgba(255, 255, 255, 0.08);
  --el-fill-color-light: rgba(255, 255, 255, 0.05);
  --el-fill-color-lighter: rgba(255, 255, 255, 0.03);
  --el-fill-color-blank: var(--bg-container-dark);
  --el-fill-color-dark: rgba(255, 255, 255, 0.12);
  
  /* 遮罩/Loading 相关变量（修复 el-loading 在深色模式下为白色的问题） */
  --el-mask-color: rgba(0, 0, 0, 0.6);
  --el-overlay-color: rgba(0, 0, 0, 0.7);
  --el-overlay-color-light: rgba(0, 0, 0, 0.55);
  --el-overlay-color-lighter: rgba(0, 0, 0, 0.4);

  /* 输入/文本域（Input/Textarea）变量映射到项目色板 */
  --el-input-bg-color: var(--bg-input-dark);
  --el-input-text-color: var(--color-text);
  --el-input-border-color: var(--border-input-dark);
  --el-input-hover-border-color: var(--border-input-hover-dark);
  --el-input-focus-border-color: #409eff;
  --el-input-placeholder-color: var(--text-placeholder-dark);
  --el-input-icon-color: var(--text-tertiary-dark);
  /* 可选：单独控制 Textarea 背景 */
  --el-textarea-bg-color: var(--bg-input-dark);

  /* 禁用态 */
  --el-disabled-bg-color: rgba(255, 255, 255, 0.06);
  --el-disabled-text-color: rgba(255, 255, 255, 0.4);
  --el-disabled-border-color: rgba(255, 255, 255, 0.08);

  /* Select/Dropdown 相关 */
  --el-select-bg-color: var(--bg-container-dark);
  --el-select-text-color: var(--text-primary-dark);
  --el-select-border-color: var(--border-input-dark);
  --el-select-hover-border-color: var(--border-input-hover-dark);
  --el-select-option-hover-background: rgba(64, 158, 255, 0.2);
  --el-select-option-selected-font-color: #409eff;
  /* Popper/Overlay 背景（与弹层保持一致） */
  --el-bg-color-overlay: var(--bg-container-dark);
  
  /* 表格相关变量 */
  --el-table-bg-color: var(--bg-container-dark);
  --el-table-tr-bg-color: var(--bg-container-dark);
  --el-table-header-bg-color: rgba(255, 255, 255, 0.05);
  /* 适配表格文字/边框/悬浮等颜色 */
  --el-table-text-color: var(--text-primary-dark);
  --el-table-header-text-color: var(--text-secondary-dark);
  --el-table-border-color: var(--border-color-dark);
  --el-table-row-hover-bg-color: rgba(255, 255, 255, 0.06);
  --el-table-current-row-bg-color: rgba(64, 158, 255, 0.12);
  --el-table-header-border-color: var(--border-color-light);

  /* 页面背景 */
  --bg-page: var(--bg-page-dark);
  --bg-title: var(--bg-title-dark);
  --bg-container: var(--bg-container-dark);
  --bg-container-hover: var(--bg-container-hover-dark);
  --bg-code: var(--bg-code-dark);
  
  /* 表单和输入框背景 */
  --bg-input: var(--bg-input-dark);
  --bg-input-hover: var(--bg-input-hover-dark);
  
  /* 面板和区域背景 */
  --bg-panel: var(--bg-panel-dark);
  --bg-panel-hover: var(--bg-panel-hover-dark);
  
  /* 文件路径背景 */
  --bg-file-path: var(--bg-file-path-dark);
  --bg-file-path-hover: var(--bg-file-path-hover-dark);
  
  /* 图标和装饰背景 */
  --bg-icon: var(--bg-icon-dark);
  --bg-icon-hover: var(--bg-icon-hover-dark);
  
  /* 组件悬浮背景 */
  --bg-component-hover: var(--bg-component-hover-dark);
  
  /* 组件区域背景 */
  --bg-component-area: var(--bg-component-area-dark);
  
  /* 卡片和面板背景 */
  --bg-card: var(--bg-card-dark);
  --bg-card-hover: var(--bg-card-hover-dark);
  
  /* 操作区域背景 */
  --bg-action: var(--bg-action-dark);
  
  /* 边框颜色 */
  --border-input: var(--border-input-dark);
  --border-input-hover: var(--border-input-hover-dark);
  --border-card: var(--border-card-dark);
  --border-card-hover: var(--border-card-hover-dark);
  
  /* 组件边框 */
  --border-component: var(--border-component-dark);
  --border-component-light: var(--border-component-light-dark);
  
  /* 文字颜色 */
  --text-primary: var(--text-primary-dark);
  --text-title: var(--text-title-dark);
  --text-secondary: var(--text-secondary-dark);
  --text-tertiary: var(--text-tertiary-dark);
  --text-placeholder: var(--text-placeholder-dark);
  
  /* 全局文字颜色覆盖 */
  --color-text: var(--text-primary-dark);
  --color-text-title: var(--text-title-dark);
  --color-text-secondary: var(--text-secondary-dark);
  --color-text-tertiary: var(--text-tertiary-dark);
  --color-text-placeholder: var(--text-placeholder-dark);
  
  /* 文件路径文字颜色 */
  --color-file-path-hover: var(--color-file-path-hover-dark);
  
  /* 边框颜色 */
  --border-color: var(--border-color-dark);
  --border-color-light: rgba(255, 255, 255, 0.08);
  --border-color-medium: rgba(255, 255, 255, 0.12);
  
  /* 阴影 */
  --shadow-sm: var(--shadow-dark);
  --shadow-base: var(--shadow-dark);
  --shadow-md: var(--shadow-dark-lg);
  --shadow-lg: var(--shadow-dark-lg);
  --shadow-xl: 0 12px 32px rgba(0, 0, 0, 0.4);
  
  /* Git差异显示 - 深色主题调整 */
  --git-diff-context-bg: #24292e;
  --git-diff-context-color: #f8f8f2;
  --git-diff-header-bg: #1f2937;
  --git-diff-header-color: #60a5fa;
  --git-diff-header-border: #374151;
  --git-diff-added-bg: rgba(34, 134, 58, 0.15);
  --git-diff-added-color: #56d364;
  --git-diff-removed-bg: rgba(248, 81, 73, 0.15);
  --git-diff-removed-color: #f85149;
  --git-diff-hunk-bg: #1f2937;
  --git-diff-hunk-color: #a78bfa;
}

/* =======================================================
   深色主题专用组件样式
   ======================================================= */

[data-theme="dark"] {
  /* Header 深色主题 */
  .app-header {
    background: var(--bg-container-dark);
    color: var(--text-primary-dark);
    border-bottom-color: var(--border-color-dark);
    box-shadow: var(--shadow-dark);
  }

  /* Footer 深色主题 */
  .app-footer {
    background: var(--bg-container-dark);
    color: var(--text-primary-dark);
    border-top-color: var(--border-color-dark);
    box-shadow: var(--shadow-dark);
  }

  /* Card 深色主题 */
  .app-card {
    background: var(--bg-container-dark);
    border-color: var(--border-color-dark);
    box-shadow: var(--shadow-dark);
  }

  .app-card:hover {
    box-shadow: var(--shadow-dark-lg);
  }

  .app-card-header {
    border-bottom-color: var(--border-color-light);
  }

  .app-card-header h2 {
    color: var(--text-primary-dark);
  }

  .app-card-footer {
    border-top-color: var(--border-color-light);
    background: rgba(255, 255, 255, 0.02);
  }

  /* Modern Button 深色主题 */
  .modern-btn {
    background: rgba(255, 255, 255, 0.08);
    color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.1);
  }

  .modern-btn:hover {
    background: rgba(255, 255, 255, 0.12);
    color: white;
    border-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .modern-btn:disabled:hover {
    background: rgba(255, 255, 255, 0.08);
  }

  /* 用户信息区域深色主题 */
  #user-info {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.1);
  }

  #user-info:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
  }

  .user-email {
    color: rgba(255, 255, 255, 0.7);
  }

  /* 目录选择器深色主题 */
  .directory-selector {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.1);
  }

  .directory-selector:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
  }

  .directory-path {
    color: rgba(255, 255, 255, 0.9);
    background-color: rgba(0, 0, 0, 0.2);
    border-color: rgba(255, 255, 255, 0.1);
  }

  /* 分支信息深色主题 */
  .branch-wrapper {
    background-color: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.2);
  }

  .branch-wrapper:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }

  .branch-label {
    color: rgba(255, 255, 255, 0.9);
  }

  .footer-right {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.15);
    color: rgba(255, 255, 255, 0.9);
  }

  .repo-url-label {
    color: rgba(255, 255, 255, 0.9);
  }

  .repo-url {
    color: rgba(255, 255, 255, 0.7);
  }

  /* Git命令预览深色主题 */
  .git-command-preview .preview-container {
    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
    border-color: #4a5568;
  }

  .git-command-preview .preview-container:hover {
    background: linear-gradient(135deg, #2d3748 0%, #2c5282 100%);
    border-color: #409eff;
  }

  .git-command-preview .preview-title {
    color: #e2e8f0;
  }

  .git-command-preview .preview-content {
    background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
    color: #e8f4fd;
    border-color: #404040;
  }

  .git-command-preview .copy-command-btn {
    background: linear-gradient(135deg, rgba(64, 158, 255, 0.12) 0%, rgba(102, 177, 255, 0.12) 100%) !important;
    border-color: rgba(64, 158, 255, 0.35) !important;
    color: #8cc4ff !important;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25) !important;
  }

  .git-command-preview .copy-command-btn:hover {
    background: linear-gradient(135deg, rgba(64, 158, 255, 0.22) 0%, rgba(102, 177, 255, 0.22) 100%) !important;
    border-color: rgba(64, 158, 255, 0.6) !important;
    color: #a6d2ff !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.35) !important;
  }

  /* 分隔条（上下/左右）深色主题 */
  .vertical-resizer,
  .vertical-resizer-bottom {
    background-color: #2b2f36 !important; /* 外层轨道 */
    box-shadow: 0 0 2px rgba(0, 0, 0, 0.5) !important;
  }

  .vertical-resizer::after,
  .vertical-resizer-bottom::after {
    background-color: #5b6470 !important; /* 中间把手 */
  }

  .vertical-resizer:hover,
  .vertical-resizer.active,
  .vertical-resizer-bottom:hover,
  .vertical-resizer-bottom.active {
    background-color: #323741 !important;
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.6) !important;
  }

  .vertical-resizer:hover::after,
  .vertical-resizer.active::after,
  .vertical-resizer-bottom:hover::after,
  .vertical-resizer-bottom.active::after {
    background-color: #57a0ff !important; /* 高亮为蓝色 */
    box-shadow: 0 0 8px rgba(87, 160, 255, 0.65) !important;
  }

  .horizontal-resizer {
    background-color: #2b2f36 !important;
    box-shadow: 0 0 2px rgba(0, 0, 0, 0.5) !important;
  }

  .horizontal-resizer::after {
    background-color: #5b6470 !important;
  }

  .horizontal-resizer:hover,
  .horizontal-resizer.active {
    background-color: #323741 !important;
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.6) !important;
  }

  .horizontal-resizer:hover::after,
  .horizontal-resizer.active::after {
    background-color: #57a0ff !important;
    box-shadow: 0 0 8px rgba(87, 160, 255, 0.65) !important;
  }

  /* 滚动条深色主题 */
  .preview-content::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
  }

  .preview-content::-webkit-scrollbar-thumb {
    background: rgba(64, 158, 255, 0.5);
  }

  .preview-content::-webkit-scrollbar-thumb:hover {
    background: rgba(64, 158, 255, 0.7);
  }

  /* 主容器深色主题 */
  .main-container {
    background: var(--bg-page-dark);
  }

  /* 提交表单容器深色主题 */
  .commit-form-container,
  .layout-container {
    background: var(--bg-container-dark) !important;
  }

  /* 提交信息输入区域深色主题 */
  .commit-message-container,
  .description-container {
    background: var(--bg-container-dark) !important;
  }

  /* Git命令预览区域深色主题 */
  .git-command-preview,
  .preview-section {
    background: var(--bg-container-dark) !important;
  }

  /* 开关卡片区域深色主题 */
  .header-switches,
  .commit-options {
    background: transparent !important;
  }

  /* Git状态组件深色主题 */
  .git-status-card,
  .status-card {
    background: var(--bg-container-dark);
    border-color: var(--border-color-dark);
  }

  /* 提交表单深色主题 */
  .commit-form,
  .commit-section {
    background: var(--bg-container-dark);
  }

  /* 提交历史深色主题 */
  .log-list,
  .history-list,
  .commit-list {
    background: var(--bg-container-dark);
  }

  /* Element Plus输入框组件使用内置深色主题，通过CSS变量控制 */

  .el-textarea__inner {
    background-color: rgba(255, 255, 255, 0.08) !important;
    border-color: rgba(255, 255, 255, 0.15) !important;
    color: rgba(255, 255, 255, 0.9) !important;
    box-shadow: none !important;
  }

  .el-textarea__inner:hover {
    border-color: rgba(255, 255, 255, 0.25) !important;
  }

  .el-textarea__inner:focus {
    border-color: #409eff !important;
    box-shadow: 0 0 0 1px rgba(64, 158, 255, 0.2) !important;
  }

  .el-textarea__inner::placeholder {
    color: rgba(255, 255, 255, 0.5) !important;
  }

  /* 自动完成输入框 */
  .el-autocomplete .el-input__wrapper {
    background-color: rgba(255, 255, 255, 0.08) !important;
    border-color: rgba(255, 255, 255, 0.15) !important;
  }

  /* 提交信息输入框特殊样式 */
  .commit-message-input .el-textarea__inner {
    /* 保留暗色背景，但使用橙色描边作为强调色 */
    background-color: rgba(255, 255, 255, 0.05) !important;
    border-color: #e6a23c !important;
    box-shadow: 0 2px 4px rgba(230, 162, 60, 0.12) !important;
  }

  .commit-message-input .el-textarea__inner:hover {
    border-color: #ebb563 !important;
    box-shadow: 0 4px 8px rgba(230, 162, 60, 0.2) !important;
  }

  .commit-message-input .el-textarea__inner:focus {
    border-color: #e6a23c !important;
    box-shadow: 0 0 0 1px rgba(230, 162, 60, 0.28) !important;
  }

  /* 提交信息输入框容器深色主题 */
  .commit-message-input {
    background: rgba(255, 255, 255, 0.02) !important;
  }

  /* 标准化提交表单深色主题 */
  .standard-commit-form,
  .commit-form-wrapper {
    background: var(--bg-container-dark) !important;
  }

  /* 提交表单各个区域深色主题 */
  .form-row,
  .form-group {
    background: transparent !important;
  }

  /* Git状态文件列表容器 */
  .file-list,
  .status-list,
  .files-container {
    background: var(--bg-container-dark) !important;
  }

  /* 渐变背景深色主题覆盖 */
  .option-card {
    background: linear-gradient(135deg, var(--bg-container-dark) 0%, rgba(255, 255, 255, 0.05) 100%) !important;
  }

  .stash-header {
    background: linear-gradient(135deg, var(--bg-container-dark) 0%, rgba(255, 255, 255, 0.05) 100%) !important;
  }
  .commit-message-input {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0%, rgba(255, 255, 255, 0.05) 100%) !important;
  }

  /* Element Plus Card组件深色主题 */
  // .el-card {
  //   background-color: var(--bg-container-dark) !important;
  //   border-color: var(--border-color-dark) !important;
  // }

  // .el-card__header {
  //   background-color: var(--bg-container-dark) !important;
  //   border-bottom-color: var(--border-color-dark) !important;
  //   color: var(--color-text) !important;
  // }

  // .el-card__body {
  //   background-color: var(--bg-container-dark) !important;
  //   color: var(--color-text) !important;
  // }

  /* Git状态空状态深色主题 */
  .empty-status {
    background-color: rgba(255, 255, 255, 0.03) !important;
    color: var(--color-text) !important;
  }

  .empty-icon {
    background-color: rgba(255, 255, 255, 0.08) !important;
    color: rgba(255, 255, 255, 0.6) !important;
  }

  .empty-text {
    color: var(--color-text) !important;
  }

  .empty-subtext {
    color: var(--color-text-secondary) !important;
  }

  /* Git状态框深色主题 */
  .status-box {
    background-color: rgba(255, 255, 255, 0.05) !important;
    color: var(--color-text) !important;
  }

  .status-box-wrap {
    color: var(--color-text) !important;
  }

  /* 分支同步状态深色主题 */
  .branch-sync-status {
    background-color: rgba(255, 255, 255, 0.05) !important;
    color: var(--color-text) !important;
  }

  /* 锁定功能说明深色主题 */
  .lock-feature-description {
    background-color: rgba(255, 255, 255, 0.03) !important;
    border-color: var(--border-color-dark) !important;
    color: var(--color-text) !important;
  }

  /* 现在这些组件将使用CSS变量，无需样式覆盖 */

  /* Element Plus组件深色主题 */
  .el-input .el-input__wrapper {
    background-color: rgba(255, 255, 255, 0.08) !important;
    border-color: rgba(255, 255, 255, 0.15) !important;
  }

  /* 输入框 hover 与 focus 高亮（与浅色保持一致的蓝色描边） */
  .el-input .el-input__wrapper:hover {
    border-color: rgba(255, 255, 255, 0.25) !important;
  }

  /* Element Plus 在 wrapper 上处理 focus，既兼容普通输入，又兼容 autocomplete/select 包装
     这里对常用类做更强覆盖，确保暗色下也显示蓝色边框和轻微外发光 */
  .modern-input.is-focus .el-input__wrapper,
  .el-input.is-focus .el-input__wrapper,
  .el-autocomplete .el-input.is-focus .el-input__wrapper,
  .el-autocomplete .el-input__wrapper:focus-within {
    border-color: #409eff !important;
    box-shadow: 0 0 0 1px rgba(64, 158, 255, 0.25) !important;
  }

  /* 保持提交表单三色描边（类型=红、作用域=绿、描述=蓝）在深色主题下仍可见 */
  .type-select .el-select__wrapper {
    border-color: #f56c6c !important;
  }

  .scope-input .el-input__wrapper {
    border-color: #67c23a !important;
  }

  .description-input .el-input__wrapper {
    border-color: #409eff !important;
  }

  .el-select-dropdown {
    background-color: var(--bg-container-dark) !important;
    border-color: var(--border-color-dark) !important;
  }

  /* 强化 Popper（所有浅色风格下拉/气泡，如下拉框、自动完成、工具提示）边框与箭头颜色 */
  .el-popper.is-light {
    background-color: var(--bg-container-dark) !important;
    border: 1px solid var(--border-color-dark) !important;
    color: var(--color-text) !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35) !important;
  }

  .el-popper.is-light .el-popper__arrow::before {
    background: var(--bg-container-dark) !important;
    border: 1px solid var(--border-color-dark) !important;
  }

  .el-select-dropdown__item {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-select-dropdown__item:hover {
    background-color: rgba(64, 158, 255, 0.2) !important;
  }

  .el-select-dropdown__item.selected {
    background-color: rgba(64, 158, 255, 0.3) !important;
    color: #409eff !important;
  }

  /* 自动完成下拉菜单 */
  .el-autocomplete-suggestion {
    background-color: var(--bg-container-dark) !important;
    border-color: var(--border-color-dark) !important;
  }

  /* 自动完成下拉内部滚动容器边框微调（消除亮白边） */
  .el-autocomplete-suggestion .el-scrollbar__wrap,
  .el-autocomplete-suggestion .el-scrollbar__view {
    background-color: transparent !important;
  }

  .el-autocomplete-suggestion__wrap {
    background-color: var(--bg-container-dark) !important;
  }

  .el-autocomplete-suggestion li {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-autocomplete-suggestion li:hover {
    background-color: rgba(64, 158, 255, 0.2) !important;
  }

  .el-autocomplete-suggestion li.highlighted {
    background-color: rgba(64, 158, 255, 0.3) !important;
  }

  /* 弹窗深色主题 */
  .el-dialog {
    background-color: var(--bg-container-dark) !important;
    border: 1px solid var(--border-color-dark) !important;
  }

  .el-dialog__title {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-dialog__body {
    background-color: var(--bg-container-dark) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }

  /* 模板管理弹窗（TemplateManager）- 深色主题增强 */
  .template-dialog.el-dialog,
  .message-template-dialog.el-dialog {
    background-color: var(--bg-container-dark) !important;
    border: 1px solid var(--border-color-dark) !important;
    box-shadow: var(--shadow-dark-lg) !important;
  }

  .template-dialog.el-dialog .el-dialog__header,
  .message-template-dialog.el-dialog .el-dialog__header {
    background: rgba(255, 255, 255, 0.02) !important;
    border-bottom: 1px solid var(--border-color-dark) !important;
  }

  .template-dialog.el-dialog .el-dialog__title,
  .message-template-dialog.el-dialog .el-dialog__title {
    color: var(--color-text) !important;
  }

  .template-dialog.el-dialog .el-dialog__body,
  .message-template-dialog.el-dialog .el-dialog__body {
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.02) 0%, rgba(255, 255, 255, 0.01) 100%) !important;
    color: var(--color-text) !important;
  }

  /* 表单输入区与卡片列表（深色） */
  .template-container .template-form {
    background: rgba(255, 255, 255, 0.04) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
  }

  .template-list h3,
  .message-templates-list h3 {
    color: var(--color-text-title) !important;
    border-bottom-color: rgba(255, 255, 255, 0.08) !important;
  }

  .template-item.el-card {
    background: rgba(255, 255, 255, 0.03) !important;
    border-color: rgba(255, 255, 255, 0.12) !important;
  }

  .template-item:hover {
    background: rgba(64, 158, 255, 0.06) !important;
    border-color: rgba(64, 158, 255, 0.3) !important;
  }

  .template-content {
    color: rgba(255, 255, 255, 0.85) !important;
  }

  /* 滚动条在深色下的优化 */
  .template-list-scroll::-webkit-scrollbar-thumb,
  .templates-scroll-area::-webkit-scrollbar-thumb {
    background-color: rgba(64, 158, 255, 0.45) !important;
  }

  .template-list-scroll::-webkit-scrollbar-track,
  .templates-scroll-area::-webkit-scrollbar-track {
    background-color: rgba(255, 255, 255, 0.06) !important;
  }

  /* 抽屉深色主题 */
  .el-drawer {
    background-color: var(--bg-container-dark) !important;
    border-left: 1px solid var(--border-color-dark) !important;
  }

  .el-drawer__header {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-drawer__body {
    background-color: var(--bg-container-dark) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }

  /* 遮罩层深色主题 */
  .el-overlay {
    background-color: rgba(0, 0, 0, 0.7) !important;
  }

  /* Loading 蒙层与文本在深色主题下的适配 */
  .el-loading-mask {
    background-color: var(--el-mask-color) !important;
  }
  .el-loading-spinner .el-loading-text {
    color: var(--color-text) !important;
  }

  /* 消息提示深色主题 */
  .el-message {
    background-color: var(--bg-container-dark) !important;
    border-color: var(--border-color-dark) !important;
    color: rgba(255, 255, 255, 0.95) !important;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.35) !important; /* 提升对比度 */
  }

  .el-message.el-message--success {
    /* 纯色深色背景（无透明） */
    background-color: #1f2d1a !important; /* 深绿底 */
    border-color: #3a5f2a !important;     /* 稍亮边框 */
  }

  .el-message.el-message--warning {
    background-color: #2d2614 !important; /* 深棕底 */
    border-color: #6b5626 !important;     /* 稍亮边框 */
  }

  .el-message.el-message--error {
    background-color: #2d1a1a !important; /* 深红底 */
    border-color: #7a2e2e !important;     /* 稍亮边框 */
  }

  /* 标签深色主题 */
  .el-tag {
    background-color: rgba(255, 255, 255, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-tag.el-tag--success {
    background-color: rgba(103, 194, 58, 0.2) !important;
    border-color: rgba(103, 194, 58, 0.4) !important;
    color: #67c23a !important;
  }

  .el-tag.el-tag--warning {
    background-color: rgba(230, 162, 60, 0.2) !important;
    border-color: rgba(230, 162, 60, 0.4) !important;
    color: #e6a23c !important;
  }

  .el-tag.el-tag--danger {
    background-color: rgba(245, 108, 108, 0.2) !important;
    border-color: rgba(245, 108, 108, 0.4) !important;
    color: #f56c6c !important;
  }

  /* Element Plus按钮组件使用内置深色主题，通过CSS变量控制 */

  /* 特定组件深色主题 */
  
  /* 全局：在元素级别覆盖 EP 对 .el-input/.el-textarea 设置的变量，防止文本颜色回退为 regular */
  .el-input,
  .el-textarea {
    --el-input-text-color: var(--color-text);
    --el-input-bg-color: var(--bg-input);
    --el-input-border-color: var(--border-input);
    --el-input-hover-border-color: var(--border-input-hover);
    --el-input-focus-border-color: #409eff;
    --el-input-placeholder-color: var(--color-text-placeholder);
    --el-input-icon-color: var(--color-text-tertiary);
  }
  /* 对 Select 输入框同步文本色，避免个别场景文字仍偏灰 */
  .el-select .el-input {
    --el-input-text-color: var(--color-text);
  }

  /* 兜底：仅对“绿色(scope)”与“蓝色(description)”两类输入，强制内层输入文字颜色，避免被 .el-input 默认变量覆盖 */
  .scope-input .el-input__inner,
  .description-input .el-input__inner,
  .scope-input .el-autocomplete .el-input__inner,
  .description-input .el-autocomplete .el-input__inner {
    color: var(--el-input-text-color, var(--color-text)) !important;
  }
  
  /* Git状态文件列表 */
  .file-item,
  .status-item,
  .file-list-item {
    background: rgba(255, 255, 255, 0.03) !important;
    border-color: var(--border-color-dark) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .file-item:hover,
  .status-item:hover,
  .file-list-item:hover {
    background: rgba(255, 255, 255, 0.08) !important;
  }

  /* 文件状态标识 */
  .file-status,
  .status-indicator {
    color: rgba(255, 255, 255, 0.8) !important;
  }

  /* 文件路径文本 */
  .file-path,
  .file-name {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  /* 提交历史列表项 */
  .commit-item,
  .log-item,
  .commit-list-item,
  .history-item-wrapper {
    background: rgba(255, 255, 255, 0.03) !important;
    border-color: var(--border-color-dark) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .commit-item:hover,
  .log-item:hover,
  .commit-list-item:hover,
  .history-item-wrapper:hover {
    background: rgba(255, 255, 255, 0.08) !important;
  }

  /* 提交信息文本 */
  .commit-message,
  .commit-title {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  /* 提交作者和时间 */
  .commit-author,
  .commit-time,
  .commit-date {
    color: rgba(255, 255, 255, 0.6) !important;
  }

  /* 提交哈希 */
  .commit-hash,
  .commit-id {
    color: rgba(255, 255, 255, 0.7) !important;
    background: rgba(255, 255, 255, 0.1) !important;
  }

  /* 代码差异显示 */
  .diff-content,
  .diff-viewer {
    background: var(--bg-container-dark) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }

  /* 空状态显示 */
  .el-empty {
    color: rgba(255, 255, 255, 0.6) !important;
  }

  .el-empty__description {
    color: rgba(255, 255, 255, 0.5) !important;
  }

  /* 加载状态 */
  .loading-container,
  .loading-card {
    background: var(--bg-container-dark) !important;
    border-color: var(--border-color-dark) !important;
  }

  /* 警告提示 */
  .el-alert {
    background-color: rgba(255, 255, 255, 0.05) !important;
    border-color: var(--border-color-dark) !important;
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-alert--warning {
    background-color: rgba(230, 162, 60, 0.1) !important;
    border-color: rgba(230, 162, 60, 0.3) !important;
  }

  .el-alert--success {
    background-color: rgba(103, 194, 58, 0.1) !important;
    border-color: rgba(103, 194, 58, 0.3) !important;
  }

  .el-alert--error {
    background-color: rgba(245, 108, 108, 0.1) !important;
    border-color: rgba(245, 108, 108, 0.3) !important;
  }

  .el-alert--info {
    background-color: rgba(64, 158, 255, 0.1) !important;
    border-color: rgba(64, 158, 255, 0.3) !important;
  }

  /* Element Plus工具提示使用内置深色主题，无需自定义样式 */

  /* 下拉菜单 */
  .el-dropdown-menu {
    background-color: var(--bg-container-dark) !important;
    border-color: var(--border-color-dark) !important;
  }

  .el-dropdown-menu__item {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-dropdown-menu__item:hover {
    background-color: rgba(64, 158, 255, 0.2) !important;
  }

  /* Element Plus表格组件使用内置深色主题，无需额外覆盖 */

  /* 分页器 */
  .el-pagination {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-pagination .el-pager li {
    background-color: rgba(255, 255, 255, 0.08) !important;
    color: rgba(255, 255, 255, 0.9) !important;
    border-color: var(--border-color-dark) !important;
  }

  .el-pagination .el-pager li:hover {
    background-color: rgba(64, 158, 255, 0.2) !important;
  }

  .el-pagination .el-pager li.active {
    background-color: #409eff !important;
    color: white !important;
  }

  /* 开关组件 */
  .el-switch {
    --el-switch-off-color: rgba(255, 255, 255, 0.2) !important;
  }

  /* 复选框 */
  .el-checkbox__input.is-checked .el-checkbox__inner {
    background-color: #409eff !important;
    border-color: #409eff !important;
  }

  .el-checkbox__inner {
    background-color: rgba(255, 255, 255, 0.08) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
  }

  .el-checkbox__label {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  /* 单选框 */
  .el-radio__input.is-checked .el-radio__inner {
    background-color: #409eff !important;
    border-color: #409eff !important;
  }

  .el-radio__inner {
    background-color: rgba(255, 255, 255, 0.08) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
  }

  .el-radio__label {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  /* 进度条 */
  .el-progress-bar__outer {
    background-color: rgba(255, 255, 255, 0.1) !important;
  }

  /* 面包屑 */
  .el-breadcrumb__item {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  .el-breadcrumb__item:last-child {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  /* 步骤条 */
  .el-steps .el-step__title {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-steps .el-step__description {
    color: rgba(255, 255, 255, 0.6) !important;
  }

  /* 时间线 */
  .el-timeline-item__content {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .el-timeline-item__timestamp {
    color: rgba(255, 255, 255, 0.6) !important;
  }
}

/* =======================================================
   深色主题专用动画和过渡效果
   ======================================================= */

[data-theme="dark"] {
  /* 深色主题下的特殊动画效果 */
  .modern-btn::before {
    background: linear-gradient(135deg, rgba(64, 158, 255, 0.2) 0%, rgba(102, 177, 255, 0.2) 100%);
  }

  /* 深色主题下的悬浮发光效果 */
  .app-card:hover {
    box-shadow: 
      var(--shadow-dark-lg),
      0 0 20px rgba(64, 158, 255, 0.1);
  }

  .modern-btn:hover {
    box-shadow: 
      0 4px 12px rgba(0, 0, 0, 0.15),
      0 0 8px rgba(64, 158, 255, 0.2);
  }
}

/* 目录切换对话框（Change Directory）文本颜色优化 */
[data-theme="dark"] {
  .directory-dialog.el-dialog {
    background-color: var(--bg-container-dark) !important;
    border: 1px solid var(--border-color-dark) !important;
  }

  .directory-dialog .el-dialog__title {
    color: var(--color-text) !important;
  }

  .directory-dialog .form-label {
    color: rgba(255, 255, 255, 0.9) !important;
  }

  .directory-dialog .dir-path {
    color: rgba(255, 255, 255, 0.8) !important;
  }

  .directory-dialog .repo-url-label,
  .directory-dialog .path-label {
    color: rgba(255, 255, 255, 0.85) !important;
  }
}
