import{d as gs,r as d,o as _t,a as ys,E as i,l as Zs,c as Le,b as Vt,w as qe,e as h,f as p,F as we,g as e,h as t,i as Ee,j as Y,k as U,m as Zt,u as o,n as a,p as hs,q as Kt,s as _s,t as Fe,v as ws,x as ks,y as pt,z as Lt,A as tt,B as Qs,C as Qt,D as zt,G as y,H as $s,I as z,J as gt,K as pe,L as ze,M as bs,N as Bt,O as ea,P as ds,Q as fs,R as ta,S as Ot,T as Ie,U as yt,V as es,W as Ue,X as bt,Y as sa,Z as ps,_ as ts,$ as aa,a0 as St,a1 as Wt,a2 as qt,a3 as Et,a4 as Ut,a5 as ss,a6 as Cs,a7 as la,a8 as oa,a9 as as,aa as Ss,ab as na,ac as Ts,ad as xs,ae as ia,af as ra,ag as ca,ah as Vs,ai as Tt,aj as ft,ak as ua,al as da,am as fa,an as pa,ao as va,ap as ma,aq as ga,ar as ya,as as ha,at as _a,au as wa,av as xt,aw as ka,ax as $a,ay as ba,az as vs,aA as ms,aB as Ca,aC as De,aD as Sa,aE as Ta}from"./vendor-CXQsUB7x.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))v(g);new MutationObserver(g=>{for(const M of g)if(M.type==="childList")for(const R of M.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&v(R)}).observe(document,{childList:!0,subtree:!0});function _(g){const M={};return g.integrity&&(M.integrity=g.integrity),g.referrerPolicy&&(M.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?M.credentials="include":g.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function v(g){if(g.ep)return;g.ep=!0;const M=_(g);fetch(g.href,M)}})();const Yt=800;function xa(){const ue="3002";return console.log(`ä»ç¯å¢ƒå˜é‡è¯»å–åç«¯ç«¯å£: ${ue}`),parseInt(ue,10)}const Va=xa(),ht=gs("git",()=>{const ue=d(""),u=d([]),_=d(""),v=d(""),g=d(!1),M=d(!1),R=d(!1),E=d(0),H=d(""),ce=d(!1),O=d(!1),Z=d(!1),Q=d(!1),se=d(!1),ae=d(0),de=d(0),oe=d(!1),S=d(""),B=d(0),x=d(0),q=d(!0),D=d(null),W=d([]),fe=d({staged:[],unstaged:[],untracked:[]}),ne=d([]),T=d(!1),C=d(!1),I=d(!1),X=d(!1),P=d(!1),ve=d([]),ke=d(!1),L=d(!1),f=d(!1),A=d(!1);function F(){ue.value="",u.value=[],_.value="",v.value="",g.value=!1,M.value=!1,R.value=!1,E.value=0,ae.value=0,de.value=0,oe.value=!1,S.value="",B.value=0,x.value=0,O.value=!1,Z.value=!1,Q.value=!1,se.value=!1,H.value="",ce.value=!1,W.value=[],fe.value={staged:[],unstaged:[],untracked:[]},ne.value=[],T.value=!1,C.value=!1,I.value=!1,X.value=!1,P.value=!1}async function N(n=!1,l=!1){if(!R.value)return;const m=Date.now();if(!n&&!l&&m-B.value<3e4){console.log("ä½¿ç”¨ç¼“å­˜çš„åˆ†æ”¯çŠ¶æ€");return}try{console.log("è·å–åˆ†æ”¯çŠ¶æ€...");let k="/api/branch-status";const te=[];n&&te.push("force=true"),l&&te.push("countOnly=true"),te.length>0&&(k+="?"+te.join("&"));const he=await(await fetch(k)).json();he&&(ae.value=he.ahead||0,de.value=he.behind||0,oe.value=he.hasUpstream||!1,S.value=he.upstreamBranch||"",B.value=m,console.log(`åˆ†æ”¯çŠ¶æ€æ›´æ–°ï¼šé¢†å…ˆ ${ae.value} ä¸ªæäº¤ï¼Œè½å ${de.value} ä¸ªæäº¤ï¼Œä¸Šæ¸¸åˆ†æ”¯ï¼š${oe.value?S.value:"æ— "}`))}catch(k){console.error("è·å–åˆ†æ”¯çŠ¶æ€å¤±è´¥:",k),ae.value=0,de.value=0,oe.value=!1,S.value=""}}async function ee(){const n=Date.now();if(n-E.value<1e3)return console.log("ä½¿ç”¨ç¼“å­˜çš„Gitä»“åº“çŠ¶æ€:",R.value?"æ˜¯":"ä¸æ˜¯"),R.value;try{const m=await(await fetch("/api/current_directory")).json();return R.value=m.isGitRepo===!0,E.value=n,console.log(`å½“å‰ç›®å½•${R.value?"æ˜¯":"ä¸æ˜¯"}Gitä»“åº“`),R.value}catch(l){return console.error("æ£€æŸ¥Gitä»“åº“çŠ¶æ€å¤±è´¥:",l),R.value=!1,E.value=n,!1}}async function be(n=!1){try{const k=await(await fetch(n?"/api/branch?force=true":"/api/branch")).json();k.branch&&(ue.value=k.branch,console.log(`å½“å‰åˆ†æ”¯æ›´æ–°ä¸º: ${k.branch}${n?" (å¼ºåˆ¶åˆ·æ–°)":""}`))}catch(l){console.error("è·å–åˆ†æ”¯ä¿¡æ¯å¤±è´¥:",l)}}async function ge(){if(R.value)try{console.log("è·å–æ‰€æœ‰åˆ†æ”¯...");const l=await(await fetch("/api/branches")).json();l.branches&&Array.isArray(l.branches)&&(u.value=l.branches,x.value=Date.now(),console.log(`è·å–åˆ°${l.branches.length}ä¸ªåˆ†æ”¯`))}catch(n){console.error("è·å–æ‰€æœ‰åˆ†æ”¯ä¿¡æ¯å¤±è´¥:",n)}}async function Be(n){console.log("åˆ‡æ¢åˆ°åˆ†æ”¯:",n);try{g.value=!0;const m=await(await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:n})})).json();return m.success?(i({message:`å·²åˆ‡æ¢åˆ°åˆ†æ”¯: ${n}`,type:"success"}),await be(!0),await N(!0),!0):(i({message:`åˆ‡æ¢åˆ†æ”¯å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return i({message:`åˆ‡æ¢åˆ†æ”¯å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{g.value=!1}}async function Ge(){try{const l=await(await fetch("/api/user-info")).json();l.name&&l.email&&(_.value=l.name,v.value=l.email)}catch(n){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",n)}}async function b(n,l){if(!n.trim())return i({message:"åˆ†æ”¯åç§°ä¸èƒ½ä¸ºç©º",type:"warning"}),!1;try{M.value=!0;const k=await(await fetch("/api/create-branch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newBranchName:n,baseBranch:l||ue.value})})).json();return k.success?(i({message:`å·²åˆ›å»ºå¹¶åˆ‡æ¢åˆ°åˆ†æ”¯: ${n}`,type:"success"}),await be(!0),await N(!0),await ge(),!0):(i({message:`åˆ›å»ºåˆ†æ”¯å¤±è´¥: ${k.error}`,type:"error"}),!1)}catch(m){return i({message:`åˆ›å»ºåˆ†æ”¯å¤±è´¥: ${m.message}`,type:"error"}),!1}finally{M.value=!1}}async function ie(){try{const l=await(await fetch("/api/clear-user-config",{method:"POST"})).json();return l.success?(_.value="",v.value="",i({message:"å·²æ¸…é™¤Gitç”¨æˆ·é…ç½®",type:"success"}),!0):(i({message:`æ¸…é™¤é…ç½®å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`æ¸…é™¤é…ç½®å¤±è´¥: ${n.message}`,type:"error"}),!1}}async function Je(n,l){try{const k=await(await fetch("/api/restore-user-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:l})})).json();return k.success?(_.value=n,v.value=l,i({message:"å·²æ¢å¤Gitç”¨æˆ·é…ç½®",type:"success"}),!0):(i({message:`æ¢å¤é…ç½®å¤±è´¥: ${k.error}`,type:"error"}),!1)}catch(m){return i({message:`æ¢å¤é…ç½®å¤±è´¥: ${m.message}`,type:"error"}),!1}}async function je(){if(!R.value)return i({message:"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",type:"warning"}),!1;try{Z.value=!0;const l=await(await fetch("/api/pull",{method:"POST"})).json();return l.success?(i({message:"æ‹‰å–æˆåŠŸ",type:"success"}),await N(),!0):(l.needsMerge?i({message:`éœ€è¦åˆå¹¶æ›´æ”¹: ${l.pullOutput||"å­˜åœ¨å†²çªéœ€è¦æ‰‹åŠ¨è§£å†³"}`,type:"warning",duration:5e3}):i({message:`æ‹‰å–å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`æ‹‰å–å¤±è´¥: ${n.message}`,type:"error"}),!1}finally{Z.value=!1}}async function st(){if(!R.value)return i({message:"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",type:"warning"}),!1;try{Q.value=!0;const l=await(await fetch("/api/fetch-all",{method:"POST"})).json();return l.success?(i({message:"è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯ä¿¡æ¯æˆåŠŸ",type:"success"}),await N(),!0):(i({message:`è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯å¤±è´¥: ${n.message}`,type:"error"}),!1}finally{Q.value=!1}}function Me(){D.value&&D.value.disconnect();try{const n=`http://localhost:${Va}`;if(console.log("å°è¯•è¿æ¥Socket.IOæœåŠ¡å™¨:",n),D.value=Zs(n,{reconnectionDelayMax:1e4,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,timeout:2e4,autoConnect:!0,forceNew:!0,transports:["websocket","polling"]}),!D.value){console.error("Socket.IOåˆå§‹åŒ–å¤±è´¥: socketä¸ºnull");return}console.log("Socket.IOåˆå§‹åŒ–æˆåŠŸï¼Œsocket ID:",D.value.id||"æœªè¿æ¥"),D.value.on("connect",()=>{console.log("æˆåŠŸè¿æ¥åˆ°Socket.IOæœåŠ¡å™¨"),q.value&&D.value&&D.value.emit("start_monitoring")}),D.value.on("disconnect",l=>{console.log("ä¸Socket.IOæœåŠ¡å™¨æ–­å¼€è¿æ¥:",l)}),D.value.on("git_status_update",l=>{q.value&&(console.log("æ”¶åˆ°GitçŠ¶æ€æ›´æ–°é€šçŸ¥:",new Date().toLocaleTimeString()),l.porcelain!==void 0&&We(l.porcelain))}),D.value.on("monitoring_status",l=>{console.log("æ–‡ä»¶ç›‘æ§çŠ¶æ€:",l.active?"å·²å¯åŠ¨":"å·²åœæ­¢")}),D.value.on("connect_error",l=>{console.error("Socketè¿æ¥é”™è¯¯:",l.message)}),D.value.on("connect_timeout",()=>{console.error("Socketè¿æ¥è¶…æ—¶")}),D.value.on("reconnect",l=>{var m;console.log(`Socketé‡è¿æˆåŠŸï¼Œå°è¯•æ¬¡æ•°: ${l}`),q.value&&(console.log("é‡è¿åé‡æ–°å‘é€start_monitoringè¯·æ±‚"),(m=D.value)==null||m.emit("start_monitoring"))}),D.value.on("reconnect_attempt",l=>{console.log(`Socketå°è¯•é‡è¿ï¼Œç¬¬ ${l} æ¬¡å°è¯•`)}),D.value.on("reconnect_error",l=>{console.error("Socketé‡è¿é”™è¯¯:",l.message)}),D.value.on("reconnect_failed",()=>{console.error("Socketé‡è¿å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°")}),D.value&&!D.value.connected&&(console.log("Socketæœªè¿æ¥ï¼Œå°è¯•æ‰‹åŠ¨è¿æ¥..."),D.value.connect())}catch(n){console.error("Socket.IOè¿æ¥åˆå§‹åŒ–å¤±è´¥:",n)}}function Pe(){if(console.log("toggleAutoUpdateè°ƒç”¨ï¼Œå½“å‰å€¼:",q.value),!D.value){console.error("æ— æ³•åˆ‡æ¢è‡ªåŠ¨æ›´æ–°çŠ¶æ€: socketè¿æ¥ä¸å­˜åœ¨"),i.error("æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè‡ªåŠ¨æ›´æ–°å¯èƒ½ä¸ä¼šç”Ÿæ•ˆ"),console.log("å°è¯•é‡æ–°å»ºç«‹socketè¿æ¥..."),Me(),localStorage.setItem("zen-gitsync-auto-update",q.value.toString());return}try{q.value?(console.log("å‘é€start_monitoringå‘½ä»¤..."),D.value.emit("start_monitoring"),i.success("è‡ªåŠ¨æ›´æ–°å·²å¯ç”¨")):(console.log("å‘é€stop_monitoringå‘½ä»¤..."),D.value.emit("stop_monitoring"),i.info("è‡ªåŠ¨æ›´æ–°å·²ç¦ç”¨")),localStorage.setItem("zen-gitsync-auto-update",q.value.toString()),console.log("å·²ä¿å­˜è‡ªåŠ¨æ›´æ–°è®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨:",q.value)}catch(n){console.error("åˆ‡æ¢è‡ªåŠ¨æ›´æ–°çŠ¶æ€æ—¶å‡ºé”™:",n),i.error(`åˆ‡æ¢è‡ªåŠ¨æ›´æ–°å¤±è´¥: ${n.message}`)}}function We(n){if(n===void 0||n===""){ne.value=[];return}const l=n.split(`
`),m=[];for(const k of l){const te=k.match(/^([ MADRCU\?]{2})\s+(.+)$/);if(te){let le="";const he=te[1],j=he.charAt(0),Ae=he.charAt(1);j==="A"||j==="M"||j==="D"||j==="R"?le="added":j===" "&&Ae==="M"?le="modified":j===" "&&Ae==="D"?le="deleted":he==="??"?le="untracked":le="other",m.push({path:te[2],type:le})}}ne.value=m}async function ye(n=!0){if(!R.value){console.log("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè·³è¿‡åŠ è½½æäº¤å†å²");return}try{T.value=!0,console.log("å¼€å§‹åŠ è½½æäº¤å†å²...");const l=new Date().getTime(),k=await(await fetch(`/api/log?page=1&_t=${l}`)).json();k&&k.data&&Array.isArray(k.data)?(W.value=[...k.data],console.log(`æäº¤å†å²åŠ è½½å®Œæˆï¼Œå…± ${W.value.length} æ¡è®°å½•`)):(console.warn("APIè¿”å›çš„æäº¤å†å²æ ¼å¼ä¸æ­£ç¡®:",k),W.value=[])}catch(l){console.error("è·å–æäº¤å†å²å¤±è´¥:",l),n&&i({message:`è·å–æäº¤å†å²å¤±è´¥: ${l.message}`,type:"error"})}finally{T.value=!1}}async function w(){if(!R.value){console.log("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè·³è¿‡åŠ è½½GitçŠ¶æ€");return}try{C.value=!0,await r()}catch(n){console.error("è·å–GitçŠ¶æ€å¤±è´¥:",n),i({message:`è·å–GitçŠ¶æ€å¤±è´¥: ${n.message}`,type:"error"})}finally{C.value=!1}}async function r(){if(console.log("å¼€å§‹è·å–GitçŠ¶æ€(porcelainæ ¼å¼)..."),!R.value){console.log("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè·³è¿‡åŠ è½½GitçŠ¶æ€");return}try{const l=await(await fetch("/api/status_porcelain")).json();l.status!==void 0?We(l.status):ne.value=[]}catch(n){console.error("è·å–GitçŠ¶æ€(porcelain)å¤±è´¥:",n),i({message:`è·å–GitçŠ¶æ€(porcelain)å¤±è´¥: ${n.message}`,type:"error"}),ne.value=[]}}async function J(){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{I.value=!0;const l=await(await fetch("/api/add",{method:"POST"})).json();return l.success?(i({message:"æ–‡ä»¶å·²æ·»åŠ åˆ°æš‚å­˜åŒº",type:"success"}),!0):(i({message:`æ·»åŠ æ–‡ä»¶å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`æ·»åŠ æ–‡ä»¶å¤±è´¥: ${n.message}`,type:"error"}),!1}finally{I.value=!1}}async function G(n){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{I.value=!0;const m=await(await fetch("/api/add-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})})).json();return m.success?(i({message:"æ–‡ä»¶å·²æš‚å­˜",type:"success"}),w(),!0):(i({message:`æš‚å­˜æ–‡ä»¶å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return i({message:`æš‚å­˜æ–‡ä»¶å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{I.value=!1}}async function Ce(n){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{P.value=!0;const m=await(await fetch("/api/unstage-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})})).json();return m.success?(i({message:"å·²å–æ¶ˆæš‚å­˜æ–‡ä»¶",type:"success"}),w(),!0):(i({message:`å–æ¶ˆæš‚å­˜å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return i({message:`å–æ¶ˆæš‚å­˜å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{P.value=!1}}function Ve(n){return new Promise(l=>setTimeout(l,n))}async function re(n,l=!1){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{X.value=!0;const k=await(await fetch("/api/commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n,hasNewlines:n.includes(`
`),noVerify:l})})).json();return k.success?(i({message:"æäº¤æˆåŠŸ",type:"success"}),!0):(i({message:`commitChanges æäº¤å¤±è´¥: ${k.error}`,type:"error"}),!1)}catch(m){return i({message:`æäº¤å¤±è´¥: ${m.message}`,type:"error"}),!1}finally{X.value=!1}}async function me(){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{O.value=!0;const l=await(await fetch("/api/push",{method:"POST"})).json();return l.success?(i({message:"æ¨é€æˆåŠŸ",type:"success"}),ae.value=0,de.value=0,await Promise.all([w(),ye()]),console.log("æ¨é€æˆåŠŸï¼Œåˆ†æ”¯çŠ¶æ€å·²è®¾ç½®ä¸ºåŒæ­¥ (ahead=0, behind=0)"),!0):(i({message:`æ¨é€å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`æ¨é€å¤±è´¥: ${n.message}`,type:"error"}),!1}finally{O.value=!1}}async function Re(n,l={}){if(!R.value)return i({message:"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",type:"warning"}),!1;if(!n)return i({message:"è¯·é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯",type:"warning"}),!1;if(n===ue.value)return i({message:"ä¸èƒ½åˆå¹¶å½“å‰åˆ†æ”¯åˆ°è‡ªèº«",type:"warning"}),!1;try{se.value=!0;const m=await fetch("/api/merge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:n,...l})}),k=await m.json();return m.status===409?(i({message:"åˆå¹¶åˆ†æ”¯æ—¶å‘ç”Ÿå†²çªï¼Œè¯·æ‰‹åŠ¨è§£å†³",type:"warning",duration:5e3}),!1):k.success?(i({message:`æˆåŠŸåˆå¹¶åˆ†æ”¯ ${n} åˆ° ${ue.value}`,type:"success"}),await w(),await N(),!0):(i({message:`åˆå¹¶åˆ†æ”¯å¤±è´¥: ${k.error}`,type:"error"}),!1)}catch(m){return i({message:`åˆå¹¶åˆ†æ”¯å¤±è´¥: ${m.message}`,type:"error"}),!1}finally{se.value=!1}}async function Se(n,l=!1){if(console.log("å¼€å§‹æš‚å­˜å¹¶æäº¤æ“ä½œ..."),!await J())return!1;console.log("æš‚å­˜å®Œæˆï¼Œç­‰å¾…Gitæ“ä½œå®Œæˆ..."),await Ve(Yt),console.log("å¼€å§‹æäº¤æ›´æ”¹...");const k=await re(n,l);return console.log("æš‚å­˜å¹¶æäº¤æ“ä½œå®Œæˆ"),k}async function $e(n,l=!1){try{if(console.log("å¼€å§‹æš‚å­˜æ–‡ä»¶..."),!await J()||(console.log("æš‚å­˜å®Œæˆï¼Œç­‰å¾…Gitæ“ä½œå®Œæˆ..."),await Ve(Yt),console.log("å¼€å§‹æäº¤æ›´æ”¹..."),!await re(n,l)))return!1;console.log("æäº¤å®Œæˆï¼Œç­‰å¾…Gitæ“ä½œå®Œæˆ..."),await Ve(Yt),console.log("å¼€å§‹æ¨é€åˆ°è¿œç¨‹...");const te=await me();return console.log("ä¸€é”®æ¨é€æ“ä½œå®Œæˆï¼ŒçŠ¶æ€å·²ç»Ÿä¸€åˆ·æ–°"),te}catch(m){console.error("ä¸€é”®æ¨é€æ“ä½œå¤±è´¥:",m);try{(await(await fetch("/api/remove-lock",{method:"POST"})).json()).success&&i({message:"æ£€æµ‹åˆ°Gité”å®šæ–‡ä»¶å†²çªï¼Œå·²è‡ªåŠ¨æ¸…ç†ï¼Œè¯·é‡è¯•æ“ä½œ",type:"warning"})}catch(k){console.error("æ¸…ç†é”å®šæ–‡ä»¶å¤±è´¥:",k)}i({message:`æ“ä½œå¤±è´¥: ${m.message}`,type:"error"});try{await Promise.all([w(),ye(),N()])}catch(k){console.error("åˆ·æ–°çŠ¶æ€å¤±è´¥:",k)}return!1}}async function at(){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{P.value=!0;const l=await(await fetch("/api/reset-head",{method:"POST"})).json();return l.success?(i({message:"å·²é‡ç½®æš‚å­˜åŒº",type:"success"}),w(),!0):(i({message:`é‡ç½®æš‚å­˜åŒºå¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`é‡ç½®æš‚å­˜åŒºå¤±è´¥: ${n.message}`,type:"error"}),!1}finally{P.value=!1}}async function Ye(n){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{P.value=!0;const m=await(await fetch("/api/reset-to-remote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:n})})).json();return m.success?(i({message:`å·²é‡ç½®åˆ†æ”¯ ${n} åˆ°è¿œç¨‹çŠ¶æ€`,type:"success"}),w(),ye(),!0):(i({message:`é‡ç½®åˆ†æ”¯å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return i({message:`é‡ç½®åˆ†æ”¯å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{P.value=!1}}async function K(){if(R.value)try{ce.value=!0,console.log("è·å–è¿œç¨‹ä»“åº“åœ°å€...");const l=await(await fetch("/api/remote-url")).json();l.success?(H.value=l.url||"",console.log(`è·å–åˆ°è¿œç¨‹ä»“åº“åœ°å€: ${H.value}`)):(console.warn("è·å–è¿œç¨‹ä»“åº“åœ°å€å¤±è´¥:",l.error),H.value="")}catch(n){console.error("è·å–è¿œç¨‹ä»“åº“åœ°å€å¤±è´¥:",n),H.value=""}finally{ce.value=!1}}async function lt(){if(!H.value)return i({message:"æ²¡æœ‰å¯å¤åˆ¶çš„è¿œç¨‹ä»“åº“åœ°å€",type:"warning"}),!1;try{return await navigator.clipboard.writeText(H.value),i({message:"å·²å¤åˆ¶è¿œç¨‹ä»“åº“åœ°å€",type:"success"}),!0}catch(n){return console.error("å¤åˆ¶è¿œç¨‹ä»“åº“åœ°å€å¤±è´¥:",n),i({message:`å¤åˆ¶å¤±è´¥: ${n.message}`,type:"error"}),!1}}_t(()=>{const n=localStorage.getItem("zen-gitsync-auto-update");n!==null&&(q.value=n==="true"),Me()});function ot(){D.value&&(D.value.disconnect(),D.value=null)}ys(()=>{ot()});async function Xe(){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),[];try{ke.value=!0;const l=await(await fetch("/api/stash-list")).json();return l.success?(ve.value=l.stashes,l.stashes):(i.error(`è·å–stashåˆ—è¡¨å¤±è´¥: ${l.error}`),[])}catch(n){return console.error("è·å–stashåˆ—è¡¨å¤±è´¥:",n),i.error(`è·å–stashåˆ—è¡¨å¤±è´¥: ${n.message}`),[]}finally{ke.value=!1}}async function wt(n,l=!1,m=!0){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{A.value=!0;const te=await(await fetch("/api/stash-save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n,includeUntracked:l,excludeLocked:m})})).json();return te.success?(i.success(te.message),await Xe(),await w(),!0):(i.warning(te.message),!1)}catch(k){return console.error("ä¿å­˜stashå¤±è´¥:",k),i.error(`ä¿å­˜stashå¤±è´¥: ${k.message}`),!1}finally{A.value=!1}}async function nt(n,l=!1){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{L.value=!0;const m=await fetch("/api/stash-apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stashId:n,pop:l})}),k=await m.json();return m.status===409?(i.warning("åº”ç”¨stashæ—¶å‘ç”Ÿå†²çªï¼Œè¯·æ‰‹åŠ¨è§£å†³"),!1):k.success?(i.success(k.message),await Xe(),await w(),!0):(i.error(`åº”ç”¨stashå¤±è´¥: ${k.error}`),!1)}catch(m){return console.error("åº”ç”¨stashå¤±è´¥:",m),i.error(`åº”ç”¨stashå¤±è´¥: ${m.message}`),!1}finally{L.value=!1}}async function Oe(n){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{f.value=!0;const m=await(await fetch("/api/stash-drop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stashId:n})})).json();return m.success?(i.success(m.message),await Xe(),!0):(i.error(`åˆ é™¤stashå¤±è´¥: ${m.error}`),!1)}catch(l){return console.error("åˆ é™¤stashå¤±è´¥:",l),i.error(`åˆ é™¤stashå¤±è´¥: ${l.message}`),!1}finally{f.value=!1}}async function it(){if(!R.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{f.value=!0;const l=await(await fetch("/api/stash-clear",{method:"POST"})).json();return l.success?(i.success(l.message),ve.value=[],!0):(i.error(`æ¸…ç©ºstashå¤±è´¥: ${l.error}`),!1)}catch(n){return console.error("æ¸…ç©ºstashå¤±è´¥:",n),i.error(`æ¸…ç©ºstashå¤±è´¥: ${n.message}`),!1}finally{f.value=!1}}return{currentBranch:ue,allBranches:u,userName:_,userEmail:v,isChangingBranch:g,isCreatingBranch:M,isGitRepo:R,lastCheckedTime:E,branchAhead:ae,branchBehind:de,hasUpstream:oe,upstreamBranch:S,lastBranchStatusTime:B,lastBranchesTime:x,remoteUrl:H,isLoadingRemoteUrl:ce,stashes:ve,isLoadingStashes:ke,isApplyingStash:L,isDroppingStash:f,isSavingStash:A,log:W,status:fe,fileList:ne,isLoadingLog:T,isLoadingStatus:C,isAddingFiles:I,isCommiting:X,isResetting:P,autoUpdateEnabled:q,isPushing:O,isGitPulling:Z,isGitFetching:Q,isGitMerging:se,$reset:F,checkGitRepo:ee,getCurrentBranch:be,getAllBranches:ge,changeBranch:Be,getUserInfo:Ge,createBranch:b,clearUserConfig:ie,restoreUserConfig:Je,getBranchStatus:N,gitPull:je,gitFetchAll:st,initSocketConnection:Me,toggleAutoUpdate:Pe,parseStatusPorcelain:We,fetchLog:ye,fetchStatus:w,fetchStatusPorcelain:r,addToStage:J,addFileToStage:G,unstageFile:Ce,commitChanges:re,pushToRemote:me,addAndCommit:Se,addCommitAndPush:$e,resetHead:at,resetToRemote:Ye,getRemoteUrl:K,copyRemoteUrl:lt,mergeBranch:Re,getStashList:Xe,saveStash:wt,applyStash:nt,dropStash:Oe,clearAllStashes:it,socket:D,disconnectSocket:ot}}),ls=gs("config",()=>{const ue=d(""),u=d([]),_=d([]),v=d([]),g=d([]),M=d(!1),R=d(!1),E=Le(()=>({defaultCommitMessage:ue.value,descriptionTemplates:u.value,scopeTemplates:_.value,messageTemplates:v.value,lockedFiles:g.value}));async function H(S=!1){if(!S&&R.value&&!M.value)return console.log("ä½¿ç”¨ç¼“å­˜çš„é…ç½®ä¿¡æ¯"),E.value;try{M.value=!0,console.log("åŠ è½½é…ç½®ä¿¡æ¯...");const x=await(await fetch("/api/config/getConfig")).json();return ue.value=x.defaultCommitMessage||"",u.value=x.descriptionTemplates||[],_.value=x.scopeTemplates||[],v.value=x.messageTemplates||[],g.value=x.lockedFiles||[],R.value=!0,console.log("é…ç½®ä¿¡æ¯åŠ è½½å®Œæˆ"),E.value}catch(B){return console.error("åŠ è½½é…ç½®å¤±è´¥:",B),i.error(`åŠ è½½é…ç½®å¤±è´¥: ${B.message}`),null}finally{M.value=!1}}async function ce(S){try{const x=await(await fetch("/api/config/saveDefaultMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({defaultCommitMessage:S})})).json();return x.success?(ue.value=S,i.success("é»˜è®¤æäº¤ä¿¡æ¯å·²ä¿å­˜"),!0):(i.error(`ä¿å­˜å¤±è´¥: ${x.error}`),!1)}catch(B){return i.error(`ä¿å­˜å¤±è´¥: ${B.message}`),!1}}async function O(S,B){try{const q=await(await fetch("/api/config/save-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:S,type:B})})).json();return q.success?(B==="description"?u.value.includes(S)||u.value.push(S):B==="scope"?_.value.includes(S)||_.value.push(S):B==="message"&&(v.value.includes(S)||v.value.push(S)),i.success("æ¨¡æ¿å·²ä¿å­˜"),!0):(i.error(`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${q.error}`),!1)}catch(x){return i.error(`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${x.message}`),!1}}async function Z(S,B){try{const q=await(await fetch("/api/config/delete-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:S,type:B})})).json();return q.success?(B==="description"?u.value=u.value.filter(D=>D!==S):B==="scope"?_.value=_.value.filter(D=>D!==S):B==="message"&&(v.value=v.value.filter(D=>D!==S)),i.success("æ¨¡æ¿å·²åˆ é™¤"),!0):(i.error(`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${q.error}`),!1)}catch(x){return i.error(`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${x.message}`),!1}}async function Q(S,B,x){try{const D=await(await fetch("/api/config/update-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldTemplate:S,newTemplate:B,type:x})})).json();if(D.success){if(x==="description"){const W=u.value.indexOf(S);W!==-1&&(u.value[W]=B)}else if(x==="scope"){const W=_.value.indexOf(S);W!==-1&&(_.value[W]=B)}else if(x==="message"){const W=v.value.indexOf(S);W!==-1&&(v.value[W]=B)}return i.success("æ¨¡æ¿å·²æ›´æ–°"),!0}else return i.error(`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${D.error}`),!1}catch(q){return i.error(`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${q.message}`),!1}}async function se(){try{const B=await(await fetch("/api/locked-files")).json();return B.success?(g.value=B.lockedFiles||[],B.lockedFiles):(i.error(`åŠ è½½é”å®šæ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${B.error}`),[])}catch(S){return console.error("åŠ è½½é”å®šæ–‡ä»¶åˆ—è¡¨å¤±è´¥:",S),i.error(`åŠ è½½é”å®šæ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${S.message}`),[]}}async function ae(S){try{const x=await(await fetch("/api/lock-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S})})).json();return x.success?(await se(),i.success(`æ–‡ä»¶å·²é”å®š: ${S}`),!0):(i.error(`é”å®šæ–‡ä»¶å¤±è´¥: ${x.error}`),!1)}catch(B){return console.error("é”å®šæ–‡ä»¶å¤±è´¥:",B),i.error(`é”å®šæ–‡ä»¶å¤±è´¥: ${B.message}`),!1}}async function de(S){try{const x=await(await fetch("/api/unlock-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S})})).json();return x.success?(await se(),i.success(`æ–‡ä»¶å·²è§£é”: ${S}`),!0):(i.error(`è§£é”æ–‡ä»¶å¤±è´¥: ${x.error}`),!1)}catch(B){return console.error("è§£é”æ–‡ä»¶å¤±è´¥:",B),i.error(`è§£é”æ–‡ä»¶å¤±è´¥: ${B.message}`),!1}}async function oe(S){try{const x=await(await fetch("/api/check-file-lock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S})})).json();return x.success?x.isLocked:(console.error("æ£€æŸ¥æ–‡ä»¶é”å®šçŠ¶æ€å¤±è´¥:",x.error),!1)}catch(B){return console.error("æ£€æŸ¥æ–‡ä»¶é”å®šçŠ¶æ€å¤±è´¥:",B),!1}}return{defaultCommitMessage:ue,descriptionTemplates:u,scopeTemplates:_,messageTemplates:v,lockedFiles:g,isLoading:M,isLoaded:R,config:E,loadConfig:H,saveDefaultMessage:ce,saveTemplate:O,deleteTemplate:Z,updateTemplate:Q,loadLockedFiles:se,lockFile:ae,unlockFile:de,isFileLocked:oe}}),La={class:"card"},za={class:"status-header"},Ba={class:"header-actions"},Ga=["element-loading-text"],Ra={key:0,class:"status-box"},Da={key:1,class:"status-box-wrap"},Fa={key:0,class:"branch-status-info"},ja={class:"branch-sync-status"},Oa={class:"sync-status-content"},Aa={class:"status-badges"},Ea={class:"badge-content"},Ua={class:"badge-content"},Ma={key:1,class:"file-list-container"},Pa={key:0,class:"file-group"},Na={class:"file-list"},Ha=["onClick"],Ia={class:"file-info"},Ja={class:"file-name-section"},Wa=["title"],qa={class:"file-directory"},Ya={class:"file-actions"},Xa={key:1,class:"file-group"},Ka={class:"file-list"},Za=["onClick"],Qa={class:"file-info"},el={class:"file-name-section"},tl=["title"],sl={class:"file-directory"},al={class:"file-actions"},ll={key:2,class:"file-group"},ol={class:"file-list"},nl=["onClick"],il={class:"file-info"},rl={class:"file-name-section"},cl=["title"],ul={class:"file-directory"},dl={class:"file-actions"},fl={key:2,class:"empty-status"},pl={class:"empty-icon"},vl={class:"diff-content"},ml=["innerHTML"],gl={key:1,class:"no-diff"},yl={class:"file-navigation"},hl={class:"file-counter"},_l={class:"lock-feature-description"},wl={class:"description-header"},kl={key:0,class:"empty-locked-files"},$l={class:"empty-icon"},bl={key:1,class:"locked-files-list"},Cl={class:"locked-files-header"},Sl={class:"locked-file-items"},Tl={class:"file-info"},xl={class:"file-path-container"},Vl={class:"file-name"},Ll={class:"file-directory"},zl={class:"file-actions"},Bl={class:"dialog-footer"},Gl=Vt({__name:"GitStatus",props:{initialDirectory:{type:String,default:""}},setup(ue,{expose:u}){const _=ue,v=ht(),g=ls(),M=Le(()=>v.isLoadingStatus),R=d(""),E=d(""),H=d(!1),ce=d(!1),O=d(-1),Z=d(!1),Q=d({staged:!1,unstaged:!1,untracked:!1}),se=d(_.initialDirectory||"");async function ae(){try{if(!se.value){const f=await(await fetch("/api/current_directory")).json();se.value=f.directory||"æœªçŸ¥ç›®å½•"}if(!v.isGitRepo)return;await v.fetchStatus(),await v.getBranchStatus(),i({message:"Git çŠ¶æ€å·²åˆ·æ–°",type:"success"})}catch(L){i({message:"åˆ·æ–°å¤±è´¥: "+L.message,type:"error"})}}function de(L){if(!L)return"";const f=L.split(`
`);function A(F){return F.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}return f.map(F=>{const N=A(F);return F.startsWith("diff --git")?`<div class="diff-header">${N}</div>`:F.startsWith("---")?`<div class="diff-old-file">${N}</div>`:F.startsWith("+++")?`<div class="diff-new-file">${N}</div>`:F.startsWith("@@")?`<div class="diff-hunk-header">${N}</div>`:F.startsWith("+")?`<div class="diff-added">${N}</div>`:F.startsWith("-")?`<div class="diff-removed">${N}</div>`:`<div class="diff-context">${N}</div>`}).join("")}async function oe(L){try{ce.value=!0,R.value=L,O.value=v.fileList.findIndex(A=>A.path===L);const f=v.fileList[O.value];if(f&&f.type==="untracked"){try{const F=await(await fetch(`/api/file-content?file=${encodeURIComponent(L)}`)).json();F.success&&F.content?E.value=`diff --git a/${L} b/${L}
æ–°æ–‡ä»¶: ${L}
--- /dev/null
+++ b/${L}
@@ -0,0 +1,${F.content.split(`
`).length} @@
`+F.content.split(`
`).map(N=>`+${N}`).join(`
`):E.value=`è¿™æ˜¯ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå°šæœªè¢«Gitè·Ÿè¸ªã€‚
æ·»åŠ åˆ°æš‚å­˜åŒºåå¯ä»¥æäº¤è¯¥æ–‡ä»¶ã€‚`}catch(A){console.error("è·å–æœªè·Ÿè¸ªæ–‡ä»¶å†…å®¹å¤±è´¥:",A),E.value=`è¿™æ˜¯ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå°šæœªè¢«Gitè·Ÿè¸ªã€‚
æ·»åŠ åˆ°æš‚å­˜åŒºåå¯ä»¥æäº¤è¯¥æ–‡ä»¶ã€‚`}H.value=!0}else if(f&&f.type==="added"){const F=await(await fetch(`/api/diff-cached?file=${encodeURIComponent(L)}`)).json();E.value=F.diff||"æ²¡æœ‰å˜æ›´",H.value=!0}else{const F=await(await fetch(`/api/diff?file=${encodeURIComponent(L)}`)).json();E.value=F.diff||"æ²¡æœ‰å˜æ›´",H.value=!0}}catch(f){i({message:"è·å–æ–‡ä»¶å·®å¼‚å¤±è´¥: "+f.message,type:"error"}),E.value="è·å–å·®å¼‚å¤±è´¥: "+f.message}finally{ce.value=!1}}async function S(){if(v.fileList.length===0||O.value<=0)return;const L=O.value-1,f=v.fileList[L];await oe(f.path)}async function B(){if(v.fileList.length===0||O.value>=v.fileList.length-1)return;const L=O.value+1,f=v.fileList[L];await oe(f.path)}function x(L){oe(L.path)}async function q(L){await v.addFileToStage(L)}async function D(L){await v.unstageFile(L)}async function W(){await fe()}async function fe(){try{if(!v.isGitRepo)return;await v.fetchStatus(),i({message:"Git æ–‡ä»¶çŠ¶æ€å·²åˆ·æ–°",type:"success"})}catch(L){i({message:"åˆ·æ–°å¤±è´¥: "+L.message,type:"error"})}}async function ne(){try{await v.gitPull(),await ae()}catch(L){console.error("æ‹‰å–æ“ä½œå‘ç”Ÿé”™è¯¯:",L)}}async function T(){try{await v.gitFetchAll(),await ae()}catch(L){console.error("è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯æ“ä½œå‘ç”Ÿé”™è¯¯:",L)}}async function C(L){try{await Ue.confirm(`ç¡®å®šè¦æ’¤å›æ–‡ä»¶ "${L}" çš„æ‰€æœ‰ä¿®æ”¹å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚`,"æ’¤å›ä¿®æ”¹",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});const A=await(await fetch("/api/revert_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:L})})).json();A.success?(i.success("å·²æ’¤å›æ–‡ä»¶ä¿®æ”¹"),await ae()):i.error(A.error?`æ’¤å›å¤±è´¥: ${A.error}`:"æ’¤å›æ–‡ä»¶ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•")}catch(f){if(f==="cancel"||f.message==="cancel")return;const A=f.message||"æœªçŸ¥é”™è¯¯";A!=="undefined"?i.error(`æ’¤å›æ–‡ä»¶ä¿®æ”¹å¤±è´¥: ${A}`):i.error("æ’¤å›æ–‡ä»¶ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•")}}function I(L){const f=L.split("/");return f[f.length-1]}function X(L){const f=L.split("/");return f.length<=1?"":f.slice(0,-1).join("/")}function P(L){const f=L.replace(/\\/g,"/"),A=g.lockedFiles.some(F=>{const N=F.replace(/\\/g,"/");return f===N});return(L==="test/2.txt"||L==="2.txt")&&console.log("æ£€æŸ¥æ–‡ä»¶é”å®šçŠ¶æ€:",{filePath:L,normalizedPath:f,lockedFiles:g.lockedFiles,normalizedLockedFiles:g.lockedFiles.map(F=>F.replace(/\\/g,"/")),isLocked:A}),A}function ve(L){P(L)?g.unlockFile(L):g.lockFile(L)}function ke(L){Q.value[L]=!Q.value[L]}return _t(()=>{ae(),g.loadConfig(),g.loadLockedFiles()}),qe(()=>v.autoUpdateEnabled,(L,f)=>{console.log(`è‡ªåŠ¨æ›´æ–°çŠ¶æ€å˜æ›´: ${f} -> ${L}`),v.toggleAutoUpdate()},{immediate:!1}),u({refreshStatus:W}),(L,f)=>{const A=hs,F=Zt,N=Fe,ee=Lt,be=zt,ge=Bt,Be=ta,Ge=Qt;return p(),h(we,null,[e("div",La,[e("div",za,[f[8]||(f[8]=e("h2",null,"Git çŠ¶æ€",-1)),e("div",Ba,[t(F,{content:o(v).autoUpdateEnabled?"ç¦ç”¨è‡ªåŠ¨æ›´æ–°æ–‡ä»¶çŠ¶æ€":"å¯ç”¨è‡ªåŠ¨æ›´æ–°æ–‡ä»¶çŠ¶æ€",placement:"top","hide-after":1e3},{default:a(()=>[t(A,{modelValue:o(v).autoUpdateEnabled,"onUpdate:modelValue":f[0]||(f[0]=b=>o(v).autoUpdateEnabled=b),style:{"--el-switch-on-color":"#67C23A","--el-switch-off-color":"#909399","margin-right":"10px"},"inline-prompt":"","active-icon":o(_s),"inactive-icon":o(Kt),class:"auto-update-switch"},null,8,["modelValue","active-icon","inactive-icon"])]),_:1},8,["content"]),t(F,{content:"Git Pull (æ‹‰å–è¿œç¨‹æ›´æ–°)",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:"primary",icon:o(ws),circle:"",size:"small",onClick:ne,loading:o(v).isGitPulling,disabled:!o(v).hasUpstream},null,8,["icon","loading","disabled"])]),_:1}),t(F,{content:"Git Fetch All (è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯)",placement:"top","hide-after":1e3},{default:a(()=>[Ee(t(N,{type:"primary",icon:o(ks),circle:"",size:"small",onClick:T,loading:o(v).isGitFetching},null,8,["icon","loading"]),[[pt,!1]])]),_:1}),o(g).lockedFiles.length>0?(p(),Y(F,{key:0,content:"ç®¡ç†é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:"warning",circle:"",size:"small",onClick:f[1]||(f[1]=b=>Z.value=!0)},{default:a(()=>[t(ee,null,{default:a(()=>[t(o(tt))]),_:1})]),_:1})]),_:1})):U("",!0),t(F,{content:"åˆ·æ–°çŠ¶æ€",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:"primary",icon:o(Qs),circle:"",size:"small",onClick:W,loading:M.value},null,8,["icon","loading"])]),_:1})])]),Ee((p(),h("div",{class:"card-content","element-loading-text":o(v).isGitPulling?"æ­£åœ¨æ‹‰å–ä»£ç ...":"æ­£åœ¨è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯..."},[o(v).isGitRepo?(p(),h("div",Da,[o(v).hasUpstream&&(o(v).branchAhead>0||o(v).branchBehind>0)?(p(),h("div",Fa,[e("div",ja,[e("div",Oa,[t(F,{content:"æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„çŠ¶æ€å¯¹æ¯”",placement:"top"},{default:a(()=>[e("div",Aa,[o(v).branchAhead>0?(p(),Y(be,{key:0,size:"small",type:"warning",class:"status-badge"},{default:a(()=>[e("span",Ea,[t(ee,null,{default:a(()=>[t(o($s))]),_:1}),y(" ä½ çš„åˆ†æ”¯é¢†å…ˆ 'origin/"+z(o(v).currentBranch)+"' "+z(o(v).branchAhead)+" ä¸ªæäº¤ ",1)])]),_:1})):U("",!0),o(v).branchBehind>0?(p(),Y(be,{key:1,size:"small",type:"info",class:"status-badge"},{default:a(()=>[e("span",Ua,[t(ee,null,{default:a(()=>[t(o(gt))]),_:1}),y(" ä½ çš„åˆ†æ”¯è½å 'origin/"+z(o(v).currentBranch)+"' "+z(o(v).branchBehind)+" ä¸ªæäº¤ ",1)])]),_:1})):U("",!0)])]),_:1})])])])):U("",!0),o(v).fileList.length?(p(),h("div",Ma,[o(v).fileList.some(b=>b.type==="added")?(p(),h("div",Pa,[e("div",{class:"file-group-header",onClick:f[2]||(f[2]=b=>ke("staged"))},[t(ee,{class:pe(["collapse-icon",{collapsed:Q.value.staged}])},{default:a(()=>[t(o(gt))]),_:1},8,["class"]),f[10]||(f[10]=e("span",null,"å·²æš‚å­˜çš„æ›´æ”¹",-1))]),Ee(e("div",Na,[(p(!0),h(we,null,ze(o(v).fileList.filter(b=>b.type==="added"),b=>(p(),h("div",{key:b.path,class:"file-item",onClick:ie=>x(b)},[e("div",Ia,[e("div",{class:pe(["file-status-indicator",["added",{locked:P(b.path)}]])},null,2),e("div",Ja,[e("span",{class:pe(["file-name",{"locked-file-name":P(b.path)}])},[y(z(I(b.path))+" ",1),P(b.path)?(p(),Y(ee,{key:0,class:"lock-indicator"},{default:a(()=>[t(o(tt))]),_:1})):U("",!0)],2)]),e("div",{class:"file-path-section",title:X(b.path)},[e("span",qa,z(X(b.path)),1)],8,Wa)]),e("div",Ya,[t(F,{content:P(b.path)?"è§£é”æ–‡ä»¶":"é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:P(b.path)?"danger":"info",size:"small",circle:"",onClick:Ie(ie=>ve(b.path),["stop"]),class:"file-action-btn"},{default:a(()=>[t(ee,{size:"12"},{default:a(()=>[(p(),Y(yt(P(b.path)?o(tt):o(Ot))))]),_:2},1024)]),_:2},1032,["type","onClick"])]),_:2},1032,["content"]),t(F,{content:"å–æ¶ˆæš‚å­˜",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:"warning",size:"small",circle:"",onClick:Ie(ie=>D(b.path),["stop"]),class:"file-action-btn"},{default:a(()=>f[11]||(f[11]=[y("-")])),_:2},1032,["onClick"])]),_:2},1024)])],8,Ha))),128))],512),[[pt,!Q.value.staged]])])):U("",!0),o(v).fileList.some(b=>b.type==="modified"||b.type==="deleted")?(p(),h("div",Xa,[e("div",{class:"file-group-header",onClick:f[3]||(f[3]=b=>ke("unstaged"))},[t(ee,{class:pe(["collapse-icon",{collapsed:Q.value.unstaged}])},{default:a(()=>[t(o(gt))]),_:1},8,["class"]),f[12]||(f[12]=e("span",null,"æœªæš‚å­˜çš„æ›´æ”¹",-1))]),Ee(e("div",Ka,[(p(!0),h(we,null,ze(o(v).fileList.filter(b=>b.type==="modified"||b.type==="deleted"),b=>(p(),h("div",{key:b.path,class:"file-item",onClick:ie=>x(b)},[e("div",Qa,[e("div",{class:pe(["file-status-indicator",[b.type,{locked:P(b.path)}]])},null,2),e("div",el,[e("span",{class:pe(["file-name",{"locked-file-name":P(b.path)}])},[y(z(I(b.path))+" ",1),P(b.path)?(p(),Y(ee,{key:0,class:"lock-indicator"},{default:a(()=>[t(o(tt))]),_:1})):U("",!0)],2)]),e("div",{class:"file-path-section",title:X(b.path)},[e("span",sl,z(X(b.path)),1)],8,tl)]),e("div",al,[t(F,{content:P(b.path)?"è§£é”æ–‡ä»¶":"é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:P(b.path)?"danger":"info",size:"small",circle:"",onClick:Ie(ie=>ve(b.path),["stop"]),class:"file-action-btn"},{default:a(()=>[t(ee,{size:"12"},{default:a(()=>[(p(),Y(yt(P(b.path)?o(tt):o(Ot))))]),_:2},1024)]),_:2},1032,["type","onClick"])]),_:2},1032,["content"]),t(F,{content:"æ·»åŠ åˆ°æš‚å­˜åŒº",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:"success",size:"small",circle:"",onClick:Ie(ie=>q(b.path),["stop"]),class:"file-action-btn"},{default:a(()=>f[13]||(f[13]=[y("+")])),_:2},1032,["onClick"])]),_:2},1024),t(F,{content:"æ’¤å›ä¿®æ”¹",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:"danger",size:"small",icon:o(es),circle:"",onClick:Ie(ie=>C(b.path),["stop"]),class:"file-action-btn"},null,8,["icon","onClick"])]),_:2},1024)])],8,Za))),128))],512),[[pt,!Q.value.unstaged]])])):U("",!0),o(v).fileList.some(b=>b.type==="untracked")?(p(),h("div",ll,[e("div",{class:"file-group-header",onClick:f[4]||(f[4]=b=>ke("untracked"))},[t(ee,{class:pe(["collapse-icon",{collapsed:Q.value.untracked}])},{default:a(()=>[t(o(gt))]),_:1},8,["class"]),f[14]||(f[14]=e("span",null,"æœªè·Ÿè¸ªçš„æ–‡ä»¶",-1))]),Ee(e("div",ol,[(p(!0),h(we,null,ze(o(v).fileList.filter(b=>b.type==="untracked"),b=>(p(),h("div",{key:b.path,class:"file-item",onClick:ie=>x(b)},[e("div",il,[e("div",{class:pe(["file-status-indicator",["untracked",{locked:P(b.path)}]])},null,2),e("div",rl,[e("span",{class:pe(["file-name",{"locked-file-name":P(b.path)}])},[y(z(I(b.path))+" ",1),P(b.path)?(p(),Y(ee,{key:0,class:"lock-indicator"},{default:a(()=>[t(o(tt))]),_:1})):U("",!0)],2)]),e("div",{class:"file-path-section",title:X(b.path)},[e("span",ul,z(X(b.path)),1)],8,cl)]),e("div",dl,[t(F,{content:P(b.path)?"è§£é”æ–‡ä»¶":"é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:P(b.path)?"danger":"info",size:"small",circle:"",onClick:Ie(ie=>ve(b.path),["stop"]),class:"file-action-btn"},{default:a(()=>[t(ee,{size:"12"},{default:a(()=>[(p(),Y(yt(P(b.path)?o(tt):o(Ot))))]),_:2},1024)]),_:2},1032,["type","onClick"])]),_:2},1032,["content"]),t(F,{content:"æ·»åŠ åˆ°æš‚å­˜åŒº",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:"success",size:"small",circle:"",onClick:Ie(ie=>q(b.path),["stop"]),class:"file-action-btn"},{default:a(()=>f[15]||(f[15]=[y("+")])),_:2},1032,["onClick"])]),_:2},1024),t(F,{content:"åˆ é™¤æ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:"danger",size:"small",icon:o(Kt),circle:"",onClick:Ie(ie=>C(b.path),["stop"]),class:"file-action-btn"},null,8,["icon","onClick"])]),_:2},1024)])],8,nl))),128))],512),[[pt,!Q.value.untracked]])])):U("",!0)])):o(v).isGitRepo?(p(),h("div",fl,[e("div",pl,[t(ee,null,{default:a(()=>[t(o(bs))]),_:1})]),f[16]||(f[16]=e("div",{class:"empty-text"},"æ²¡æœ‰æ£€æµ‹åˆ°ä»»ä½•æ›´æ”¹",-1)),f[17]||(f[17]=e("div",{class:"empty-subtext"},"å·¥ä½œåŒºæ˜¯å¹²å‡€çš„",-1))])):U("",!0)])):(p(),h("div",Ra,f[9]||(f[9]=[e("div",{class:"empty-status"},[e("p",null,"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“")],-1)])))],8,Ga)),[[Ge,o(v).isGitPulling||o(v).isGitFetching]])]),t(ge,{modelValue:H.value,"onUpdate:modelValue":f[5]||(f[5]=b=>H.value=b),title:`æ–‡ä»¶å·®å¼‚: ${R.value}`,width:"80%","destroy-on-close":"",class:"diff-dialog"},{footer:a(()=>[e("div",yl,[t(N,{type:"primary",icon:o(ea),onClick:S,disabled:O.value<=0||o(v).fileList.length===0,plain:"",class:"nav-button"},{default:a(()=>f[18]||(f[18]=[y(" ä¸Šä¸€ä¸ªæ–‡ä»¶ ")])),_:1},8,["icon","disabled"]),e("div",hl,[t(be,{type:"info",effect:"plain",class:"counter-tag"},{default:a(()=>[y(z(O.value+1)+" / "+z(o(v).fileList.length),1)]),_:1})]),t(N,{type:"primary",icon:o(ds),onClick:B,disabled:O.value>=o(v).fileList.length-1||o(v).fileList.length===0,plain:"",class:"nav-button"},{icon:a(()=>[t(ee,{class:"el-icon--right"},{default:a(()=>[t(o(ds))]),_:1})]),default:a(()=>[f[19]||(f[19]=y(" ä¸‹ä¸€ä¸ªæ–‡ä»¶ "))]),_:1},8,["icon","disabled"])])]),default:a(()=>[Ee((p(),h("div",vl,[E.value?(p(),h("div",{key:0,innerHTML:de(E.value),class:"diff-formatted"},null,8,ml)):(p(),h("div",gl,"è¯¥æ–‡ä»¶æ²¡æœ‰å·®å¼‚æˆ–æ˜¯æ–°æ–‡ä»¶"))])),[[Ge,ce.value]])]),_:1},8,["modelValue","title"]),t(ge,{modelValue:Z.value,"onUpdate:modelValue":f[7]||(f[7]=b=>Z.value=b),title:"é”å®šæ–‡ä»¶ç®¡ç†",width:"700px","destroy-on-close":""},{footer:a(()=>[e("span",Bl,[t(N,{onClick:f[6]||(f[6]=b=>Z.value=!1)},{default:a(()=>f[25]||(f[25]=[y("å…³é—­")])),_:1})])]),default:a(()=>[e("div",_l,[e("div",wl,[t(ee,{class:"description-icon"},{default:a(()=>[t(o(fs))]),_:1}),f[20]||(f[20]=e("span",{class:"description-title"},"æ–‡ä»¶é”å®šåŠŸèƒ½è¯´æ˜",-1))]),f[21]||(f[21]=e("div",{class:"description-content"},[e("p",null,[e("strong",null,"ğŸ”’ é”å®šæ–‡ä»¶çš„ä½œç”¨ï¼š")]),e("ul",null,[e("li",null,"é”å®šçš„æ–‡ä»¶åœ¨æ‰§è¡Œ Git æäº¤æ—¶ä¼šè¢«è‡ªåŠ¨è·³è¿‡ï¼Œä¸ä¼šè¢«æ·»åŠ åˆ°æš‚å­˜åŒº"),e("li",null,"é€‚ç”¨äºä¸´æ—¶æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€æˆ–ä¸æƒ³æäº¤çš„å¼€å‘ä¸­æ–‡ä»¶"),e("li",null,"é”å®šçŠ¶æ€ä¼šæŒä¹…ä¿å­˜ï¼Œç›´åˆ°æ‰‹åŠ¨è§£é”")]),e("p",null,[e("strong",null,"ğŸ’¡ ä½¿ç”¨åœºæ™¯ï¼š")]),e("ul",null,[e("li",null,"å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æµ‹è¯•æ–‡ä»¶"),e("li",null,"æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€APIå¯†é’¥ç­‰ï¼‰"),e("li",null,"æ­£åœ¨å¼€å‘ä½†è¿˜ä¸æƒ³æäº¤çš„åŠŸèƒ½æ–‡ä»¶")])],-1))]),t(Be),o(g).lockedFiles.length===0?(p(),h("div",kl,[e("div",$l,[t(ee,null,{default:a(()=>[t(o(tt))]),_:1})]),f[22]||(f[22]=e("p",null,"å½“å‰æ²¡æœ‰é”å®šçš„æ–‡ä»¶",-1)),f[23]||(f[23]=e("p",{class:"empty-tip"},"æ‚¨å¯ä»¥åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­ç‚¹å‡»é”å®šæŒ‰é’®æ¥é”å®šæ–‡ä»¶",-1))])):(p(),h("div",bl,[e("div",Cl,[e("span",null,"ğŸ”’ å·²é”å®š "+z(o(g).lockedFiles.length)+" ä¸ªæ–‡ä»¶",1),t(F,{content:"è¿™äº›æ–‡ä»¶åœ¨æäº¤æ—¶ä¼šè¢«è‡ªåŠ¨è·³è¿‡",placement:"top"},{default:a(()=>[t(ee,{class:"info-icon"},{default:a(()=>[t(o(fs))]),_:1})]),_:1})]),e("div",Sl,[(p(!0),h(we,null,ze(o(g).lockedFiles,b=>(p(),h("div",{key:b,class:"locked-file-item"},[e("div",Tl,[f[24]||(f[24]=e("div",{class:"file-status-indicator locked"},null,-1)),e("div",xl,[e("span",Vl,z(I(b)),1),e("span",Ll,z(X(b)),1)])]),e("div",zl,[t(F,{content:"è§£é”æ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(N,{type:"danger",size:"small",circle:"",onClick:ie=>o(g).unlockFile(b)},{default:a(()=>[t(ee,null,{default:a(()=>[t(o(Ot))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])]))]),_:1},8,["modelValue"])],64)}}}),Gt=(ue,u)=>{const _=ue.__vccOpts||ue;for(const[v,g]of u)_[v]=g;return _},Rl=Gt(Gl,[["__scopeId","data-v-15b61579"]]),Dl={class:"card-header"},Fl={class:"header-actions"},jl={key:0,class:"pushing-indicator"},Ol={class:"pushing-text"},Al={key:0,class:"push-success-indicator"},El={class:"card-content"},Ul={class:"layout-container"},Ml={key:0,class:"git-config-warning"},Pl={key:1,class:"commit-section"},Nl={class:"commit-options"},Hl={class:"options-row"},Il={class:"commit-mode-toggle"},Jl={class:"no-verify-toggle"},Wl={key:0,class:"commit-form"},ql={class:"description-container"},Yl={class:"preview-section"},Xl={class:"preview-content code-command"},Kl={class:"form-bottom-actions"},Zl={class:"actions-flex-container"},Ql={class:"left-actions"},eo={class:"button-grid"},to={key:0},so={key:0},ao={key:0},lo={class:"right-actions"},oo={class:"one-push-content"},no={key:1,class:"standard-commit-form"},io={class:"standard-commit-header"},ro={class:"type-scope-container"},co={class:"scope-wrapper"},uo={class:"description-container"},fo={class:"advanced-fields"},po={class:"preview-section"},vo={class:"preview-content code-command"},mo={class:"form-bottom-actions"},go={class:"actions-flex-container"},yo={class:"left-actions"},ho={class:"button-grid"},_o={key:0},wo={key:0},ko={key:0},$o={class:"right-actions"},bo={class:"one-push-content"},Co={class:"actions-section"},So={class:"action-groups"},To={class:"operations-wrapper"},xo={class:"action-group"},Vo={class:"group-buttons"},Lo={key:0},zo={key:0},Bo={key:0},Go={key:0},Ro={class:"action-group"},Do={class:"group-buttons"},Fo={class:"action-group reset-group"},jo={class:"group-buttons"},Oo={key:0},Ao={class:"action-group branch-group"},Eo={class:"group-buttons"},Uo={class:"action-group"},Mo={class:"group-buttons"},Po={class:"dialog-footer"},No={class:"template-container"},Ho={class:"template-form"},Io={class:"template-form-buttons"},Jo={class:"template-list"},Wo={class:"template-content"},qo={class:"template-actions"},Yo={class:"template-container"},Xo={class:"template-form"},Ko={class:"template-form-buttons"},Zo={class:"template-list"},Qo={class:"template-content"},en={class:"template-actions"},tn={class:"template-container message-template-container"},sn={class:"template-form"},an={class:"template-form-buttons"},ln={class:"templates-container"},on={class:"message-templates-list"},nn={class:"templates-scroll-area"},rn={class:"template-content"},cn={class:"template-actions"},un={class:"current-default-message"},dn={class:"default-message-content"},fn={class:"message-help-text"},pn={class:"merge-dialog-content"},vn={class:"merge-intro"},mn={class:"merge-options"},gn={class:"dialog-footer"},yn={class:"stash-list-content"},hn={key:0,class:"stash-list-actions"},_n={class:"stash-dialog-content"},wn={class:"dialog-footer"},kn=Vt({__name:"CommitForm",setup(ue){const u=ht(),_=ls(),v=d(""),g=d(!1),M=d(!1),R=d("è¾“å…¥æäº¤ä¿¡æ¯..."),E=d(""),H=d(!1),ce=d("feat"),O=d(""),Z=d(""),Q=d(""),se=d(""),ae=d(!1),de=d(""),oe=d(!1),S=d([]),B=d(!1),x=d(""),q=d(!1),D=d(""),W=d(-1),fe=d(!1),ne=d(""),T=d({noFf:!1,squash:!1,noCommit:!1,message:""}),C=d([]),I=d(!1),X=d(""),P=d(!1),ve=d(""),ke=d(-1),L=d(!1),f=d(""),A=d(!1),F=d(!1),N=[{value:"feat",label:"feat: æ–°åŠŸèƒ½"},{value:"fix",label:"fix: ä¿®å¤bug"},{value:"docs",label:"docs: æ–‡æ¡£ä¿®æ”¹"},{value:"style",label:"style: æ ·å¼ä¿®æ”¹"},{value:"refactor",label:"refactor: ä»£ç é‡æ„"},{value:"test",label:"test: æµ‹è¯•ä»£ç "},{value:"chore",label:"chore: æ„å»º/å·¥å…·ä¿®æ”¹"}],ee=d(!1),be=d(!1),ge=d(""),Be=d(!1),Ge=d(!0);function b(){ge.value="",Be.value=!1,Ge.value=!0,ee.value=!0}function ie(){try{const c=_.config;de.value=JSON.stringify(c,null,2),ae.value=!0}catch{i.error("åŠ è½½é…ç½®å¤±è´¥")}}async function Je(){try{oe.value=!0;let c;try{c=JSON.parse(de.value)}catch(_e){i.error(`JSON è§£æå¤±è´¥: ${_e.message||_e}`);return}const V=await(await fetch("/api/config/saveAll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:c})})).json();if(!V.success)throw new Error(V.error||"ä¿å­˜å¤±è´¥");await _.loadConfig(!0);try{await _.loadLockedFiles()}catch{}try{Array.isArray(_.descriptionTemplates)&&(S.value=[..._.descriptionTemplates])}catch{}try{Array.isArray(_.scopeTemplates)&&(C.value=[..._.scopeTemplates])}catch{}try{Array.isArray(_.messageTemplates)&&(ye.value=[..._.messageTemplates])}catch{}i.success("é…ç½®å·²ä¿å­˜"),ae.value=!1}catch(c){i.error(`ä¿å­˜é…ç½®å¤±è´¥: ${c.message||c}`)}finally{oe.value=!1}}function je(){u.getStashList(),be.value=!0}async function st(){try{await u.saveStash(ge.value,Be.value,Ge.value),ee.value=!1}catch(c){console.error("å‚¨è—å¤±è´¥:",c)}}async function Me(c,s=!1){try{await u.applyStash(c,s),s&&await u.getStashList()}catch(V){console.error("åº”ç”¨å‚¨è—å¤±è´¥:",V)}}async function Pe(c){Ue.confirm("ç¡®å®šè¦åˆ é™¤æ­¤å‚¨è—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","åˆ é™¤å‚¨è—",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{await u.dropStash(c),await u.getStashList()}).catch(()=>{})}async function We(){Ue.confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å‚¨è—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","æ¸…ç©ºæ‰€æœ‰å‚¨è—",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{await u.clearAllStashes(),await u.getStashList()}).catch(()=>{})}const ye=d([]),w=d(!1),r=d(""),J=d(-1);qe(H,c=>{localStorage.setItem("zen-gitsync-standard-commit",c.toString())}),qe(A,c=>{localStorage.setItem("zen-gitsync-skip-hooks",c.toString())});const G=Le(()=>{if(!H.value)return v.value||E.value;let c=`${ce.value||""}`;return O.value&&(c+=`(${O.value})`),c+=`: ${Z.value}`,Q.value&&(c+=`

${Q.value}`),se.value&&(c+=`

${se.value}`),c}),Ce=Le(()=>{let c=`git commit -m "${G.value}"`;return A.value&&(c+=" --no-verify"),c});function Ve(){const c=_.config;c&&(R.value=`è¾“å…¥æäº¤ä¿¡æ¯ (é»˜è®¤: ${c.defaultCommitMessage})`,E.value=c.defaultCommitMessage||"",c.descriptionTemplates&&Array.isArray(c.descriptionTemplates)&&(S.value=c.descriptionTemplates),c.scopeTemplates&&Array.isArray(c.scopeTemplates)&&(C.value=c.scopeTemplates),c.messageTemplates&&Array.isArray(c.messageTemplates)&&(ye.value=c.messageTemplates))}async function re(){if(!x.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(q.value)await me();else{if(S.value.includes(x.value)){i({message:"è¯¥æ¨¡æ¿å·²å­˜åœ¨",type:"warning"});return}await _.saveTemplate(x.value,"description")&&(S.value.includes(x.value)||S.value.push(x.value),S.value=[...S.value],x.value="")}}catch(c){i({message:`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${c.message}`,type:"error"})}}async function me(){if(!x.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(await _.updateTemplate(D.value,x.value,"description")){const s=S.value.indexOf(D.value);s!==-1&&(S.value[s]=x.value),S.value=[...S.value],q.value=!1,D.value="",W.value=-1,x.value=""}}catch(c){i({message:`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${c.message}`,type:"error"})}}function Re(c,s){q.value=!0,D.value=c,W.value=s,x.value=c}function Se(){q.value=!1,D.value="",W.value=-1,x.value=""}async function $e(){if(!X.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(P.value)await at();else{if(C.value.includes(X.value)){i({message:"è¯¥æ¨¡æ¿å·²å­˜åœ¨",type:"warning"});return}await _.saveTemplate(X.value,"scope")&&(C.value.includes(X.value)||C.value.push(X.value),C.value=[...C.value],X.value="")}}catch(c){i({message:`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${c.message}`,type:"error"})}}async function at(){if(!X.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(await _.updateTemplate(ve.value,X.value,"scope")){const s=C.value.indexOf(ve.value);s!==-1&&(C.value[s]=X.value),C.value=[...C.value],P.value=!1,ve.value="",ke.value=-1,X.value=""}}catch(c){i({message:`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${c.message}`,type:"error"})}}function Ye(c,s){P.value=!0,ve.value=c,ke.value=s,X.value=c}function K(){P.value=!1,ve.value="",ke.value=-1,X.value=""}async function lt(c){try{if(await Ue.confirm(`ç¡®å®šè¦åˆ é™¤æè¿°æ¨¡æ¿ "${c}" å—ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await _.deleteTemplate(c,"description")){const V=S.value.indexOf(c);V!==-1&&S.value.splice(V,1),S.value=[...S.value]}}catch(s){if(s==="cancel")return;i({message:`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${s.message}`,type:"error"})}}async function ot(c){try{if(await Ue.confirm(`ç¡®å®šè¦åˆ é™¤ä½œç”¨åŸŸæ¨¡æ¿ "${c}" å—ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await _.deleteTemplate(c,"scope")){const V=C.value.indexOf(c);V!==-1&&C.value.splice(V,1),C.value=[...C.value]}}catch(s){if(s==="cancel")return;i({message:`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${s.message}`,type:"error"})}}function Xe(c){Z.value=c,B.value=!1}function wt(c){O.value=c,I.value=!1}function nt(){B.value=!0}function Oe(){I.value=!0}async function it(){try{await u.addToStage()&&u.fetchStatus()}catch(c){i({message:`æ·»åŠ æ–‡ä»¶å¤±è´¥: ${c.message}`,type:"error"})}}async function n(){if(!G.value.trim()){i({message:"æäº¤ä¿¡æ¯ä¸èƒ½ä¸ºç©º",type:"warning"});return}try{await u.commitChanges(G.value,A.value)&&(Ae(),u.fetchStatus(),u.fetchLog(),u.getBranchStatus(!0))}catch(c){i({message:`æäº¤å¤±è´¥: ${c.message}`,type:"error"})}}function l(){g.value=!0,setTimeout(()=>{g.value=!1},2e3)}async function m(){try{await u.pushToRemote(),M.value=!0;try{await new Promise(c=>setTimeout(c,200)),l()}catch(c){console.error("æ¨é€åå¤„ç†å¤±è´¥:",c),l()}finally{M.value=!1}}catch(c){M.value=!1,i({message:`æ¨é€å¤±è´¥: ${c.message}`,type:"error"})}}async function k(){try{await u.gitPull(),await u.fetchStatus(),await u.fetchLog(!1)}catch(c){console.error("æ‹‰å–æ“ä½œå‘ç”Ÿé”™è¯¯:",c)}}async function te(){try{await u.gitFetchAll(),await u.fetchStatus(),await u.fetchLog(!1)}catch(c){console.error("è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯æ“ä½œå‘ç”Ÿé”™è¯¯:",c)}}async function le(){if(!G.value.trim()){i({message:"æäº¤ä¿¡æ¯ä¸èƒ½ä¸ºç©º",type:"warning"});return}try{await u.addAndCommit(G.value,A.value),Ae(),u.fetchStatus(),u.fetchLog()}catch(c){i({message:`æš‚å­˜å¹¶æäº¤å¤±è´¥: ${c.message}`,type:"error"})}}async function he(){if(!G.value.trim()){i({message:"æäº¤ä¿¡æ¯ä¸èƒ½ä¸ºç©º",type:"warning"});return}try{if(await u.addCommitAndPush(G.value,A.value)){Ae(),M.value=!0;try{await new Promise(s=>setTimeout(s,1e3)),console.log("ä¸€é”®æ¨é€å®Œæˆï¼ŒçŠ¶æ€å·²åœ¨pushToRemoteä¸­åˆ·æ–°"),l()}catch(s){console.error("ä¸€é”®æ¨é€åå¤„ç†å¤±è´¥:",s),l()}finally{M.value=!1}}}catch(c){i({message:`æš‚å­˜ã€æäº¤å¹¶æ¨é€å¤±è´¥: ${c.message}`,type:"error"})}}async function j(){try{await Ue.confirm(`ç¡®å®šè¦é‡ç½®å½“å‰åˆ†æ”¯ "${u.currentBranch}" åˆ°è¿œç¨‹çŠ¶æ€å—ï¼Ÿè¿™å°†ä¸¢å¤±æ‰€æœ‰æœªæ¨é€çš„æäº¤å’Œæœ¬åœ°æ›´æ”¹ã€‚`,"é‡ç½®åˆ°è¿œç¨‹åˆ†æ”¯",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await u.resetToRemote(u.currentBranch)&&(u.fetchStatus(),u.fetchLog())}catch(c){c!=="cancel"&&i({message:`é‡ç½®åˆ°è¿œç¨‹åˆ†æ”¯å¤±è´¥: ${c.message}`,type:"error"})}}function Ae(){v.value="",Z.value="",Q.value="",se.value=""}function Mt(){f.value=E.value,L.value=!0}async function zs(){if(!f.value.trim()){i({message:"è¯·è¾“å…¥é»˜è®¤æäº¤ä¿¡æ¯",type:"warning"});return}try{await _.saveDefaultMessage(f.value)&&(E.value=f.value,R.value=`è¾“å…¥æäº¤ä¿¡æ¯ (é»˜è®¤: ${f.value})`,L.value=!1)}catch(c){i({message:`ä¿å­˜é»˜è®¤æäº¤ä¿¡æ¯å¤±è´¥: ${c.message}`,type:"error"})}}function Rt(c){const s=c.replace(/\\/g,"/");return _.lockedFiles.some(V=>{const _e=V.replace(/\\/g,"/");return s===_e})}const kt=Le(()=>u.fileList.some(c=>["modified","deleted","untracked"].includes(c.type)&&!Rt(c.path))),rt=Le(()=>u.fileList.filter(c=>["modified","deleted","untracked"].includes(c.type)&&!Rt(c.path)).length),Ne=Le(()=>u.fileList.filter(c=>c.type==="added"&&!Rt(c.path)).length),vt=Le(()=>Ne.value>0),ct=Le(()=>u.fileList.some(c=>!Rt(c.path))),Ke=Le(()=>u.branchAhead>0),Pt=Le(()=>u.branchBehind>0),Ze=Le(()=>u.hasUpstream&&Ke.value&&!vt.value),os=Le(()=>vt.value),Bs=Le(()=>u.hasUpstream&&(Ke.value||Pt.value||ct.value));async function Gs(){if(!f.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(w.value)await Rs();else{if(ye.value.includes(f.value)){i({message:"è¯¥æ¨¡æ¿å·²å­˜åœ¨",type:"warning"});return}ye.value.push(f.value);const s=await(await fetch("/api/config/save-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:f.value,type:"message"})})).json();s.success?(i({message:"æäº¤ä¿¡æ¯æ¨¡æ¿ä¿å­˜æˆåŠŸ!",type:"success"}),f.value=""):i({message:"æ¨¡æ¿ä¿å­˜å¤±è´¥: "+s.error,type:"error"})}}catch(c){i({message:"æ¨¡æ¿ä¿å­˜å¤±è´¥: "+c.message,type:"error"})}}async function Rs(){try{if(J.value>=0){const c=r.value,s=f.value;ye.value[J.value]=s;const _e=await(await fetch("/api/config/update-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldTemplate:c,newTemplate:s,type:"message"})})).json();_e.success?(i({message:"æäº¤ä¿¡æ¯æ¨¡æ¿æ›´æ–°æˆåŠŸ!",type:"success"}),w.value=!1,r.value="",J.value=-1,f.value=""):i({message:"æ¨¡æ¿æ›´æ–°å¤±è´¥: "+_e.error,type:"error"})}}catch(c){i({message:"æ¨¡æ¿æ›´æ–°å¤±è´¥: "+c.message,type:"error"})}}function Ds(c,s){w.value=!0,r.value=c,J.value=s,f.value=c}function Fs(){w.value=!1,r.value="",J.value=-1,f.value=""}async function js(c){try{const s=ye.value.indexOf(c);s!==-1&&ye.value.splice(s,1);const _e=await(await fetch("/api/config/delete-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:c,type:"message"})})).json();_e.success?i({message:"æäº¤ä¿¡æ¯æ¨¡æ¿åˆ é™¤æˆåŠŸ!",type:"success"}):i({message:"æ¨¡æ¿åˆ é™¤å¤±è´¥: "+_e.error,type:"error"})}catch(s){i({message:"æ¨¡æ¿åˆ é™¤å¤±è´¥: "+s.message,type:"error"})}}function Os(c){v.value=c,f.value=c}_t(async()=>{const c=localStorage.getItem("zen-gitsync-standard-commit");c!==null&&(H.value=c==="true");const s=localStorage.getItem("zen-gitsync-skip-hooks");s!==null&&(A.value=s==="true"),qe(()=>_.config,Ve,{immediate:!0}),_.config||await _.loadConfig()});function As(){ne.value="",T.value={noFf:!1,squash:!1,noCommit:!1,message:""},mt.value="all",fe.value=!0,u.allBranches.length===0&&u.getAllBranches()}const mt=d("all"),Es=Le(()=>{const c=u.allBranches.filter(s=>s!==u.currentBranch);if(console.log("ç­›é€‰åˆ†æ”¯åˆ—è¡¨:",{allBranches:u.allBranches,currentBranch:u.currentBranch,branchTypeFilter:mt.value,filteredBranches:c}),mt.value==="local"){const s=c.filter(V=>!V.includes("origin/"));return console.log("æœ¬åœ°åˆ†æ”¯:",s),s}else if(mt.value==="remote"){const s=c.filter(V=>V.includes("origin/"));return console.log("è¿œç¨‹åˆ†æ”¯:",s),s}else return console.log("æ‰€æœ‰åˆ†æ”¯:",c),c});async function Us(){if(!ne.value){i({message:"è¯·é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯",type:"warning"});return}try{await u.mergeBranch(ne.value,T.value)&&(fe.value=!1,await u.fetchStatus(),await u.fetchLog(!1))}catch(c){console.error("åˆå¹¶åˆ†æ”¯æ“ä½œå‘ç”Ÿé”™è¯¯:",c)}}const Dt=d(!1);function Ms(){Dt.value=!Dt.value}function Ps(c,s){const _e=[...c?S.value.filter(Te=>Te.toLowerCase().includes(c.toLowerCase())).map(Te=>({value:Te})):S.value.map(Te=>({value:Te})),{value:"âš™ï¸ ç®¡ç†æ¨¡æ¿...",isSettings:!0}];s(_e)}function Ns(c,s){const _e=[...c?C.value.filter(Te=>Te.toLowerCase().includes(c.toLowerCase())).map(Te=>({value:Te})):C.value.map(Te=>({value:Te})),{value:"âš™ï¸ ç®¡ç†æ¨¡æ¿...",isSettings:!0}];s(_e)}function Hs(c){c.isSettings?(nt(),Z.value=""):Z.value=c.value}function Is(c){c.isSettings?(Oe(),O.value=""):O.value=c.value}function Js(c,s){const _e=[...c?ye.value.filter(Te=>Te.toLowerCase().includes(c.toLowerCase())).map(Te=>({value:Te})):ye.value.map(Te=>({value:Te})),{value:"âš™ï¸ ç®¡ç†æ¨¡æ¿...",isSettings:!0}];s(_e)}function Ws(c){c.isSettings?(Mt(),v.value=""):v.value=c.value}return(c,s)=>{const V=Fe,_e=Lt,Te=ts,ns=hs,Nt=aa,xe=Zt,is=Et,rs=Ut,Qe=ss,qs=oa,ut=Bt,Ft=as,Ht=na,jt=Ss,cs=zt,It=ra,Ys=ia,dt=xs,$t=ca,us=Ts,Jt=Tt,Xs=Vs,Ks=Qt;return p(),h("div",{class:pe(["card",{"is-pushing":o(u).isPushing}])},[e("div",Dl,[s[34]||(s[34]=e("h2",null,"æäº¤æ›´æ”¹",-1)),e("div",Fl,[t(V,{size:"small",type:"primary",icon:o(bt),onClick:ie},{default:a(()=>s[33]||(s[33]=[y("é…ç½®")])),_:1},8,["icon"]),t(V,{type:"primary",icon:o(sa),size:"small",circle:"",onClick:Ms,class:"git-tools-button"},null,8,["icon"])])]),t(ps,{name:"el-fade-in-linear"},{default:a(()=>[o(u).isPushing||M.value?(p(),h("div",jl,[s[35]||(s[35]=e("div",{class:"pushing-spinner"},[e("svg",{viewBox:"0 0 50 50",class:"circular"},[e("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})])],-1)),e("div",Ol,z(o(u).isPushing?"æ­£åœ¨æ¨é€...":"æ›´æ–°çŠ¶æ€ä¸­..."),1)])):U("",!0)]),_:1}),t(ps,{name:"el-fade-in-linear"},{default:a(()=>[g.value?(p(),h("div",Al,[t(_e,{class:"push-success-icon"},{default:a(()=>[t(o(_s))]),_:1}),s[36]||(s[36]=e("div",{class:"push-success-text"},"å·²å®Œæˆ!",-1))])):U("",!0)]),_:1}),e("div",El,[e("div",Ul,[o(u).userName===""||o(u).userEmail===""?(p(),h("div",Ml,[t(Te,{title:"Gitç”¨æˆ·ä¿¡æ¯æœªé…ç½®",type:"warning",closable:!1,"show-icon":""},{default:a(()=>s[37]||(s[37]=[e("p",null,"æ‚¨éœ€è¦é…ç½®Gitç”¨æˆ·åå’Œé‚®ç®±æ‰èƒ½æäº¤ä»£ç ã€‚è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é…ç½®ï¼š",-1),e("pre",{class:"config-command"},`git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"`,-1)])),_:1})])):(p(),h("div",Pl,[e("div",Nl,[e("div",Hl,[e("div",Il,[t(ns,{modelValue:H.value,"onUpdate:modelValue":s[0]||(s[0]=$=>H.value=$),"active-text":"æ ‡å‡†åŒ–æäº¤","inactive-text":"æ™®é€šæäº¤"},null,8,["modelValue"])]),e("div",Jl,[t(ns,{modelValue:A.value,"onUpdate:modelValue":s[1]||(s[1]=$=>A.value=$),"active-text":"è·³è¿‡ Git é’©å­æ£€æŸ¥ (--no-verify)"},null,8,["modelValue"])])])]),H.value?(p(),h("div",no,[e("div",io,[e("div",ro,[t(rs,{modelValue:ce.value,"onUpdate:modelValue":s[3]||(s[3]=$=>ce.value=$),placeholder:"æäº¤ç±»å‹",class:"type-select",clearable:""},{default:a(()=>[(p(),h(we,null,ze(N,$=>t(is,{key:$.value,label:$.label,value:$.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e("div",co,[t(Nt,{modelValue:O.value,"onUpdate:modelValue":s[4]||(s[4]=$=>O.value=$),"fetch-suggestions":Ns,placeholder:"ä½œç”¨åŸŸï¼ˆå¯é€‰ï¼‰",class:"scope-input",clearable:"",onSelect:Is},null,8,["modelValue"])])]),e("div",uo,[t(Nt,{modelValue:Z.value,"onUpdate:modelValue":s[5]||(s[5]=$=>Z.value=$),"fetch-suggestions":Ps,placeholder:"ç®€çŸ­æè¿°ï¼ˆå¿…å¡«ï¼‰",class:"description-input",clearable:"",onSelect:Hs},null,8,["modelValue"])])]),e("div",{class:"advanced-options-toggle",onClick:s[6]||(s[6]=$=>F.value=!F.value)},[e("span",null,z(F.value?"æ”¶èµ·":"æ­£æ–‡åŠé¡µè„š"),1),t(_e,{class:pe(["toggle-icon",{"is-active":F.value}])},{default:a(()=>[t(o(gt))]),_:1},8,["class"])]),Ee(e("div",fo,[t(Qe,{modelValue:Q.value,"onUpdate:modelValue":s[7]||(s[7]=$=>Q.value=$),type:"textarea",rows:4,placeholder:"æ­£æ–‡ï¼ˆå¯é€‰ï¼‰ï¼šè¯¦ç»†æè¿°æœ¬æ¬¡æäº¤çš„å†…å®¹å’ŒåŸå› ",class:"body-input",clearable:""},null,8,["modelValue"]),t(Qe,{modelValue:se.value,"onUpdate:modelValue":s[8]||(s[8]=$=>se.value=$),placeholder:"é¡µè„šï¼ˆå¯é€‰ï¼‰ï¼šå¦‚ Closes #123",class:"footer-input",clearable:""},null,8,["modelValue"])],512),[[pt,F.value]]),e("div",po,[s[43]||(s[43]=e("div",{class:"preview-title"},"Gitæäº¤å‘½ä»¤é¢„è§ˆï¼š",-1)),e("pre",vo,z(Ce.value),1)]),e("div",mo,[e("div",go,[e("div",yo,[e("div",ho,[t(V,{type:"primary",onClick:it,loading:o(u).isAddingFiles,disabled:!kt.value,class:"stage-button"},{default:a(()=>[s[44]||(s[44]=y(" æš‚å­˜æ›´æ”¹ ")),rt.value>0?(p(),h("span",_o,"("+z(rt.value)+")",1)):U("",!0)]),_:1},8,["loading","disabled"]),t(V,{type:"primary",onClick:n,loading:o(u).isLoadingStatus,disabled:!vt.value||!G.value.trim()},{default:a(()=>[s[45]||(s[45]=y(" æäº¤ ")),Ne.value>0?(p(),h("span",wo,"("+z(Ne.value)+")",1)):U("",!0)]),_:1},8,["loading","disabled"]),t(xe,{content:Ze.value?"æ¨é€å·²æäº¤çš„æ›´æ”¹åˆ°è¿œç¨‹ä»“åº“":o(u).hasUpstream?Ke.value?"æœ‰æœªæäº¤çš„æš‚å­˜æ›´æ”¹ï¼Œè¯·å…ˆæäº¤":"æ²¡æœ‰éœ€è¦æ¨é€çš„æäº¤":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯",placement:"top"},{default:a(()=>[t(V,{type:"primary",icon:o(Wt),onClick:m,loading:o(u).isPushing,disabled:!Ze.value,style:St(Ze.value?{backgroundColor:"#67c23a",borderColor:"#67c23a"}:{})},{default:a(()=>[s[46]||(s[46]=y(" æ¨é€ ")),Ke.value?(p(),h("span",ko,"("+z(o(u).branchAhead)+")",1)):U("",!0)]),_:1},8,["icon","loading","disabled","style"])]),_:1},8,["content"])])]),e("div",$o,[t(xe,{content:ct.value?G.value.trim()?o(u).hasUpstream?"ä¸€é”®å®Œæˆï¼šæš‚å­˜æ‰€æœ‰æ›´æ”¹ â†’ æäº¤ â†’ æ¨é€åˆ°è¿œç¨‹ä»“åº“":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯":"è¯·è¾“å…¥æäº¤ä¿¡æ¯":"æ²¡æœ‰éœ€è¦æäº¤çš„æ›´æ”¹",placement:"top"},{default:a(()=>[t(V,{type:"success",onClick:he,loading:o(u).isAddingFiles||o(u).isCommiting||o(u).isPushing,disabled:!ct.value||!G.value.trim()||!o(u).hasUpstream,class:"one-push-button"},{default:a(()=>[e("div",bo,[t(_e,{class:"one-push-icon"},{default:a(()=>[t(o(qt))]),_:1}),s[47]||(s[47]=e("div",{class:"one-push-text"},[e("span",{class:"one-push-title"},"ä¸€é”®æ¨é€æ‰€æœ‰"),e("span",{class:"one-push-desc"},"æš‚å­˜ + æäº¤ + æ¨é€")],-1))])]),_:1},8,["loading","disabled"])]),_:1},8,["content"])])])])])):(p(),h("div",Wl,[e("div",ql,[t(Nt,{modelValue:v.value,"onUpdate:modelValue":s[2]||(s[2]=$=>v.value=$),"fetch-suggestions":Js,placeholder:R.value,type:"textarea",rows:6,resize:"none",class:"commit-message-input",onSelect:Ws},null,8,["modelValue","placeholder"])]),e("div",Yl,[s[38]||(s[38]=e("div",{class:"preview-title"},"Gitæäº¤å‘½ä»¤é¢„è§ˆï¼š",-1)),e("pre",Xl,'git commit -m "'+z(G.value||"<æäº¤ä¿¡æ¯>")+'"'+z(A.value?" --no-verify":""),1)]),e("div",Kl,[e("div",Zl,[e("div",Ql,[e("div",eo,[t(V,{type:"primary",onClick:it,loading:o(u).isAddingFiles,disabled:!kt.value,class:"stage-button"},{default:a(()=>[s[39]||(s[39]=y(" æš‚å­˜æ›´æ”¹ ")),rt.value>0?(p(),h("span",to,"("+z(rt.value)+")",1)):U("",!0)]),_:1},8,["loading","disabled"]),t(V,{type:"primary",onClick:n,loading:o(u).isLoadingStatus,disabled:!vt.value||!G.value.trim()},{default:a(()=>[s[40]||(s[40]=y(" æäº¤ ")),Ne.value>0?(p(),h("span",so,"("+z(Ne.value)+")",1)):U("",!0)]),_:1},8,["loading","disabled"]),t(xe,{content:Ze.value?"æ¨é€å·²æäº¤çš„æ›´æ”¹åˆ°è¿œç¨‹ä»“åº“":o(u).hasUpstream?Ke.value?"æœ‰æœªæäº¤çš„æš‚å­˜æ›´æ”¹ï¼Œè¯·å…ˆæäº¤":"æ²¡æœ‰éœ€è¦æ¨é€çš„æäº¤":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯",placement:"top"},{default:a(()=>[t(V,{type:"primary",icon:o(Wt),onClick:m,loading:o(u).isPushing,disabled:!Ze.value,style:St(Ze.value?{backgroundColor:"#67c23a",borderColor:"#67c23a"}:{})},{default:a(()=>[s[41]||(s[41]=y(" æ¨é€ ")),Ke.value?(p(),h("span",ao,"("+z(o(u).branchAhead)+")",1)):U("",!0)]),_:1},8,["icon","loading","disabled","style"])]),_:1},8,["content"])])]),e("div",lo,[t(xe,{content:ct.value?G.value.trim()?o(u).hasUpstream?"ä¸€é”®å®Œæˆï¼šæš‚å­˜æ‰€æœ‰æ›´æ”¹ â†’ æäº¤ â†’ æ¨é€åˆ°è¿œç¨‹ä»“åº“":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯":"è¯·è¾“å…¥æäº¤ä¿¡æ¯":"æ²¡æœ‰éœ€è¦æäº¤çš„æ›´æ”¹",placement:"top"},{default:a(()=>[t(V,{type:"success",onClick:he,loading:o(u).isAddingFiles||o(u).isCommiting||o(u).isPushing,disabled:!ct.value||!G.value.trim()||!o(u).hasUpstream,class:"one-push-button"},{default:a(()=>[e("div",oo,[t(_e,{class:"one-push-icon"},{default:a(()=>[t(o(qt))]),_:1}),s[42]||(s[42]=e("div",{class:"one-push-text"},[e("span",{class:"one-push-title"},"ä¸€é”®æ¨é€æ‰€æœ‰"),e("span",{class:"one-push-desc"},"æš‚å­˜ + æäº¤ + æ¨é€")],-1))])]),_:1},8,["loading","disabled"])]),_:1},8,["content"])])])])]))]))]),t(qs,{modelValue:Dt.value,"onUpdate:modelValue":s[9]||(s[9]=$=>Dt.value=$),title:"Git æ“ä½œ",direction:"rtl",size:"340px","with-header":!0,"show-close":!0,"destroy-on-close":!1,class:"git-operations-drawer"},{default:a(()=>[e("div",Co,[e("div",So,[e("div",To,[e("div",xo,[s[53]||(s[53]=e("div",{class:"group-title"},"åŸºç¡€æ“ä½œ",-1)),e("div",Vo,[t(xe,{content:kt.value?`æš‚å­˜${rt.value}ä¸ªå¾…æ›´æ”¹æ–‡ä»¶`:"git add .",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"primary",onClick:it,loading:o(u).isAddingFiles,disabled:!kt.value,class:"action-button"},{default:a(()=>[s[48]||(s[48]=y(" æš‚å­˜æ›´æ”¹ ")),rt.value>0?(p(),h("span",Lo,"("+z(rt.value)+")",1)):U("",!0)]),_:1},8,["loading","disabled"])]),_:1},8,["content"]),t(xe,{content:vt.value?`æäº¤${Ne.value}ä¸ªå·²æš‚å­˜æ–‡ä»¶`:"git commit",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"primary",onClick:n,loading:o(u).isLoadingStatus,disabled:!vt.value||!G.value.trim(),class:"action-button"},{default:a(()=>[s[49]||(s[49]=y(" æäº¤ ")),Ne.value>0?(p(),h("span",zo,"("+z(Ne.value)+")",1)):U("",!0)]),_:1},8,["loading","disabled"])]),_:1},8,["content"]),t(xe,{content:Ke.value?`æ¨é€${o(u).branchAhead}ä¸ªæœ¬åœ°æäº¤`:"git push",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"primary",icon:o(Wt),onClick:m,loading:o(u).isPushing,disabled:!Ze.value,class:pe(["action-button","push-button",{"is-loading":o(u).isPushing}]),style:St(Ze.value?{backgroundColor:"#67c23a",borderColor:"#67c23a"}:{})},{default:a(()=>[s[50]||(s[50]=y(" æ¨é€ ")),Ke.value?(p(),h("span",Bo,"("+z(o(u).branchAhead)+")",1)):U("",!0)]),_:1},8,["icon","loading","disabled","class","style"])]),_:1},8,["content"]),t(xe,{content:Pt.value?`æ‹‰å–${o(u).branchBehind}ä¸ªè¿œç¨‹æäº¤`:"git pull",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"primary",icon:o(ws),onClick:k,loading:o(u).isGitPulling,disabled:!o(u).hasUpstream,class:"action-button",style:St(o(u).hasUpstream?{color:"white",backgroundColor:"#1e90ff",borderColor:"#1e90ff"}:{})},{default:a(()=>[s[51]||(s[51]=y(" æ‹‰å– ")),Pt.value?(p(),h("span",Go,"("+z(o(u).branchBehind)+")",1)):U("",!0)]),_:1},8,["icon","loading","disabled","style"])]),_:1},8,["content"]),t(xe,{content:"git fetch --all",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"info",icon:o(ks),onClick:te,loading:o(u).isGitFetching,class:"action-button",style:{color:"white","background-color":"#1e90ff","border-color":"#1e90ff"}},{default:a(()=>s[52]||(s[52]=[y(" è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯ ")])),_:1},8,["icon","loading"])]),_:1})])]),e("div",Ro,[s[56]||(s[56]=e("div",{class:"group-title"},"ç»„åˆæ“ä½œ",-1)),e("div",Do,[t(xe,{content:"git add + git commit",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"primary",icon:o(bt),onClick:le,loading:o(u).isAddingFiles||o(u).isCommiting,disabled:!kt.value||!G.value.trim(),class:"action-button"},{default:a(()=>s[54]||(s[54]=[y(" æš‚å­˜å¹¶æäº¤ ")])),_:1},8,["icon","loading","disabled"])]),_:1}),t(xe,{content:"git add + git commit + git push",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"success",icon:o(qt),onClick:he,loading:o(u).isAddingFiles||o(u).isCommiting||o(u).isPushing,disabled:!ct.value||!G.value.trim()||!o(u).hasUpstream,class:pe(["action-button","one-click-push",{"is-loading":o(u).isAddingFiles||o(u).isCommiting||o(u).isPushing}])},{default:a(()=>s[55]||(s[55]=[y(" ä¸€é”®æ¨é€æ‰€æœ‰ ")])),_:1},8,["icon","loading","disabled","class"])]),_:1})])])]),e("div",Fo,[s[59]||(s[59]=e("div",{class:"group-title"},"é‡ç½®æ“ä½œ",-1)),e("div",jo,[t(xe,{content:os.value?`æ’¤é”€${Ne.value}ä¸ªå·²æš‚å­˜æ–‡ä»¶`:"git reset HEAD",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"warning",icon:o(es),onClick:o(u).resetHead,loading:o(u).isResetting,disabled:!os.value,class:"action-button reset-button"},{default:a(()=>[s[57]||(s[57]=y(" é‡ç½®æš‚å­˜åŒº ")),Ne.value>0?(p(),h("span",Oo,"("+z(Ne.value)+")",1)):U("",!0)]),_:1},8,["icon","onClick","loading","disabled"])]),_:1},8,["content"]),t(xe,{content:"git reset --hard origin/branch",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"danger",icon:o(Cs),onClick:j,loading:o(u).isResetting,disabled:!Bs.value,class:"action-button danger-button"},{default:a(()=>s[58]||(s[58]=[y(" é‡ç½®åˆ°è¿œç¨‹ ")])),_:1},8,["icon","loading","disabled"])]),_:1})])]),e("div",Ao,[s[61]||(s[61]=e("div",{class:"group-title"},"åˆ†æ”¯æ“ä½œ",-1)),e("div",Eo,[t(xe,{content:"åˆå¹¶å…¶ä»–åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"primary",icon:o(la),onClick:As,loading:o(u).isGitMerging,class:"action-button merge-button"},{default:a(()=>s[60]||(s[60]=[y(" åˆå¹¶åˆ†æ”¯ ")])),_:1},8,["icon","loading"])]),_:1})])]),e("div",Uo,[s[64]||(s[64]=e("div",{class:"group-title"},"å‚¨è—æ“ä½œ",-1)),e("div",Mo,[t(xe,{content:"å°†å·¥ä½œåŒºæ›´æ”¹å‚¨è—èµ·æ¥",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"warning",onClick:b,loading:o(u).isSavingStash,disabled:!ct.value,class:"action-button"},{default:a(()=>s[62]||(s[62]=[y(" å‚¨è—æ›´æ”¹ ")])),_:1},8,["loading","disabled"])]),_:1}),t(xe,{content:"æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰å‚¨è—è®°å½•",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(V,{type:"info",onClick:je,class:"action-button"},{default:a(()=>s[63]||(s[63]=[y(" å‚¨è—åˆ—è¡¨ ")])),_:1})]),_:1})])])])])]),_:1},8,["modelValue"]),t(ut,{class:"config-editor-dialog",title:"ç¼–è¾‘é…ç½® JSON",modelValue:ae.value,"onUpdate:modelValue":s[12]||(s[12]=$=>ae.value=$),width:"60%"},{footer:a(()=>[e("span",Po,[t(V,{onClick:s[11]||(s[11]=$=>ae.value=!1)},{default:a(()=>s[65]||(s[65]=[y("å–æ¶ˆ")])),_:1}),t(V,{type:"primary",loading:oe.value,onClick:Je},{default:a(()=>s[66]||(s[66]=[y("ä¿å­˜")])),_:1},8,["loading"])])]),default:a(()=>[t(Qe,{modelValue:de.value,"onUpdate:modelValue":s[10]||(s[10]=$=>de.value=$),type:"textarea",rows:18,spellcheck:"false",autocomplete:"off",placeholder:"åœ¨æ­¤ç¼–è¾‘å½“å‰é¡¹ç›®é…ç½®çš„ JSON"},null,8,["modelValue"])]),_:1},8,["modelValue"]),t(ut,{title:"ç®€çŸ­æè¿°æ¨¡æ¿è®¾ç½®",modelValue:B.value,"onUpdate:modelValue":s[14]||(s[14]=$=>B.value=$),width:"80vw",top:"70px",style:{height:"calc(100vh - 140px)"},"close-on-click-modal":!1,class:"template-dialog"},{default:a(()=>[e("div",No,[e("div",Ho,[t(Qe,{modelValue:x.value,"onUpdate:modelValue":s[13]||(s[13]=$=>x.value=$),placeholder:q.value?"ç¼–è¾‘æ¨¡æ¿å†…å®¹":"è¾“å…¥æ–°æ¨¡æ¿å†…å®¹",class:"template-input",clearable:""},null,8,["modelValue","placeholder"]),e("div",Io,[q.value?(p(),Y(V,{key:0,onClick:Se},{default:a(()=>s[67]||(s[67]=[y("å–æ¶ˆ")])),_:1})):U("",!0),t(V,{type:"primary",onClick:re,disabled:!x.value.trim()},{default:a(()=>[y(z(q.value?"æ›´æ–°æ¨¡æ¿":"æ·»åŠ æ¨¡æ¿"),1)]),_:1},8,["disabled"])])]),e("div",Jo,[s[71]||(s[71]=e("h3",null,"å·²ä¿å­˜æ¨¡æ¿",-1)),S.value.length===0?(p(),Y(Ft,{key:0,description:"æš‚æ— ä¿å­˜çš„æ¨¡æ¿"})):U("",!0),(p(!0),h(we,null,ze(S.value,($,He)=>(p(),Y(jt,{key:He,class:"template-item"},{default:a(()=>[t(Ht,{justify:"space-between",align:"middle",style:{width:"100%"}},{default:a(()=>[e("div",Wo,z($),1),e("div",qo,[t(V,{type:"primary",size:"small",onClick:et=>Xe($)},{default:a(()=>s[68]||(s[68]=[y("ä½¿ç”¨")])),_:2},1032,["onClick"]),t(V,{type:"warning",size:"small",icon:o(bt),onClick:et=>Re($,He)},{default:a(()=>s[69]||(s[69]=[y("ç¼–è¾‘")])),_:2},1032,["icon","onClick"]),t(V,{type:"danger",size:"small",onClick:et=>lt($)},{default:a(()=>s[70]||(s[70]=[y("åˆ é™¤")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])])]),_:1},8,["modelValue"]),t(ut,{title:"ä½œç”¨åŸŸæ¨¡æ¿è®¾ç½®",modelValue:I.value,"onUpdate:modelValue":s[16]||(s[16]=$=>I.value=$),width:"80vw",top:"70px",style:{height:"calc(100vh - 140px)"},"close-on-click-modal":!1,class:"template-dialog"},{default:a(()=>[e("div",Yo,[e("div",Xo,[t(Qe,{modelValue:X.value,"onUpdate:modelValue":s[15]||(s[15]=$=>X.value=$),placeholder:P.value?"ç¼–è¾‘ä½œç”¨åŸŸæ¨¡æ¿å†…å®¹":"è¾“å…¥æ–°ä½œç”¨åŸŸæ¨¡æ¿",class:"template-input",clearable:""},null,8,["modelValue","placeholder"]),e("div",Ko,[P.value?(p(),Y(V,{key:0,onClick:K},{default:a(()=>s[72]||(s[72]=[y("å–æ¶ˆ")])),_:1})):U("",!0),t(V,{type:"primary",onClick:$e,disabled:!X.value.trim()},{default:a(()=>[y(z(P.value?"æ›´æ–°æ¨¡æ¿":"æ·»åŠ æ¨¡æ¿"),1)]),_:1},8,["disabled"])])]),e("div",Zo,[s[76]||(s[76]=e("h3",null,"å·²ä¿å­˜ä½œç”¨åŸŸ",-1)),C.value.length===0?(p(),Y(Ft,{key:0,description:"æš‚æ— ä¿å­˜çš„ä½œç”¨åŸŸ"})):U("",!0),(p(!0),h(we,null,ze(C.value,($,He)=>(p(),Y(jt,{key:He,class:"template-item"},{default:a(()=>[t(Ht,{justify:"space-between",align:"middle",style:{width:"100%"}},{default:a(()=>[e("div",Qo,z($),1),e("div",en,[t(V,{type:"primary",size:"small",onClick:et=>wt($)},{default:a(()=>s[73]||(s[73]=[y("ä½¿ç”¨")])),_:2},1032,["onClick"]),t(V,{type:"warning",size:"small",icon:o(bt),onClick:et=>Ye($,He)},{default:a(()=>s[74]||(s[74]=[y("ç¼–è¾‘")])),_:2},1032,["icon","onClick"]),t(V,{type:"danger",size:"small",onClick:et=>ot($)},{default:a(()=>s[75]||(s[75]=[y("åˆ é™¤")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])])]),_:1},8,["modelValue"]),t(ut,{title:"é»˜è®¤æäº¤ä¿¡æ¯è®¾ç½®",modelValue:L.value,"onUpdate:modelValue":s[18]||(s[18]=$=>L.value=$),width:"80vw",top:"70px",style:{height:"calc(100vh - 140px)"},"close-on-click-modal":!1,class:"message-template-dialog"},{default:a(()=>[e("div",tn,[e("div",sn,[t(Qe,{modelValue:f.value,"onUpdate:modelValue":s[17]||(s[17]=$=>f.value=$),placeholder:w.value?"ç¼–è¾‘æ¨¡æ¿å†…å®¹":"è¾“å…¥æ–°æ¨¡æ¿å†…å®¹",class:"template-input",clearable:""},null,8,["modelValue","placeholder"]),e("div",an,[w.value?(p(),Y(V,{key:0,onClick:Fs},{default:a(()=>s[77]||(s[77]=[y("å–æ¶ˆ")])),_:1})):U("",!0),t(V,{type:"primary",onClick:Gs,disabled:!f.value.trim()},{default:a(()=>[y(z(w.value?"æ›´æ–°æ¨¡æ¿":"æ·»åŠ æ¨¡æ¿"),1)]),_:1},8,["disabled"]),t(V,{type:"success",onClick:zs,disabled:!f.value.trim()},{default:a(()=>s[78]||(s[78]=[y(" è®¾ä¸ºé»˜è®¤æäº¤ä¿¡æ¯ ")])),_:1},8,["disabled"])])]),e("div",ln,[e("div",on,[s[82]||(s[82]=e("h3",null,"å·²ä¿å­˜æ¨¡æ¿",-1)),e("div",nn,[ye.value.length===0?(p(),Y(Ft,{key:0,description:"æš‚æ— ä¿å­˜çš„æ¨¡æ¿"})):U("",!0),(p(!0),h(we,null,ze(ye.value,($,He)=>(p(),Y(jt,{key:He,class:"template-item"},{default:a(()=>[t(Ht,{justify:"space-between",align:"middle",style:{width:"100%"}},{default:a(()=>[e("div",rn,z($),1),e("div",cn,[t(V,{type:"primary",size:"small",onClick:et=>Os($)},{default:a(()=>s[79]||(s[79]=[y("ä½¿ç”¨")])),_:2},1032,["onClick"]),t(V,{type:"warning",size:"small",icon:o(bt),onClick:et=>Ds($,He)},{default:a(()=>s[80]||(s[80]=[y("ç¼–è¾‘")])),_:2},1032,["icon","onClick"]),t(V,{type:"danger",size:"small",onClick:et=>js($)},{default:a(()=>s[81]||(s[81]=[y("åˆ é™¤")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])]),e("div",un,[s[90]||(s[90]=e("h3",null,"å½“å‰é»˜è®¤æäº¤ä¿¡æ¯",-1)),E.value?(p(),Y(jt,{key:0,class:"default-message-card"},{default:a(()=>[e("div",dn,z(E.value),1)]),_:1})):(p(),Y(Ft,{key:1,description:"å°šæœªè®¾ç½®é»˜è®¤æäº¤ä¿¡æ¯","image-size":100})),e("div",fn,[s[88]||(s[88]=e("h4",null,"å…³äºé»˜è®¤æäº¤ä¿¡æ¯",-1)),s[89]||(s[89]=e("p",null,"é»˜è®¤æäº¤ä¿¡æ¯å°†åœ¨æœªè¾“å…¥æäº¤ä¿¡æ¯æ—¶è‡ªåŠ¨ä½¿ç”¨ã€‚",-1)),e("p",null,[s[85]||(s[85]=y("ä½ å¯ä»¥é€šè¿‡ç‚¹å‡»å·¦ä¾§æ¨¡æ¿çš„")),t(cs,{size:"small",type:"primary"},{default:a(()=>s[83]||(s[83]=[y("ä½¿ç”¨")])),_:1}),s[86]||(s[86]=y("æŒ‰é’®å…ˆé€‰æ‹©å–œæ¬¢çš„æ¨¡æ¿ï¼Œç„¶åç‚¹å‡»ä¸Šæ–¹")),t(cs,{size:"small",type:"success"},{default:a(()=>s[84]||(s[84]=[y("è®¾ä¸ºé»˜è®¤æäº¤ä¿¡æ¯")])),_:1}),s[87]||(s[87]=y("æŒ‰é’®ä¿å­˜ã€‚"))])])])])])]),_:1},8,["modelValue"]),t(ut,{title:"åˆå¹¶åˆ†æ”¯",modelValue:fe.value,"onUpdate:modelValue":s[26]||(s[26]=$=>fe.value=$),width:"500px","close-on-click-modal":!1,class:"merge-dialog"},{footer:a(()=>[e("div",gn,[t(V,{onClick:s[25]||(s[25]=$=>fe.value=!1)},{default:a(()=>s[97]||(s[97]=[y("å–æ¶ˆ")])),_:1}),t(V,{type:"primary",onClick:Us,loading:o(u).isGitMerging,disabled:!ne.value,class:"merge-confirm-btn"},{default:a(()=>s[98]||(s[98]=[y(" åˆå¹¶ ")])),_:1},8,["loading","disabled"])])]),default:a(()=>[e("div",pn,[e("p",vn,"é€‰æ‹©è¦åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ ("+z(o(u).currentBranch)+") çš„åˆ†æ”¯:",1),t(us,{"label-position":"top"},{default:a(()=>[t(dt,{label:"åˆ†æ”¯ç±»å‹"},{default:a(()=>[t(Ys,{modelValue:mt.value,"onUpdate:modelValue":s[19]||(s[19]=$=>mt.value=$),size:"small"},{default:a(()=>[t(It,{label:"all"},{default:a(()=>s[91]||(s[91]=[y("æ‰€æœ‰åˆ†æ”¯")])),_:1}),t(It,{label:"local"},{default:a(()=>s[92]||(s[92]=[y("æœ¬åœ°åˆ†æ”¯")])),_:1}),t(It,{label:"remote"},{default:a(()=>s[93]||(s[93]=[y("è¿œç¨‹åˆ†æ”¯")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(dt,{label:"é€‰æ‹©åˆ†æ”¯"},{default:a(()=>[t(rs,{modelValue:ne.value,"onUpdate:modelValue":s[20]||(s[20]=$=>ne.value=$),placeholder:"é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯",style:{width:"100%"},filterable:""},{default:a(()=>[(p(!0),h(we,null,ze(Es.value,$=>(p(),Y(is,{key:$,label:$,value:$},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(dt,{label:"åˆå¹¶é€‰é¡¹"},{default:a(()=>[e("div",mn,[t($t,{modelValue:T.value.noFf,"onUpdate:modelValue":s[21]||(s[21]=$=>T.value.noFf=$)},{default:a(()=>[t(xe,{content:"åˆ›å»ºåˆå¹¶æäº¤ï¼Œå³ä½¿å¯ä»¥ä½¿ç”¨å¿«è¿›åˆå¹¶",placement:"top"},{default:a(()=>s[94]||(s[94]=[e("span",null,"ç¦ç”¨å¿«è¿›åˆå¹¶ (--no-ff)",-1)])),_:1})]),_:1},8,["modelValue"]),t($t,{modelValue:T.value.squash,"onUpdate:modelValue":s[22]||(s[22]=$=>T.value.squash=$)},{default:a(()=>[t(xe,{content:"å°†å¤šä¸ªæäº¤å‹ç¼©ä¸ºä¸€ä¸ªæäº¤",placement:"top"},{default:a(()=>s[95]||(s[95]=[e("span",null,"å‹ç¼©æäº¤ (--squash)",-1)])),_:1})]),_:1},8,["modelValue"]),t($t,{modelValue:T.value.noCommit,"onUpdate:modelValue":s[23]||(s[23]=$=>T.value.noCommit=$)},{default:a(()=>[t(xe,{content:"æ‰§è¡Œåˆå¹¶ä½†ä¸è‡ªåŠ¨åˆ›å»ºæäº¤",placement:"top"},{default:a(()=>s[96]||(s[96]=[e("span",null,"ä¸è‡ªåŠ¨æäº¤ (--no-commit)",-1)])),_:1})]),_:1},8,["modelValue"])])]),_:1}),T.value.noFf&&!T.value.noCommit?(p(),Y(dt,{key:0,label:"åˆå¹¶æäº¤ä¿¡æ¯ (å¯é€‰)"},{default:a(()=>[t(Qe,{modelValue:T.value.message,"onUpdate:modelValue":s[24]||(s[24]=$=>T.value.message=$),type:"textarea",rows:3,placeholder:"è¾“å…¥è‡ªå®šä¹‰åˆå¹¶æäº¤ä¿¡æ¯"},null,8,["modelValue"])]),_:1})):U("",!0)]),_:1})])]),_:1},8,["modelValue"]),t(ut,{title:"å‚¨è—åˆ—è¡¨ (Git Stash)",modelValue:be.value,"onUpdate:modelValue":s[27]||(s[27]=$=>be.value=$),width:"600px","close-on-click-modal":!1},{default:a(()=>[e("div",yn,[Ee((p(),Y(Xs,{data:o(u).stashes,stripe:"",style:{width:"100%"},"empty-text":"æš‚æ— å‚¨è—è®°å½•"},{default:a(()=>[t(Jt,{prop:"id",label:"ID",width:"100"}),t(Jt,{prop:"description",label:"æè¿°"}),t(Jt,{label:"æ“ä½œ",width:"220"},{default:a($=>[t(V,{size:"small",onClick:He=>Me($.row.id,!1),loading:o(u).isApplyingStash},{default:a(()=>s[99]||(s[99]=[y(" åº”ç”¨ ")])),_:2},1032,["onClick","loading"]),t(V,{size:"small",type:"primary",onClick:He=>Me($.row.id,!0),loading:o(u).isApplyingStash},{default:a(()=>s[100]||(s[100]=[y(" åº”ç”¨å¹¶åˆ é™¤ ")])),_:2},1032,["onClick","loading"]),t(V,{size:"small",type:"danger",onClick:He=>Pe($.row.id),loading:o(u).isDroppingStash},{default:a(()=>s[101]||(s[101]=[y(" åˆ é™¤ ")])),_:2},1032,["onClick","loading"])]),_:1})]),_:1},8,["data"])),[[Ks,o(u).isLoadingStashes]]),o(u).stashes.length>0?(p(),h("div",hn,[t(V,{type:"danger",onClick:We,loading:o(u).isDroppingStash},{default:a(()=>s[102]||(s[102]=[y(" æ¸…ç©ºæ‰€æœ‰å‚¨è— ")])),_:1},8,["loading"])])):U("",!0)])]),_:1},8,["modelValue"]),t(ut,{title:"å‚¨è—æ›´æ”¹ (Git Stash)",modelValue:ee.value,"onUpdate:modelValue":s[32]||(s[32]=$=>ee.value=$),width:"500px","close-on-click-modal":!1},{footer:a(()=>[e("div",wn,[t(V,{onClick:s[31]||(s[31]=$=>ee.value=!1)},{default:a(()=>s[106]||(s[106]=[y("å–æ¶ˆ")])),_:1}),t(V,{type:"primary",onClick:st,loading:o(u).isSavingStash},{default:a(()=>s[107]||(s[107]=[y(" å‚¨è— ")])),_:1},8,["loading"])])]),default:a(()=>[e("div",_n,[s[105]||(s[105]=e("p",null,"å°†å½“å‰å·¥ä½œåŒºçš„æ›´æ”¹å‚¨è—èµ·æ¥ï¼Œç¨åå¯ä»¥å†æ¬¡åº”ç”¨ã€‚",-1)),t(us,{"label-position":"top"},{default:a(()=>[t(dt,{label:"å‚¨è—è¯´æ˜ (å¯é€‰)"},{default:a(()=>[t(Qe,{modelValue:ge.value,"onUpdate:modelValue":s[28]||(s[28]=$=>ge.value=$),placeholder:"è¾“å…¥å‚¨è—è¯´æ˜ï¼ˆå¯é€‰ï¼‰",clearable:""},null,8,["modelValue"])]),_:1}),t(dt,null,{default:a(()=>[t($t,{modelValue:Be.value,"onUpdate:modelValue":s[29]||(s[29]=$=>Be.value=$)},{default:a(()=>s[103]||(s[103]=[y(" åŒ…å«æœªè·Ÿè¸ªæ–‡ä»¶ (--include-untracked) ")])),_:1},8,["modelValue"])]),_:1}),t(dt,null,{default:a(()=>[t($t,{modelValue:Ge.value,"onUpdate:modelValue":s[30]||(s[30]=$=>Ge.value=$)},{default:a(()=>s[104]||(s[104]=[y(" æ’é™¤é”å®šæ–‡ä»¶ ")])),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])],2)}}}),$n=Gt(kn,[["__scopeId","data-v-361c9b7e"]]),bn={class:"log-header"},Cn={class:"log-actions"},Sn={key:0,class:"filter-panel-header"},Tn={class:"filter-form"},xn={class:"filter-item"},Vn={class:"filter-item"},Ln={class:"filter-item"},zn={class:"filter-item"},Bn={class:"filter-actions"},Gn={key:0},Rn={key:1,class:"content-area-content"},Dn={key:0,class:"graph-view"},Fn={key:0,class:"commit-count"},jn={class:"graph-controls"},On={class:"zoom-controls"},An={class:"scale-info"},En={key:1,class:"table-view-container"},Un=["onClick"],Mn={class:"commit-message-cell"},Pn={class:"message-content"},Nn={key:0,class:"branch-container"},Hn={class:"message-text"},In={class:"author-name"};const Jn={class:"commit-detail-container"},Wn={key:0,class:"commit-info"},qn={class:"commit-info-header"},Yn={class:"info-item"},Xn={class:"item-value"},Kn={class:"info-item"},Zn={class:"item-value"},Qn={class:"info-item"},ei={class:"item-value"},ti={class:"commit-message-container"},si=["innerHTML"],ai={class:"commit-files-diff"},li={class:"files-list"},oi={key:1},ni=["onClick"],ii={class:"file-diff"},ri={key:0},ci={key:1},ui=["innerHTML"],Ct=.5,At=1.5,Xt=.1,di=Vt({__name:"LogList",setup(ue,{expose:u}){const _=ht();let v=[];const g=d(v),M=d(""),R=d(!1),E=Le(()=>_.isLoadingLog||R.value),H=d(!1),ce=d(0),O=d(!1),Z=d(null),Q=d(1),se=d(!0),ae=d(!1),de=d(null),oe=d(!1),S=d(null),B=d([]),x=d(""),q=d(!1),D=d(""),W=d(1),fe=d(!1),ne=d(!1),T=d([]),C=d(""),I=d(null),X=d([]),P=d([]),ve=d([]),ke=d(!1),L=d(0),f=d(0),A=d(null),F=Le(()=>g.value);async function N(n=!1,l=1){if(!ht().isGitRepo){M.value="å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“";return}try{l>1?ae.value=!0:R.value=!0;const k=new URLSearchParams;k.append("page",l.toString()),k.append("all",n.toString()),k.append("with_parents","true"),T.value.length>0&&k.append("author",T.value.join(",")),P.value.length>0&&k.append("branch",P.value.join(",")),C.value&&k.append("message",C.value),I.value&&Array.isArray(I.value)&&I.value.length===2&&(k.append("dateFrom",I.value[0]),k.append("dateTo",I.value[1])),k.append("_t",Date.now().toString());const le=await(await fetch(`/api/log?${k.toString()}`)).json();if(!le||!le.data||!Array.isArray(le.data)){M.value="åŠ è½½æäº¤å†å²å¤±è´¥: æœåŠ¡å™¨è¿”å›æ•°æ®æ ¼å¼ä¸æ­£ç¡®";return}const he=l>1;he?le.data.forEach(j=>v.push(j)):(v.length=0,le.data.forEach(j=>v.push(j))),g.value=[...v],Q.value=l,ce.value=le.total||v.length,se.value=le.hasMore===!0,he||(fe.value=!0,setTimeout(()=>{fe.value=!1},2e3)),!he&&O.value?setTimeout(ee,0):!he&&!O.value&&!n&&ft(()=>{je(),setTimeout(nt,200)}),M.value=""}catch(k){M.value="åŠ è½½æäº¤å†å²å¤±è´¥: "+(k instanceof Error?k.message:String(k)),l>1&&(se.value=!1)}finally{l>1?ae.value=!1:R.value=!1}}async function ee(){if(Z.value&&v.length!==0)try{Z.value.innerHTML="";const n=ka(Z.value,{orientation:"vertical-reverse",template:"metro",author:"æäº¤è€… <committer@example.com>"}),l={},m=n.branch(_.currentBranch||"main");l[_.currentBranch||"main"]=m,v.forEach(k=>{let te=m;if(k.branch){const le=Be(k.branch.split(",")[0]);l[le]||(l[le]=n.branch(le)),te=l[le]}te.commit({hash:k.hash,subject:k.message,author:`${k.author} <${k.email}>`})}),setTimeout(()=>{r()},100)}catch(n){M.value="æ¸²æŸ“å›¾è¡¨å¤±è´¥: "+(n instanceof Error?n.message:String(n))}}function be(){O.value=!O.value,O.value&&v.length>0&&setTimeout(ee,0)}function ge(){H.value=!H.value,H.value||(se.value=!0),Q.value=1,N(H.value),ft(()=>{setTimeout(()=>{!O.value&&!H.value&&(je(),nt())},300)})}function Be(n){return n.includes("HEAD -> ")?n.replace("HEAD -> ",""):n.includes("origin/")?n:n.trim()}function Ge(n){return n.includes("HEAD")?"success":n.includes("origin/")?"warning":"info"}const b=d(null),ie=d(null);function Je(n){if(O.value||!se.value||ae.value||E.value)return;const l=n.target,{scrollTop:m,scrollHeight:k,clientHeight:te}=l;k-m-te<=20&&Re()}function je(){if(!b.value)return;const n=b.value.$el.querySelector(".el-table__body-wrapper");n&&(ie.value=n,ie.value&&(ie.value.removeEventListener("scroll",Je,!0),ie.value.addEventListener("scroll",Je,!0)))}function st(){ie.value&&(ie.value.removeEventListener("scroll",Je,!0),ie.value=null)}function Me(n){n.key==="Escape"&&Oe.value&&(Oe.value=!1)}_t(()=>{_.isGitRepo?(_.log.length>0?(v.length=0,_.log.forEach(n=>v.push(n)),ce.value=_.log.length,O.value&&setTimeout(()=>{ee()},100)):N(),at()):M.value="å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",ft(()=>{setTimeout(()=>{je()},500)}),qe(()=>b.value,n=>{n&&!O.value&&!H.value&&ft(()=>{je()})}),window.addEventListener("keydown",Me)}),qe(()=>_.allBranches,n=>{n&&n.length>0?ve.value=[...n].sort():ve.value=[]},{immediate:!0}),ua(()=>{st(),de.value!==null&&(window.clearInterval(de.value),de.value=null),window.removeEventListener("keydown",Me)});async function Pe(){await _.fetchLog(!0),v.length=0,_.log.forEach(n=>v.push(n)),g.value=[...v],ce.value=_.log.length,Q.value=1,se.value=!1,fe.value=!0,setTimeout(()=>{fe.value=!1},2e3),O.value&&(await ft(),ee())}qe(()=>_.log,n=>{try{v.length=0,Array.isArray(n)&&n.forEach(l=>l&&v.push(l)),ce.value=v.length,Q.value=1,g.value=[...v],fe.value=!0,setTimeout(()=>{fe.value=!1},2e3),O.value&&v.length>0&&setTimeout(ee,0)}catch{}},{immediate:!0}),u({refreshLog:Pe});function We(){W.value<At&&(W.value=Math.min(At,W.value+Xt),w())}function ye(){W.value>Ct&&(W.value=Math.max(Ct,W.value-Xt),w())}function w(){if(!Z.value)return;const n=Z.value.querySelector("svg");n&&(n.style.transform=`scale(${W.value})`,n.style.transformOrigin="top left")}function r(){if(!Z.value)return;const n=Z.value.querySelector("svg");if(!n)return;const l=n.getBoundingClientRect().width/W.value,m=Z.value.clientWidth;l>m?W.value=Math.max(Ct,m/l):W.value=1,w()}async function J(n){if(n){S.value=n,oe.value=!0,q.value=!0,B.value=[],x.value="",D.value="";try{if(!n.hash||n.hash.length<7){x.value="æ— æ•ˆçš„æäº¤å“ˆå¸Œå€¼",q.value=!1;return}const m=await(await fetch(`/api/commit-files?hash=${n.hash}`)).json();m.success&&Array.isArray(m.files)?(B.value=m.files,B.value.length>0?await G(n.hash,B.value[0]):x.value="è¯¥æäº¤æ²¡æœ‰å˜æ›´æ–‡ä»¶"):x.value=`è·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${m.error||"æœªçŸ¥é”™è¯¯"}`}catch(l){x.value=`è·å–æäº¤è¯¦æƒ…å¤±è´¥: ${l.message}`}finally{q.value=!1}}}async function G(n,l){q.value=!0,D.value=l;try{const k=await(await fetch(`/api/commit-file-diff?hash=${n}&file=${encodeURIComponent(l)}`)).json();k.success?x.value=k.diff||"æ²¡æœ‰å˜æ›´å†…å®¹":x.value=`è·å–å·®å¼‚å¤±è´¥: ${k.error||"æœªçŸ¥é”™è¯¯"}`}catch(m){x.value=`è·å–å·®å¼‚å¤±è´¥: ${m.message}`}finally{q.value=!1}}function Ce(n){if(!n)return"";const l=n.split(`
`);function m(k){return k.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}return l.map(k=>{const te=m(k);return k.startsWith("diff --git")?`<div class="diff-header">${te}</div>`:k.startsWith("---")?`<div class="diff-old-file">${te}</div>`:k.startsWith("+++")?`<div class="diff-new-file">${te}</div>`:k.startsWith("@@")?`<div class="diff-hunk-header">${te}</div>`:k.startsWith("+")?`<div class="diff-added">${te}</div>`:k.startsWith("-")?`<div class="diff-removed">${te}</div>`:`<div class="diff-context">${te}</div>`}).join("")}function Ve(n){return n?n.trim():"(æ— æäº¤ä¿¡æ¯)"}function re(n){if(!n)return"";const l=/^(feat|fix|docs|style|refactor|perf|test|chore|build|ci|revert)(\([^)]+\))?\s*:\s*(.+)$/s,m=n.match(l);return m?m[3].trim():n.trim()}async function me(n){try{const l=re(n);await navigator.clipboard.writeText(l),i.success("æäº¤ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{i.error("å¤åˆ¶å¤±è´¥")}}function Re(){!se.value||ae.value||E.value||N(H.value,Q.value+1)}function Se(){T.value=[],P.value=[],C.value="",I.value=null,Q.value=1,N(H.value,1)}function $e(){Q.value=1,N(H.value,1)}async function at(){try{const l=await(await fetch("/api/authors")).json();l.success&&Array.isArray(l.authors)?X.value=l.authors.sort():Ye()}catch{Ye()}}function Ye(){const n=new Set;g.value.forEach(l=>{l.author&&n.add(l.author)}),X.value=Array.from(n).sort()}qe(()=>g.value,()=>{},{deep:!0});function K(n,l,m){m.preventDefault(),L.value=m.clientY,f.value=m.clientX,A.value=n,ke.value=!0;const k=()=>{ke.value=!1,document.removeEventListener("click",k)};setTimeout(()=>{document.addEventListener("click",k)},0)}async function lt(n){if(n)try{await Ue.confirm(`ç¡®å®šè¦æ’¤é”€æäº¤ ${n.hash.substring(0,7)} å—ï¼Ÿè¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤æ¥æ’¤é”€è¿™æ¬¡æäº¤çš„æ›´æ”¹ã€‚`,"æ’¤é”€æäº¤ç¡®è®¤",{confirmButtonText:"ç¡®è®¤",cancelButtonText:"å–æ¶ˆ",type:"warning"});const m=await(await fetch("/api/revert-commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:n.hash})})).json();m.success?(i.success(m.message||"å·²æˆåŠŸæ’¤é”€æäº¤"),Pe(),_.fetchStatus(),_.getBranchStatus()):i.error(m.error||"æ’¤é”€æäº¤å¤±è´¥")}catch(l){l!=="cancel"&&i.error("æ’¤é”€æäº¤å¤±è´¥: "+(l.message||l))}}async function ot(n){if(n)try{await Ue.confirm(`ç¡®å®šè¦å°†æäº¤ ${n.hash.substring(0,7)} Cherry-Pick åˆ°å½“å‰åˆ†æ”¯å—ï¼Ÿ`,"Cherry-Pickç¡®è®¤",{confirmButtonText:"ç¡®è®¤",cancelButtonText:"å–æ¶ˆ",type:"warning"});const m=await(await fetch("/api/cherry-pick-commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:n.hash})})).json();m.success?(i.success(m.message||"å·²æˆåŠŸCherry-Pickæäº¤"),Pe(),_.fetchStatus(),_.getBranchStatus()):i.error(m.error||"Cherry-Pickæäº¤å¤±è´¥")}catch(l){l!=="cancel"&&i.error("Cherry-Pickæäº¤å¤±è´¥: "+(l.message||l))}}async function Xe(n){if(n)try{await navigator.clipboard.writeText(n.hash),i.success(`å·²å¤åˆ¶æäº¤å“ˆå¸Œ: ${n.hash.substring(0,7)}`)}catch(l){i.error(`å¤åˆ¶æäº¤å“ˆå¸Œå¤±è´¥: ${l.message}`)}}async function wt(n){if(n)try{await Ue.confirm(`ç¡®å®šè¦å°†å½“å‰åˆ†æ”¯é‡ç½®(hard)åˆ°æäº¤ ${n.hash.substring(0,7)} å—ï¼Ÿ
      
      è­¦å‘Šï¼šè¿™å°†ä¸¢å¤±è¯¥æäº¤ä¹‹åçš„æ‰€æœ‰æ›´æ”¹ï¼`,"é‡ç½®ç¡®è®¤",{confirmButtonText:"ç¡®è®¤é‡ç½®",cancelButtonText:"å–æ¶ˆ",type:"warning",dangerouslyUseHTMLString:!0});const m=await(await fetch("/api/reset-to-commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:n.hash})})).json();m.success?(i.success(m.message||"å·²æˆåŠŸé‡ç½®åˆ°æŒ‡å®šæäº¤"),Pe(),_.fetchStatus(),_.getBranchStatus()):i.error(m.error||"é‡ç½®åˆ°æŒ‡å®šæäº¤å¤±è´¥")}catch(l){l!=="cancel"&&i.error("é‡ç½®åˆ°æŒ‡å®šæäº¤å¤±è´¥: "+(l.message||l))}}function nt(){if(O.value||!se.value||ae.value||E.value||H.value)return;if(!ie.value){je();return}const{scrollTop:n,scrollHeight:l,clientHeight:m}=ie.value;l-n-m<=50&&Re()}qe(()=>O.value,n=>{!n&&!H.value&&ft(()=>{je(),setTimeout(nt,200)})});const Oe=d(!1);function it(){Oe.value=!Oe.value,ft(()=>{O.value&&Z.value&&ee()})}return(n,l)=>{var he;const m=Lt,k=Zt,te=as,le=Qt;return p(),h(we,null,[e("div",{class:pe(["card",{"fullscreen-mode":Oe.value}])},[e("div",bn,[l[13]||(l[13]=e("div",{class:"header-left"},[e("h2",null,"æäº¤å†å²")],-1)),e("div",Cn,[O.value?U("",!0):(p(),Y(o(Fe),{key:0,type:ne.value?"primary":"default",size:"small",onClick:l[0]||(l[0]=j=>ne.value=!ne.value),class:pe(["action-button filter-button icon-only-button",{"active-filter":ne.value}])},{icon:a(()=>[t(m,null,{default:a(()=>[t(o(da))]),_:1})]),_:1},8,["type","class"])),t(o(Fe),{type:"primary",size:"small",onClick:be,class:pe(["action-button view-mode-button icon-only-button",{"active-view":O.value}])},{icon:a(()=>[t(m,null,{default:a(()=>[(p(),Y(yt(O.value?o(bs):o(fa))))]),_:1})]),_:1},8,["class"]),Ee(t(o(Fe),{type:"success",size:"small",onClick:ge,loading:E.value,class:pe(["action-button commit-display-button",{"active-commits":H.value}])},{icon:a(()=>[t(m,null,{default:a(()=>[(p(),Y(yt(H.value?o(pa):o(va))))]),_:1})]),default:a(()=>[y(" "+z(H.value?"æ˜¾ç¤ºåˆ†é¡µåŠ è½½":"æ˜¾ç¤ºæ‰€æœ‰æäº¤"),1)]),_:1},8,["loading","class"]),[[pt,!1]]),t(o(Fe),{type:"info",size:"small",onClick:it,class:pe(["action-button fullscreen-button icon-only-button",{"active-fullscreen":Oe.value}])},{icon:a(()=>[t(m,null,{default:a(()=>[(p(),Y(yt(Oe.value?o(Kt):o(ma))))]),_:1})]),_:1},8,["class"]),t(o(Fe),{circle:"",size:"small",onClick:l[1]||(l[1]=j=>Pe()),class:pe([{"refresh-button-animated":fe.value},"action-button refresh-button"])},{default:a(()=>[E.value?(p(),Y(m,{key:1},{default:a(()=>[t(o(ga))]),_:1})):(p(),Y(m,{key:0},{default:a(()=>[t(o(es))]),_:1}))]),_:1},8,["class"])])]),ne.value&&!O.value?(p(),h("div",Sn,[e("div",Tn,[e("div",xn,[t(o(Ut),{modelValue:T.value,"onUpdate:modelValue":l[2]||(l[2]=j=>T.value=j),placeholder:"é€‰æ‹©ä½œè€…",multiple:"",clearable:"",filterable:"",class:"filter-input",size:"small"},{prefix:a(()=>l[14]||(l[14]=[e("span",{class:"compact-label"},"ä½œè€…",-1)])),default:a(()=>[(p(!0),h(we,null,ze(X.value,j=>(p(),Y(o(Et),{key:j,label:j,value:j},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",Vn,[t(o(Ut),{modelValue:P.value,"onUpdate:modelValue":l[3]||(l[3]=j=>P.value=j),placeholder:"é€‰æ‹©åˆ†æ”¯",multiple:"",clearable:"",filterable:"",class:"filter-input",size:"small"},{prefix:a(()=>l[15]||(l[15]=[e("span",{class:"compact-label"},"åˆ†æ”¯",-1)])),default:a(()=>[(p(!0),h(we,null,ze(ve.value,j=>(p(),Y(o(Et),{key:j,label:j,value:j},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",Ln,[t(o(ss),{modelValue:C.value,"onUpdate:modelValue":l[4]||(l[4]=j=>C.value=j),placeholder:"æäº¤ä¿¡æ¯å…³é”®è¯",clearable:"",class:"filter-input",size:"small"},{prefix:a(()=>l[16]||(l[16]=[e("span",{class:"compact-label"},"ä¿¡æ¯",-1)])),_:1},8,["modelValue"])]),e("div",zn,[t(o(ya),{modelValue:I.value,"onUpdate:modelValue":l[5]||(l[5]=j=>I.value=j),type:"daterange","range-separator":"è‡³","start-placeholder":"å¼€å§‹æ—¥æœŸ","end-placeholder":"ç»“æŸæ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",class:"filter-input date-range",size:"small"},{prefix:a(()=>l[17]||(l[17]=[e("span",{class:"compact-label"},"æ—¥æœŸ",-1)])),_:1},8,["modelValue"])]),e("div",Bn,[t(o(Fe),{type:"primary",size:"small",onClick:$e,class:"filter-action-button"},{default:a(()=>l[18]||(l[18]=[y("åº”ç”¨")])),_:1}),t(o(Fe),{type:"info",size:"small",onClick:Se,class:"filter-action-button"},{default:a(()=>l[19]||(l[19]=[y("é‡ç½®")])),_:1})])])])):U("",!0),e("div",{class:pe(["content-area",{"with-filter":ne.value&&!O.value}])},[M.value?(p(),h("div",Gn,z(M.value),1)):(p(),h("div",Rn,[O.value?(p(),h("div",Dn,[o(v).length>0?(p(),h("div",Fn," æ˜¾ç¤º "+z(o(v).length)+" æ¡æäº¤è®°å½• "+z(H.value?"(å…¨éƒ¨)":"(åˆ†é¡µåŠ è½½ï¼Œæ¯é¡µ20æ¡)"),1)):U("",!0),e("div",jn,[e("div",On,[t(o(Fe),{type:"primary",circle:"",size:"small",onClick:ye,disabled:W.value<=Ct},{default:a(()=>[t(m,null,{default:a(()=>[t(o(ha))]),_:1})]),_:1},8,["disabled"]),t(o(_a),{modelValue:W.value,"onUpdate:modelValue":l[6]||(l[6]=j=>W.value=j),min:Ct,max:At,step:Xt,onChange:w,class:"zoom-slider"},null,8,["modelValue"]),t(o(Fe),{type:"primary",circle:"",size:"small",onClick:We,disabled:W.value>=At},{default:a(()=>[t(m,null,{default:a(()=>[t(o(wa))]),_:1})]),_:1},8,["disabled"]),t(o(Fe),{type:"primary",size:"small",onClick:r},{default:a(()=>l[20]||(l[20]=[y(" è‡ªé€‚åº”å¤§å° ")])),_:1})]),e("div",An," ç¼©æ”¾: "+z(Math.round(W.value*100))+"% ",1)]),e("div",{ref_key:"graphContainer",ref:Z,class:"graph-container"},null,512)])):(p(),h("div",En,[Ee((p(),Y(o(Vs),{ref_key:"tableRef",ref:b,data:F.value,stripe:"",border:"",class:"log-table","empty-text":E.value?"åŠ è½½ä¸­...":"æ²¡æœ‰åŒ¹é…çš„æäº¤è®°å½•",height:"450",onRowContextmenu:K},{default:a(()=>[t(o(Tt),{label:"å“ˆå¸Œ",width:"80",resizable:""},{default:a(j=>[e("span",{class:"commit-hash",onClick:Ae=>J(j.row)},z(j.row.hash.substring(0,6)),9,Un)]),_:1}),t(o(Tt),{label:"æäº¤ä¿¡æ¯","min-width":"300"},{default:a(j=>[e("div",Mn,[e("div",Pn,[j.row.branch?(p(),h("div",Nn,[(p(!0),h(we,null,ze(j.row.branch.split(","),(Ae,Mt)=>(p(),Y(o(zt),{key:Mt,size:"small",type:Ge(Ae),class:"branch-tag"},{default:a(()=>[y(z(Be(Ae)),1)]),_:2},1032,["type"]))),128))])):U("",!0),e("span",Hn,z(j.row.message),1),t(o(Fe),{type:"text",icon:o(xt),size:"small",onClick:Ie(Ae=>me(j.row.message),["stop"]),class:"copy-message-btn",title:"å¤åˆ¶çº¯å‡€æäº¤ä¿¡æ¯ï¼ˆä¸å«ç±»å‹å‰ç¼€ï¼‰"},null,8,["icon","onClick"])])])]),_:1}),t(o(Tt),{prop:"date",label:"æ—¥æœŸ",width:"150",resizable:""}),t(o(Tt),{label:"ä½œè€…",width:"100",resizable:""},{default:a(j=>[t(k,{content:j.row.email,placement:"top","hide-after":1e3},{default:a(()=>[e("span",In,z(j.row.author),1)]),_:2},1032,["content"])]),_:1})]),_:1},8,["data","empty-text"])),[[le,E.value]]),(H.value,U("",!0))]))]))],2),t(o(Bt),{modelValue:oe.value,"onUpdate:modelValue":l[7]||(l[7]=j=>oe.value=j),title:`æäº¤è¯¦æƒ…: ${(he=S.value)!=null&&he.hash?S.value.hash.substring(0,7):"æœªçŸ¥"}`,width:"80%","destroy-on-close":"",class:"commit-detail-dialog"},{default:a(()=>[Ee((p(),h("div",Jn,[S.value?(p(),h("div",Wn,[e("div",qn,[e("div",Yn,[l[24]||(l[24]=e("span",{class:"item-label"},"å“ˆå¸Œ:",-1)),e("span",Xn,z(S.value.hash),1)]),e("div",Kn,[l[25]||(l[25]=e("span",{class:"item-label"},"ä½œè€…:",-1)),e("span",Zn,z(S.value.author)+" <"+z(S.value.email)+">",1)]),e("div",Qn,[l[26]||(l[26]=e("span",{class:"item-label"},"æ—¥æœŸ:",-1)),e("span",ei,z(S.value.date),1)])]),e("div",ti,[l[27]||(l[27]=e("div",{class:"message-label"},"æäº¤ä¿¡æ¯:",-1)),e("div",{class:"message-content",innerHTML:Ve(S.value.message).replace(/\n/g,"<br>")},null,8,si)])])):U("",!0),e("div",ai,[e("div",li,[l[28]||(l[28]=e("h3",null,"å˜æ›´æ–‡ä»¶",-1)),B.value.length===0?(p(),Y(te,{key:0,description:"æ²¡æœ‰æ‰¾åˆ°å˜æ›´æ–‡ä»¶"})):(p(),h("ul",oi,[(p(!0),h(we,null,ze(B.value,j=>(p(),h("li",{key:j,class:pe({"active-file":j===D.value}),onClick:Ae=>G(S.value.hash,j)},z(j),11,ni))),128))]))]),e("div",ii,[D.value?(p(),h("h3",ri," æ–‡ä»¶å·®å¼‚: "+z(D.value),1)):(p(),h("h3",ci,"æ–‡ä»¶å·®å¼‚")),!x.value&&!q.value?(p(),Y(te,{key:2,description:"é€‰æ‹©æ–‡ä»¶æŸ¥çœ‹å·®å¼‚"})):x.value?(p(),h("div",{key:3,innerHTML:Ce(x.value),class:"diff-content"},null,8,ui)):U("",!0)])])])),[[le,q.value]])]),_:1},8,["modelValue","title"])],2),Ee(e("div",{class:pe(["context-menu",{"fullscreen-context-menu":Oe.value}]),style:St({top:L.value+"px",left:f.value+"px"})},[e("div",{class:"context-menu-item",onClick:l[8]||(l[8]=j=>J(A.value))},l[29]||(l[29]=[e("i",{class:"el-icon-view"},null,-1),y(" æŸ¥çœ‹è¯¦æƒ… ")])),e("div",{class:"context-menu-item",onClick:l[9]||(l[9]=j=>Xe(A.value))},l[30]||(l[30]=[e("i",{class:"el-icon-document-copy"},null,-1),y(" å¤åˆ¶æäº¤å“ˆå¸Œ ")])),e("div",{class:"context-menu-item",onClick:l[10]||(l[10]=j=>wt(A.value))},l[31]||(l[31]=[e("i",{class:"el-icon-refresh-right"},null,-1),y(" é‡ç½®åˆ°è¯¥æäº¤(hard) ")])),e("div",{class:"context-menu-item",onClick:l[11]||(l[11]=j=>lt(A.value))},l[32]||(l[32]=[e("i",{class:"el-icon-delete"},null,-1),y(" æ’¤é”€æäº¤ (Revert) ")])),e("div",{class:"context-menu-item",onClick:l[12]||(l[12]=j=>ot(A.value))},l[33]||(l[33]=[e("i",{class:"el-icon-edit"},null,-1),y(" Cherry-Pick åˆ°å½“å‰åˆ†æ”¯ ")]))],6),[[pt,ke.value]])],64)}}}),fi=Gt(di,[["__scopeId","data-v-081ce552"]]),pi={class:"dialog-header"},vi={class:"header-actions"},mi={class:"dialog-content"},gi={key:0,class:"loading-state"},yi={key:2,class:"history-list"},hi=["onClick"],_i={class:"command-info"},wi={class:"command-text"},ki={class:"command-meta"},$i={class:"timestamp"},bi={class:"duration"},Ci={class:"item-actions"},Si={key:0,class:"item-details"},Ti={key:0,class:"output-section"},xi={class:"output-header"},Vi={class:"output-content"},Li={key:0,class:"truncation-notice"},zi={class:"output-header"},Bi={class:"output-content"},Gi={key:0,class:"truncation-notice"},Ri={key:2,class:"output-section error"},Di={class:"output-content"},Fi=Vt({__name:"CommandHistory",setup(ue){const u=ht(),_=d([]),v=d(!1),g=d(!1),M=d(!1),R=d(!1),E=d(new Set),H=d(!1),ce=d(!1);function O(){ce.value=!0,_.value.length===0&&Z()}async function Z(){try{if(v.value=!0,u.socket&&u.socket.connected)u.socket.emit("request_full_history");else{const C=await(await fetch("/api/command-history")).json();C.success?_.value=C.history:i.error(`åŠ è½½å‘½ä»¤å†å²å¤±è´¥: ${C.error}`)}}catch(T){i.error(`åŠ è½½å‘½ä»¤å†å²å¤±è´¥: ${T.message}`)}finally{v.value=!1}}async function Q(){if(_.value.length===0){i.warning("æ²¡æœ‰å¯å¤åˆ¶çš„å‘½ä»¤å†å²");return}try{M.value=!0;const T=_.value.map(C=>{let I=`# ${de(C.timestamp)} (è€—æ—¶: ${oe(C.executionTime)}) - ${C.success?"æˆåŠŸ":"å¤±è´¥"}
`;if(I+=`${C.command}
`,C.stdout&&(I+=`
# è¾“å‡º:
${C.stdout}
`),C.stderr){const X=D(C.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º";I+=`
# ${X}:
${C.stderr}
`}return C.error&&(I+=`
# é”™è¯¯ä¿¡æ¯:
${C.error}
`),I}).join(`
---

`);await navigator.clipboard.writeText(T),i.success("å‘½ä»¤å†å²å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(T){i.error(`å¤åˆ¶å¤±è´¥: ${T.message}`)}finally{M.value=!1}}async function se(){if(_.value.length===0){i.warning("æ²¡æœ‰å¯å¤åˆ¶çš„å‘½ä»¤");return}try{H.value=!0;const T=_.value.map(C=>C.command).join(`
`);await navigator.clipboard.writeText(T),i.success("å‘½ä»¤åˆ—è¡¨å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(T){i.error(`å¤åˆ¶å¤±è´¥: ${T.message}`)}finally{H.value=!1}}async function ae(){try{if(await Ue.confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å‘½ä»¤å†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","æ¸…ç©ºå‘½ä»¤å†å²",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),g.value=!0,u.socket&&u.socket.connected)u.socket.emit("clear_command_history");else{const C=await(await fetch("/api/clear-command-history",{method:"POST",headers:{"Content-Type":"application/json"}})).json();C.success?(_.value=[],i.success("å‘½ä»¤å†å²å·²æ¸…ç©º")):i.error(`æ¸…ç©ºå‘½ä»¤å†å²å¤±è´¥: ${C.error}`)}}catch(T){T!=="cancel"&&T.toString()!=="Error: cancel"&&i.error(`æ¸…ç©ºå‘½ä»¤å†å²å¤±è´¥: ${T.message}`)}finally{g.value=!1}}function de(T){return new Date(T).toLocaleString()}function oe(T){return T<1e3?`${T}ms`:`${(T/1e3).toFixed(2)}s`}function S(T){E.value.has(T)?E.value.delete(T):E.value.add(T)}function B(T){return E.value.has(T)}async function x(T){try{await navigator.clipboard.writeText(T),i.success("å‘½ä»¤å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(C){i.error(`å¤åˆ¶å¤±è´¥: ${C.message}`)}}function q(T){return T.includes("git push")||T.includes("git-push")}function D(T){return!!q(T)}async function W(T){try{let C="";if(T.stdout&&(C+=`æ ‡å‡†è¾“å‡º:
${T.stdout}

`),T.stderr){const I=D(T.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º";C+=`${I}:
${T.stderr}

`}T.error&&(C+=`é”™è¯¯ä¿¡æ¯:
${T.error}`),await navigator.clipboard.writeText(C.trim()),i.success("è¾“å‡ºå·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(C){i.error(`å¤åˆ¶å¤±è´¥: ${C.message}`)}}function fe(){if(!u.socket){console.error("Socketå®ä¾‹ä¸å¯ç”¨");return}u.socket.on("initial_command_history",T=>{_.value=T.history,R.value=!0}),u.socket.on("command_history_update",T=>{_.value.unshift(T.newCommand),_.value.length>100&&_.value.pop(),R.value=!0}),u.socket.on("full_command_history",T=>{_.value=T.history,v.value=!1,R.value=!0}),u.socket.on("command_history_cleared",T=>{T.success&&(_.value=[],i.success("å‘½ä»¤å†å²å·²æ¸…ç©º")),g.value=!1}),u.socket.on("connect",()=>{R.value=!0,i.success("å·²è¿æ¥åˆ°å®æ—¶å‘½ä»¤å†å²")}),u.socket.on("disconnect",()=>{R.value=!1,i.warning("å®æ—¶å‘½ä»¤å†å²è¿æ¥å·²æ–­å¼€")})}function ne(){u.socket&&(u.socket.off("initial_command_history"),u.socket.off("command_history_update"),u.socket.off("full_command_history"),u.socket.off("command_history_cleared"))}return _t(()=>{fe(),u.socket||(console.log("å°è¯•åˆå§‹åŒ–Socketè¿æ¥"),u.initSocketConnection())}),ys(()=>{ne()}),(T,C)=>{const I=Fe,X=zt,P=Lt,ve=as,ke=ts,L=Bt;return p(),h(we,null,[t(I,{type:"primary",icon:o($a),onClick:O,class:"command-history-button",title:"æŸ¥çœ‹Gitå‘½ä»¤å†å²"},{default:a(()=>C[1]||(C[1]=[y(" å‘½ä»¤å†å² ")])),_:1},8,["icon"]),(p(),Y(ba,{to:"body"},[t(L,{modelValue:ce.value,"onUpdate:modelValue":C[0]||(C[0]=f=>ce.value=f),title:"Git å‘½ä»¤å†å²",width:"80%",top:"5vh","destroy-on-close":"",class:"command-history-dialog","z-index":99999,"append-to-body":"",modal:""},{header:a(()=>[e("div",pi,[C[2]||(C[2]=e("h2",null,"Git å‘½ä»¤å†å²",-1)),e("div",vi,[t(X,{type:R.value?"success":"danger",size:"small",effect:"dark",class:"socket-status"},{default:a(()=>[y(z(R.value?"å®æ—¶æ›´æ–°":"æœªè¿æ¥"),1)]),_:1},8,["type"]),t(I,{type:"success",icon:o(xt),circle:"",size:"small",onClick:se,loading:H.value,class:"copy-commands-button",title:"åªå¤åˆ¶å‘½ä»¤åˆ—è¡¨ï¼ˆä¸å«è¾“å‡ºï¼‰",disabled:_.value.length===0},null,8,["icon","loading","disabled"]),t(I,{type:"primary",icon:o(xt),circle:"",size:"small",onClick:Q,loading:M.value,class:"copy-all-button",title:"å¤åˆ¶å®Œæ•´å‘½ä»¤å†å²ï¼ˆå«è¾“å‡ºï¼‰",disabled:_.value.length===0},null,8,["icon","loading","disabled"]),t(I,{type:"danger",icon:o(Cs),circle:"",size:"small",onClick:ae,loading:g.value,class:"clear-button",title:"æ¸…ç©ºå‘½ä»¤å†å²",disabled:_.value.length===0},null,8,["icon","loading","disabled"])])])]),default:a(()=>[e("div",mi,[v.value&&_.value.length===0?(p(),h("div",gi,[t(P,{class:"loading-icon is-loading"},{default:a(()=>C[3]||(C[3]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})],-1)])),_:1}),C[4]||(C[4]=e("div",{class:"loading-text"},"åŠ è½½å‘½ä»¤å†å²...",-1))])):_.value.length===0?(p(),Y(ve,{key:1,description:"æš‚æ— å‘½ä»¤å†å²"})):(p(),h("div",yi,[(p(!0),h(we,null,ze(_.value,(f,A)=>(p(),h("div",{key:A,class:pe(["history-item",{"is-error":!f.success}])},[e("div",{class:"item-header",onClick:F=>S(A)},[e("div",_i,[e("div",wi,[t(X,{size:"small",type:f.success?"success":"danger",effect:"dark",class:"status-tag"},{default:a(()=>[y(z(f.success?"æˆåŠŸ":"å¤±è´¥"),1)]),_:2},1032,["type"]),e("code",null,z(f.command),1)]),e("div",ki,[e("span",$i,z(de(f.timestamp)),1),e("span",bi,"è€—æ—¶: "+z(oe(f.executionTime)),1)])]),e("div",Ci,[t(I,{type:"primary",icon:o(xt),circle:"",size:"small",onClick:Ie(F=>x(f.command),["stop"]),title:"å¤åˆ¶å‘½ä»¤"},null,8,["icon","onClick"]),t(I,{type:B(A)?"primary":"default",icon:B(A)?o($s):o(gt),circle:"",size:"small",onClick:Ie(F=>S(A),["stop"]),title:"å±•å¼€/æ”¶èµ·"},null,8,["type","icon","onClick"])])],8,hi),B(A)?(p(),h("div",Si,[f.stdout?(p(),h("div",Ti,[e("div",xi,[C[5]||(C[5]=e("h4",null,"æ ‡å‡†è¾“å‡º",-1)),t(I,{type:"primary",icon:o(xt),circle:"",size:"small",onClick:F=>W(f),title:"å¤åˆ¶è¾“å‡º"},null,8,["icon","onClick"])]),e("pre",Vi,z(f.stdout),1),f.isStdoutTruncated?(p(),h("div",Li,[t(ke,{type:"info",closable:!1,"show-icon":""},{default:a(()=>C[6]||(C[6]=[y(" è¾“å‡ºå†…å®¹è¿‡é•¿å·²è¢«æˆªæ–­ï¼Œè¯·ç›´æ¥æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹å®Œæ•´è¾“å‡º ")])),_:1})])):U("",!0)])):U("",!0),f.stderr?(p(),h("div",{key:1,class:pe(["output-section",D(f.command)?"":"error"])},[e("div",zi,[e("h4",null,z(D(f.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º"),1)]),e("pre",Bi,z(f.stderr),1),f.isStderrTruncated?(p(),h("div",Gi,[t(ke,{type:"info",closable:!1,"show-icon":""},{default:a(()=>[y(z(D(f.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º")+"å†…å®¹è¿‡é•¿å·²è¢«æˆªæ–­ï¼Œè¯·ç›´æ¥æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹å®Œæ•´è¾“å‡º ",1)]),_:2},1024)])):U("",!0)],2)):U("",!0),f.error?(p(),h("div",Ri,[C[7]||(C[7]=e("div",{class:"output-header"},[e("h4",null,"é”™è¯¯ä¿¡æ¯")],-1)),e("pre",Di,z(f.error),1)])):U("",!0)])):U("",!0)],2))),128))]))])]),_:1},8,["modelValue"])]))],64)}}}),ji=Gt(Fi,[["__scopeId","data-v-3e9f6472"]]),Oi="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20ä¸»åˆ†æ”¯%20--%3e%3cline%20x1='40'%20y1='40'%20x2='40'%20y2='160'%20stroke='%2334495e'%20stroke-width='8'%20stroke-linecap='round'%20/%3e%3c!--%20ç‰¹æ€§åˆ†æ”¯%20--%3e%3cpath%20d='M40,70%20C60,70%2080,90%2080,110%20L80,130'%20stroke='%233498db'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20å¼€å‘åˆ†æ”¯%20--%3e%3cpath%20d='M40,100%20C60,100%20100,110%20100,130%20L100,160'%20stroke='%232ecc71'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20ä¿®å¤åˆ†æ”¯%20--%3e%3cpath%20d='M40,130%20C60,130%20120,140%20120,160'%20stroke='%23e74c3c'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20åˆå¹¶ç‚¹%20--%3e%3cpath%20d='M80,130%20C80,145%2060,145%2040,145'%20stroke='%233498db'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20èŠ‚ç‚¹%20--%3e%3ccircle%20cx='40'%20cy='40'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='70'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='100'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='130'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='145'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='160'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='80'%20cy='130'%20r='10'%20fill='%233498db'%20/%3e%3ccircle%20cx='100'%20cy='160'%20r='10'%20fill='%232ecc71'%20/%3e%3ccircle%20cx='120'%20cy='160'%20r='10'%20fill='%23e74c3c'%20/%3e%3c/svg%3e",Ai={class:"main-header"},Ei={class:"header-left"},Ui=["src"],Mi={class:"header-info"},Pi={key:0,id:"user-info"},Ni={class:"user-name"},Hi={class:"user-email"},Ii={key:1,id:"user-info"},Ji={class:"directory-selector"},Wi={class:"directory-display"},qi={class:"directory-icon"},Yi=["title"],Xi={class:"directory-actions"},Ki={key:2,class:"command-history-section"},Zi={class:"main-container"},Qi={key:0,class:"loading-container"},er={class:"loading-spinner"},tr={key:1,class:"grid-layout"},sr={class:"git-status-panel"},ar={key:0,class:"commit-form-panel"},lr={key:0,class:"card"},or={class:"tips"},nr={key:1,class:"commit-form-panel"},ir={key:2,class:"log-list-panel"},rr={class:"dialog-footer"},cr={class:"main-footer"},ur={key:0,class:"branch-info"},dr={class:"branch-wrapper"},fr={key:1,class:"footer-right"},pr={class:"repo-url"},vr={class:"dialog-footer"},mr={class:"directory-input-group"},gr={class:"recent-directories"},yr={class:"dialog-footer"},hr=Vt({__name:"App",setup(ue){const u=d(""),_=d(null),v=d(null),g=ht(),M=ls(),R=d(!1),E=d("");function H(){M.config&&(u.value=`é»˜è®¤æäº¤ä¿¡æ¯: ${M.config.defaultCommitMessage}`)}async function ce(){try{const r=await(await fetch("/api/current_directory")).json();return E.value=r.directory||"æœªçŸ¥ç›®å½•",r}catch(w){return console.error("è·å–å½“å‰ç›®å½•å¤±è´¥:",w),{directory:"æœªçŸ¥ç›®å½•",isGitRepo:!1}}}_t(async()=>{console.log("---------- é¡µé¢åˆå§‹åŒ–å¼€å§‹ ----------");try{const w=await ce();M.isLoaded||await M.loadConfig(),H(),g.isGitRepo=w.isGitRepo===!0,g.lastCheckedTime=Date.now(),g.isGitRepo?await Promise.all([g.getCurrentBranch(!0),g.getAllBranches(),g.getUserInfo(),g.getRemoteUrl(),g.getBranchStatus(!0)]):i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œéƒ¨åˆ†åŠŸèƒ½å°†ä¸å¯ç”¨")}catch(w){console.error("åˆå§‹åŒ–å¤±è´¥:",w)}finally{R.value=!0,console.log("---------- é¡µé¢åˆå§‹åŒ–å®Œæˆ ----------"),setTimeout(()=>{ke()},100)}});const O=d(!1),Z=d(""),Q=d("");async function se(){await g.createBranch(Z.value,Q.value)&&(O.value=!1,Z.value="",v.value&&v.value.refreshStatus(),_.value&&_.value.refreshLog())}function ae(){Q.value=g.currentBranch,O.value=!0}async function de(w){await g.changeBranch(w)&&(v.value&&v.value.refreshStatus(),_.value&&_.value.refreshLog())}const oe=d(!1),S=d(""),B=d("");function x(){S.value=g.userName,B.value=g.userEmail,oe.value=!0}async function q(){if(!S.value||!B.value){i.warning("ç”¨æˆ·åå’Œé‚®ç®±ä¸èƒ½ä¸ºç©º");return}await g.restoreUserConfig(S.value,B.value)&&(oe.value=!1)}async function D(){await g.clearUserConfig()&&(S.value="",B.value="")}let W=!1,fe=!1,ne=!1,T=0,C=0,I="",X="",P=null;function ve(){const w=document.querySelector(".grid-layout");if(!w)return;const r=getComputedStyle(w).gridTemplateColumns.split(" "),J=getComputedStyle(w).gridTemplateRows.split(" ");if(r.length>=3&&J.length>=3){const G=parseFloat(r[0]),Ce=parseFloat(r[2]),Ve=G+Ce,re=G/Ve,me=parseFloat(J[0]),Re=parseFloat(J[2]),Se=me+Re,$e=me/Se;localStorage.setItem("zen-gitsync-layout-left-ratio",re.toString()),localStorage.setItem("zen-gitsync-layout-top-ratio",$e.toString()),console.log(`å¸ƒå±€æ¯”ä¾‹å·²ä¿å­˜ - å·¦ä¾§: ${(re*100).toFixed(0)}%, ä¸Šæ–¹: ${($e*100).toFixed(0)}%`),localStorage.setItem("zen-gitsync-layout-bottom-left-ratio",re.toString()),console.log(`åº•éƒ¨å¸ƒå±€æ¯”ä¾‹å·²ä¿å­˜ - å·¦ä¾§: ${(re*100).toFixed(0)}%`)}}function ke(){const w=document.querySelector(".grid-layout");if(!w)return;const r=localStorage.getItem("zen-gitsync-layout-left-ratio"),J=localStorage.getItem("zen-gitsync-layout-top-ratio");if(r){const G=parseFloat(r),Ce=1-G;w.style.gridTemplateColumns=`${G}fr 8px ${Ce}fr`,console.log(`å·²æ¢å¤å·¦ä¾§æ¯”ä¾‹: ${(G*100).toFixed(0)}%`)}else w.style.gridTemplateColumns="1fr 8px 3fr";if(J){const G=parseFloat(J),Ce=1-G;w.style.gridTemplateRows=`${G}fr 8px ${Ce}fr`,console.log(`å·²æ¢å¤ä¸Šæ–¹æ¯”ä¾‹: ${(G*100).toFixed(0)}%`)}}function L(w){var G;const r=w.currentTarget;if(!r||!r.id)return;P=r.id,P==="v-resizer"?W=!0:P==="v-resizer-bottom"&&(fe=!0),T=w.clientX;const J=document.querySelector(".grid-layout");I=getComputedStyle(J).gridTemplateColumns,(G=document.getElementById(P))==null||G.classList.add("active"),document.addEventListener("mousemove",f),document.addEventListener("mouseup",A),w.preventDefault()}function f(w){if(!W&&!fe)return;const r=document.querySelector(".grid-layout"),J=w.clientX-T,G=I.split(" ");if(G.length>=3){const Ce=parseFloat(G[0]),Ve=parseFloat(G[2]),re=Ce+Ve,me=(Ce+J/r.clientWidth*re)/re,Re=1-me,Se=.1,$e=.5;me<Se?r.style.gridTemplateColumns=`${Se}fr 8px ${1-Se}fr`:me>$e?r.style.gridTemplateColumns=`${$e}fr 8px ${1-$e}fr`:r.style.gridTemplateColumns=`${me}fr 8px ${Re}fr`}}function A(){var w,r;W=!1,fe=!1,(w=document.getElementById("v-resizer"))==null||w.classList.remove("active"),(r=document.getElementById("v-resizer-bottom"))==null||r.classList.remove("active"),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",A),ve()}function F(w){var J;ne=!0,C=w.clientY;const r=document.querySelector(".grid-layout");X=getComputedStyle(r).gridTemplateRows,(J=document.getElementById("h-resizer"))==null||J.classList.add("active"),document.addEventListener("mousemove",N),document.addEventListener("mouseup",ee),w.preventDefault()}function N(w){if(!ne)return;const r=document.querySelector(".grid-layout"),J=w.clientY-C,G=X.split(" ");if(G.length>=3){const Ce=parseFloat(G[0]),Ve=parseFloat(G[2]),re=Ce+Ve,me=(Ce+J/r.clientHeight*re)/re,Re=1-me,Se=.2,$e=.8;me<Se?r.style.gridTemplateRows=`${Se}fr 8px ${1-Se}fr`:me>$e?r.style.gridTemplateRows=`${$e}fr 8px ${1-$e}fr`:r.style.gridTemplateRows=`${me}fr 8px ${Re}fr`}}function ee(){var w;ne=!1,(w=document.getElementById("h-resizer"))==null||w.classList.remove("active"),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",ee),ve()}const be=d(!1),ge=d(""),Be=d(!1),Ge=d([]);async function b(){if(!E.value){i.warning("å½“å‰ç›®å½•è·¯å¾„ä¸ºç©º");return}try{await navigator.clipboard.writeText(E.value),i.success("å·²å¤åˆ¶ç›®å½•è·¯å¾„")}catch(w){console.error("å¤åˆ¶ç›®å½•è·¯å¾„å¤±è´¥:",w),i.error(`å¤åˆ¶å¤±è´¥: ${w.message}`)}}function ie(){ge.value=E.value,be.value=!0,Je()}async function Je(){try{const r=await(await fetch("/api/recent_directories")).json();r.success&&Array.isArray(r.directories)&&(Ge.value=r.directories)}catch(w){console.error("è·å–æœ€è¿‘ç›®å½•å¤±è´¥:",w)}}async function je(){if(!ge.value){i.warning("ç›®å½•è·¯å¾„ä¸èƒ½ä¸ºç©º");return}try{Be.value=!0;const r=await(await fetch("/api/change_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:ge.value})})).json();r.success?(i.success("å·²åˆ‡æ¢å·¥ä½œç›®å½•"),E.value=r.directory,be.value=!1,await st(r.directory),await Je(),g.isGitRepo=r.isGitRepo,await M.loadConfig(!0),r.isGitRepo?(await Promise.all([g.getCurrentBranch(),g.getAllBranches(),g.getUserInfo(),g.getRemoteUrl()]),v.value&&v.value.refreshStatus(),_.value&&_.value.refreshLog()):(i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œéƒ¨åˆ†åŠŸèƒ½å°†ä¸å¯ç”¨"),g.$reset())):i.error(r.error||"åˆ‡æ¢ç›®å½•å¤±è´¥")}catch(w){i.error(`åˆ‡æ¢ç›®å½•å¤±è´¥: ${w.message}`)}finally{Be.value=!1}}async function st(w){try{await fetch("/api/save_recent_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:w})})}catch(r){console.error("ä¿å­˜æœ€è¿‘ç›®å½•å¤±è´¥:",r)}}async function Me(){try{if(!E.value){i.warning("å½“å‰ç›®å½•è·¯å¾„ä¸ºç©º");return}const r=await(await fetch("/api/open_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:E.value})})).json();r.success?i.success("å·²åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰“å¼€ç›®å½•"):r.error&&i.error(r.error)}catch(w){console.error("æ‰“å¼€ç›®å½•å¤±è´¥:",w),i.error(`æ‰“å¼€ç›®å½•å¤±è´¥: ${w.message}`)}}async function Pe(){try{const r=await(await fetch("/api/browse_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPath:ge.value||E.value})})).json();r.success?We(r):r.error&&i.error(r.error)}catch(w){console.error("æµè§ˆç›®å½•å¤±è´¥:",w),i.error(`æµè§ˆç›®å½•å¤±è´¥: ${w.message}`)}}function We(w){!w||!w.items||Ue.alert(De("div",{class:"directory-browser"},[De("div",{class:"current-path"},[De("span",{class:"path-label"},"å½“å‰è·¯å¾„: "),De("span",{class:"path-value"},w.path)]),De("div",{class:"directory-list"},[w.parentPath?De("div",{class:"directory-item parent-dir",onClick:()=>{ye(w.parentPath)}},[De("span",{class:"dir-icon"},De("svg",{class:"folder-icon",viewBox:"0 0 24 24",width:"20",height:"20",style:{fill:"#E6A23C"}},[De("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})])),De("span",{class:"dir-name"},"è¿”å›ä¸Šçº§ç›®å½•")]):null,...w.items.map(r=>De("div",{class:"directory-item",onClick:()=>{ye(r.path)}},[De("span",{class:"dir-icon"},De("svg",{class:"folder-icon",viewBox:"0 0 24 24",width:"20",height:"20",style:{fill:"#409EFF"}},[De("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})])),De("span",{class:"dir-name"},r.name)]))])]),"æµè§ˆå¹¶é€‰æ‹©ç›®å½•",{confirmButtonText:"ä½¿ç”¨å½“å‰ç›®å½•",customClass:"directory-browser-dialog",callback:r=>{r==="confirm"&&(ge.value=w.path)}})}async function ye(w){try{Ue.close(),setTimeout(async()=>{try{const J=await(await fetch("/api/browse_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPath:w})})).json();J.success?We(J):J.error&&i.error(J.error)}catch(r){console.error("æµè§ˆç›®å½•å¤±è´¥:",r),i.error(`æµè§ˆç›®å½•å¤±è´¥: ${r.message}`)}},100)}catch(r){console.error("å¤„ç†ç›®å½•é€‰æ‹©æ—¶å‡ºé”™:",r),i.error(`å¤„ç†ç›®å½•é€‰æ‹©æ—¶å‡ºé”™: ${r.message}`)}}return(w,r)=>{const J=Lt,G=Fe,Ce=Ss,Ve=ss,re=xs,me=Et,Re=Ut,Se=Ts,$e=Bt,at=ts,Ye=zt;return p(),h(we,null,[e("header",Ai,[e("div",Ei,[e("img",{src:o(Oi),alt:"Zen GitSync Logo",class:"logo"},null,8,Ui),r[14]||(r[14]=e("h1",null,"Zen GitSync UI",-1))]),e("div",Mi,[o(g).userName&&o(g).userEmail?(p(),h("div",Pi,[r[15]||(r[15]=e("span",{class:"user-label"},"ç”¨æˆ·:",-1)),e("span",Ni,z(o(g).userName),1),e("span",Hi,"<"+z(o(g).userEmail)+">",1),t(G,{type:"primary",size:"small",onClick:x,class:"user-settings-btn",circle:""},{default:a(()=>[t(J,null,{default:a(()=>[t(o(vs))]),_:1})]),_:1})])):(p(),h("div",Ii,[r[16]||(r[16]=e("span",{class:"user-label"},"ç”¨æˆ·: ",-1)),r[17]||(r[17]=e("span",{class:"user-warning"},"æœªé…ç½®",-1)),t(G,{type:"primary",size:"small",onClick:x,class:"user-settings-btn",circle:""},{default:a(()=>[t(J,null,{default:a(()=>[t(o(vs))]),_:1})]),_:1})])),e("div",Ji,[e("div",Wi,[e("div",qi,[t(J,null,{default:a(()=>[t(o(ms))]),_:1})]),e("div",{class:"directory-path",title:E.value},z(E.value),9,Yi)]),e("div",Xi,[t(G,{type:"primary",size:"small",onClick:ie,class:"dir-button",circle:"",title:"åˆ‡æ¢ç›®å½•"},{default:a(()=>[t(J,null,{default:a(()=>r[18]||(r[18]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192H128zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32z"})],-1)])),_:1})]),_:1}),t(G,{type:"success",size:"small",onClick:Me,class:"dir-button",circle:"",title:"åœ¨èµ„æºç®¡ç†å™¨ä¸­æ‰“å¼€"},{default:a(()=>[t(J,null,{default:a(()=>r[19]||(r[19]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 0 0-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"})],-1)])),_:1})]),_:1}),t(G,{type:"info",size:"small",onClick:b,class:"dir-button",circle:"",title:"å¤åˆ¶è·¯å¾„"},{default:a(()=>[t(J,null,{default:a(()=>r[20]||(r[20]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64h64z"}),e("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64z"})],-1)])),_:1})]),_:1})])]),o(g).isGitRepo?(p(),h("div",Ki,[t(ji)])):U("",!0)])]),e("main",Zi,[R.value?(p(),h("div",tr,[e("div",sr,[t(Rl,{ref_key:"gitStatusRef",ref:v,"initial-directory":E.value},null,8,["initial-directory"])]),e("div",{class:"vertical-resizer",id:"v-resizer",onMousedown:L},null,32),o(g).isGitRepo?(p(),h("div",ar,[!o(g).userName||!o(g).userEmail?(p(),h("div",lr,[r[26]||(r[26]=e("h2",null,"Gitç”¨æˆ·æœªé…ç½®",-1)),r[27]||(r[27]=e("p",null,"è¯·å…ˆé…ç½®Gitç”¨æˆ·ä¿¡æ¯æ‰èƒ½è¿›è¡Œæäº¤æ“ä½œã€‚",-1)),e("div",or,[r[24]||(r[24]=e("h3",null,"æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é…ç½®ï¼š",-1)),r[25]||(r[25]=e("ol",null,[e("li",null,"ç‚¹å‡»å³ä¸Šè§’çš„è®¾ç½®æŒ‰é’®ï¼Œé…ç½®ç”¨æˆ·åå’Œé‚®ç®±"),e("li",null,"æˆ–è€…ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼š"),e("div",{class:"code-block"},[y(' git config --global user.name "æ‚¨çš„ç”¨æˆ·å"'),e("br"),y(' git config --global user.email "æ‚¨çš„é‚®ç®±" ')])],-1)),t(G,{type:"primary",onClick:x},{default:a(()=>r[23]||(r[23]=[y(" ç«‹å³é…ç½® ")])),_:1})])])):(p(),Y($n,{key:1}))])):(p(),h("div",nr,r[28]||(r[28]=[e("div",{class:"card",style:{padding:"20px"}},[e("h2",null,"Gitä»“åº“åˆå§‹åŒ–"),e("p",null,"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè¯·å…ˆåˆå§‹åŒ–Gitä»“åº“æˆ–åˆ‡æ¢åˆ°Gitä»“åº“ç›®å½•ã€‚"),e("div",{class:"tips"},[e("h3",null,"å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ä»“åº“ï¼š"),e("div",{class:"code-block"},"git init")])],-1)]))),e("div",{class:"horizontal-resizer",id:"h-resizer",onMousedown:F},null,32),o(g).isGitRepo?(p(),h("div",ir,[t(fi,{ref_key:"logListRef",ref:_},null,512)])):U("",!0),t($e,{modelValue:O.value,"onUpdate:modelValue":r[3]||(r[3]=K=>O.value=K),title:"åˆ›å»ºæ–°åˆ†æ”¯",width:"30%","destroy-on-close":""},{footer:a(()=>[e("span",rr,[t(G,{onClick:r[2]||(r[2]=K=>O.value=!1)},{default:a(()=>r[29]||(r[29]=[y("å–æ¶ˆ")])),_:1}),t(G,{type:"primary",onClick:se,loading:o(g).isCreatingBranch},{default:a(()=>r[30]||(r[30]=[y(" åˆ›å»º ")])),_:1},8,["loading"])])]),default:a(()=>[t(Se,{model:{newBranchName:Z.value,selectedBaseBranch:Q.value}},{default:a(()=>[t(re,{label:"æ–°åˆ†æ”¯åç§°"},{default:a(()=>[t(Ve,{modelValue:Z.value,"onUpdate:modelValue":r[0]||(r[0]=K=>Z.value=K),placeholder:"è¯·è¾“å…¥æ–°åˆ†æ”¯åç§°"},null,8,["modelValue"])]),_:1}),t(re,{label:"åŸºäºåˆ†æ”¯"},{default:a(()=>[t(Re,{modelValue:Q.value,"onUpdate:modelValue":r[1]||(r[1]=K=>Q.value=K),placeholder:"é€‰æ‹©åŸºç¡€åˆ†æ”¯",style:{width:"100%"}},{default:a(()=>[(p(!0),h(we,null,ze(o(g).allBranches,K=>(p(),Y(me,{key:K,label:K,value:K},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])):(p(),h("div",Qi,[t(Ce,{class:"loading-card"},{default:a(()=>[e("div",er,[t(J,{class:"is-loading"},{default:a(()=>r[21]||(r[21]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})],-1)])),_:1})]),r[22]||(r[22]=e("div",{class:"loading-text"},"åŠ è½½ä¸­...",-1))]),_:1})]))]),e("footer",cr,[o(g).currentBranch?(p(),h("div",ur,[e("div",dr,[r[32]||(r[32]=e("span",{class:"branch-label"},"å½“å‰åˆ†æ”¯:",-1)),t(Re,{modelValue:o(g).currentBranch,"onUpdate:modelValue":r[4]||(r[4]=K=>o(g).currentBranch=K),size:"small",onChange:de,loading:o(g).isChangingBranch,class:"branch-select"},{default:a(()=>[(p(!0),h(we,null,ze(o(g).allBranches,K=>(p(),Y(me,{key:K,label:K,value:K},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),t(G,{type:"primary",size:"small",onClick:ae,class:"create-branch-btn"},{default:a(()=>[t(J,null,{default:a(()=>[t(o(Ca))]),_:1}),r[31]||(r[31]=y(" æ–°å»ºåˆ†æ”¯ "))]),_:1})])])):U("",!0),o(g).remoteUrl?(p(),h("div",fr,[r[34]||(r[34]=e("span",{class:"repo-url-label"},"è¿œç¨‹ä»“åº“:",-1)),e("span",pr,z(o(g).remoteUrl),1),t(G,{type:"primary",circle:"",size:"small",onClick:r[5]||(r[5]=K=>o(g).copyRemoteUrl()),class:"copy-url-btn",title:"å¤åˆ¶ä»“åº“åœ°å€"},{default:a(()=>[t(J,null,{default:a(()=>r[33]||(r[33]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64h64z"}),e("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64z"})],-1)])),_:1})]),_:1})])):U("",!0)]),t($e,{modelValue:oe.value,"onUpdate:modelValue":r[9]||(r[9]=K=>oe.value=K),title:"Gitç”¨æˆ·è®¾ç½®",width:"30%","destroy-on-close":""},{footer:a(()=>[e("span",vr,[t(G,{type:"danger",onClick:D},{default:a(()=>r[36]||(r[36]=[y(" æ¸…é™¤é…ç½® ")])),_:1}),t(G,{onClick:r[8]||(r[8]=K=>oe.value=!1)},{default:a(()=>r[37]||(r[37]=[y("å–æ¶ˆ")])),_:1}),t(G,{type:"primary",onClick:q},{default:a(()=>r[38]||(r[38]=[y(" ä¿å­˜ ")])),_:1})])]),default:a(()=>[t(Se,null,{default:a(()=>[t(re,{label:"ç”¨æˆ·å"},{default:a(()=>[t(Ve,{modelValue:S.value,"onUpdate:modelValue":r[6]||(r[6]=K=>S.value=K),placeholder:"è¯·è¾“å…¥Gitç”¨æˆ·å"},null,8,["modelValue"])]),_:1}),t(re,{label:"é‚®ç®±"},{default:a(()=>[t(Ve,{modelValue:B.value,"onUpdate:modelValue":r[7]||(r[7]=K=>B.value=K),placeholder:"è¯·è¾“å…¥Gité‚®ç®±"},null,8,["modelValue"])]),_:1}),t(re,null,{default:a(()=>[t(at,{type:"info",closable:!1,"show-icon":""},{default:a(()=>r[35]||(r[35]=[y(" è¿™äº›è®¾ç½®å°†å½±å“å…¨å±€Gité…ç½®ï¼Œå¯¹æ‰€æœ‰Gitä»“åº“ç”Ÿæ•ˆã€‚ ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($e,{modelValue:be.value,"onUpdate:modelValue":r[13]||(r[13]=K=>be.value=K),title:"åˆ‡æ¢å·¥ä½œç›®å½•",width:"50%","destroy-on-close":""},{footer:a(()=>[e("span",yr,[t(G,{onClick:r[11]||(r[11]=K=>be.value=!1)},{default:a(()=>r[40]||(r[40]=[y("å–æ¶ˆ")])),_:1}),t(G,{type:"primary",onClick:r[12]||(r[12]=K=>je()),loading:Be.value},{default:a(()=>r[41]||(r[41]=[y(" åˆ‡æ¢ ")])),_:1},8,["loading"])])]),default:a(()=>[t(Se,null,{default:a(()=>[t(re,{label:"ç›®å½•è·¯å¾„"},{default:a(()=>[e("div",mr,[t(Ve,{modelValue:ge.value,"onUpdate:modelValue":r[10]||(r[10]=K=>ge.value=K),placeholder:"è¯·è¾“å…¥ç›®å½•è·¯å¾„"},null,8,["modelValue"]),t(G,{type:"primary",onClick:Pe},{default:a(()=>[t(J,null,{default:a(()=>[t(o(ms))]),_:1}),r[39]||(r[39]=y(" æµè§ˆ "))]),_:1})])]),_:1}),Ge.value.length>0?(p(),Y(re,{key:0,label:"å¸¸ç”¨ç›®å½•"},{default:a(()=>[e("div",gr,[(p(!0),h(we,null,ze(Ge.value,(K,lt)=>(p(),Y(Ye,{key:lt,class:"recent-dir-tag",onClick:ot=>ge.value=K,effect:"plain"},{default:a(()=>[y(z(K),1)]),_:2},1032,["onClick"]))),128))])]),_:1})):U("",!0)]),_:1})]),_:1},8,["modelValue"])],64)}}}),_r=Gt(hr,[["__scopeId","data-v-a5d01110"]]),Ls=Sa(_r);Ls.use(Ta());Ls.mount("#app");
