import{d as fs,r as d,o as ht,a as ps,E as i,l as Ws,c as ze,b as St,w as Ze,e as _,f,F as we,g as e,h as t,i as He,j as q,k as A,m as qt,u as o,n as a,p as vs,q as Wt,s as ms,t as je,v as gs,x as ys,y as dt,z as Tt,A as lt,B as qs,C as Yt,D as xt,G as y,H as hs,I as L,J as mt,K as ge,L as Be,M as _s,N as Vt,O as Ys,P as is,Q as rs,R as Xs,S as Rt,T as We,U as gt,V as Xt,W as Ie,X as Ks,Y as cs,Z as Kt,_ as Zs,$ as $t,a0 as Ht,a1 as It,a2 as jt,a3 as Ut,a4 as Zt,a5 as Dt,a6 as ws,a7 as Qs,a8 as ea,a9 as Qt,aa as ks,ab as ta,ac as $s,ad as bs,ae as sa,af as aa,ag as la,ah as Cs,ai as bt,aj as ut,ak as oa,al as na,am as ia,an as ra,ao as ca,ap as ua,aq as da,ar as fa,as as pa,at as va,au as ma,av as Ct,aw as ga,ax as ya,ay as ha,az as us,aA as ds,aB as _a,aC as Fe,aD as wa,aE as ka}from"./vendor-CKXtUB8u.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))v(g);new MutationObserver(g=>{for(const E of g)if(E.type==="childList")for(const G of E.addedNodes)G.tagName==="LINK"&&G.rel==="modulepreload"&&v(G)}).observe(document,{childList:!0,subtree:!0});function C(g){const E={};return g.integrity&&(E.integrity=g.integrity),g.referrerPolicy&&(E.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?E.credentials="include":g.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function v(g){if(g.ep)return;g.ep=!0;const E=C(g);fetch(g.href,E)}})();const Nt=800;function $a(){const ve="3002";return console.log(`ä»ç¯å¢ƒå˜é‡è¯»å–åç«¯ç«¯å£: ${ve}`),parseInt(ve,10)}const ba=$a(),yt=fs("git",()=>{const ve=d(""),c=d([]),C=d(""),v=d(""),g=d(!1),E=d(!1),G=d(!1),M=d(0),H=d(""),pe=d(!1),D=d(!1),Q=d(!1),ee=d(!1),oe=d(!1),W=d(0),me=d(0),Y=d(!1),S=d(""),x=d(0),F=d(0),X=d(!0),B=d(null),U=d([]),te=d({staged:[],unstaged:[],untracked:[]}),ce=d([]),$=d(!1),T=d(!1),N=d(!1),ie=d(!1),I=d(!1),se=d([]),ue=d(!1),V=d(!1),p=d(!1),P=d(!1);function j(){ve.value="",c.value=[],C.value="",v.value="",g.value=!1,E.value=!1,G.value=!1,M.value=0,W.value=0,me.value=0,Y.value=!1,S.value="",x.value=0,F.value=0,D.value=!1,Q.value=!1,ee.value=!1,oe.value=!1,H.value="",pe.value=!1,U.value=[],te.value={staged:[],unstaged:[],untracked:[]},ce.value=[],$.value=!1,T.value=!1,N.value=!1,ie.value=!1,I.value=!1}async function O(n=!1,l=!1){if(!G.value)return;const m=Date.now();if(!n&&!l&&m-x.value<3e4){console.log("ä½¿ç”¨ç¼“å­˜çš„åˆ†æ”¯çŠ¶æ€");return}try{console.log("è·å–åˆ†æ”¯çŠ¶æ€...");let h="/api/branch-status";const le=[];n&&le.push("force=true"),l&&le.push("countOnly=true"),le.length>0&&(h+="?"+le.join("&"));const he=await(await fetch(h)).json();he&&(W.value=he.ahead||0,me.value=he.behind||0,Y.value=he.hasUpstream||!1,S.value=he.upstreamBranch||"",x.value=m,console.log(`åˆ†æ”¯çŠ¶æ€æ›´æ–°ï¼šé¢†å…ˆ ${W.value} ä¸ªæäº¤ï¼Œè½å ${me.value} ä¸ªæäº¤ï¼Œä¸Šæ¸¸åˆ†æ”¯ï¼š${Y.value?S.value:"æ— "}`))}catch(h){console.error("è·å–åˆ†æ”¯çŠ¶æ€å¤±è´¥:",h),W.value=0,me.value=0,Y.value=!1,S.value=""}}async function ae(){const n=Date.now();if(n-M.value<1e3)return console.log("ä½¿ç”¨ç¼“å­˜çš„Gitä»“åº“çŠ¶æ€:",G.value?"æ˜¯":"ä¸æ˜¯"),G.value;try{const m=await(await fetch("/api/current_directory")).json();return G.value=m.isGitRepo===!0,M.value=n,console.log(`å½“å‰ç›®å½•${G.value?"æ˜¯":"ä¸æ˜¯"}Gitä»“åº“`),G.value}catch(l){return console.error("æ£€æŸ¥Gitä»“åº“çŠ¶æ€å¤±è´¥:",l),G.value=!1,M.value=n,!1}}async function ke(n=!1){try{const h=await(await fetch(n?"/api/branch?force=true":"/api/branch")).json();h.branch&&(ve.value=h.branch,console.log(`å½“å‰åˆ†æ”¯æ›´æ–°ä¸º: ${h.branch}${n?" (å¼ºåˆ¶åˆ·æ–°)":""}`))}catch(l){console.error("è·å–åˆ†æ”¯ä¿¡æ¯å¤±è´¥:",l)}}async function xe(){if(G.value)try{console.log("è·å–æ‰€æœ‰åˆ†æ”¯...");const l=await(await fetch("/api/branches")).json();l.branches&&Array.isArray(l.branches)&&(c.value=l.branches,F.value=Date.now(),console.log(`è·å–åˆ°${l.branches.length}ä¸ªåˆ†æ”¯`))}catch(n){console.error("è·å–æ‰€æœ‰åˆ†æ”¯ä¿¡æ¯å¤±è´¥:",n)}}async function Ae(n){console.log("åˆ‡æ¢åˆ°åˆ†æ”¯:",n);try{g.value=!0;const m=await(await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:n})})).json();return m.success?(i({message:`å·²åˆ‡æ¢åˆ°åˆ†æ”¯: ${n}`,type:"success"}),await ke(!0),await O(!0),!0):(i({message:`åˆ‡æ¢åˆ†æ”¯å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return i({message:`åˆ‡æ¢åˆ†æ”¯å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{g.value=!1}}async function Ee(){try{const l=await(await fetch("/api/user-info")).json();l.name&&l.email&&(C.value=l.name,v.value=l.email)}catch(n){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",n)}}async function w(n,l){if(!n.trim())return i({message:"åˆ†æ”¯åç§°ä¸èƒ½ä¸ºç©º",type:"warning"}),!1;try{E.value=!0;const h=await(await fetch("/api/create-branch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newBranchName:n,baseBranch:l||ve.value})})).json();return h.success?(i({message:`å·²åˆ›å»ºå¹¶åˆ‡æ¢åˆ°åˆ†æ”¯: ${n}`,type:"success"}),await ke(!0),await O(!0),await xe(),!0):(i({message:`åˆ›å»ºåˆ†æ”¯å¤±è´¥: ${h.error}`,type:"error"}),!1)}catch(m){return i({message:`åˆ›å»ºåˆ†æ”¯å¤±è´¥: ${m.message}`,type:"error"}),!1}finally{E.value=!1}}async function re(){try{const l=await(await fetch("/api/clear-user-config",{method:"POST"})).json();return l.success?(C.value="",v.value="",i({message:"å·²æ¸…é™¤Gitç”¨æˆ·é…ç½®",type:"success"}),!0):(i({message:`æ¸…é™¤é…ç½®å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`æ¸…é™¤é…ç½®å¤±è´¥: ${n.message}`,type:"error"}),!1}}async function Ye(n,l){try{const h=await(await fetch("/api/restore-user-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:l})})).json();return h.success?(C.value=n,v.value=l,i({message:"å·²æ¢å¤Gitç”¨æˆ·é…ç½®",type:"success"}),!0):(i({message:`æ¢å¤é…ç½®å¤±è´¥: ${h.error}`,type:"error"}),!1)}catch(m){return i({message:`æ¢å¤é…ç½®å¤±è´¥: ${m.message}`,type:"error"}),!1}}async function _e(){if(!G.value)return i({message:"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",type:"warning"}),!1;try{Q.value=!0;const l=await(await fetch("/api/pull",{method:"POST"})).json();return l.success?(i({message:"æ‹‰å–æˆåŠŸ",type:"success"}),await O(),!0):(l.needsMerge?i({message:`éœ€è¦åˆå¹¶æ›´æ”¹: ${l.pullOutput||"å­˜åœ¨å†²çªéœ€è¦æ‰‹åŠ¨è§£å†³"}`,type:"warning",duration:5e3}):i({message:`æ‹‰å–å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`æ‹‰å–å¤±è´¥: ${n.message}`,type:"error"}),!1}finally{Q.value=!1}}async function Ue(){if(!G.value)return i({message:"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",type:"warning"}),!1;try{ee.value=!0;const l=await(await fetch("/api/fetch-all",{method:"POST"})).json();return l.success?(i({message:"è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯ä¿¡æ¯æˆåŠŸ",type:"success"}),await O(),!0):(i({message:`è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯å¤±è´¥: ${n.message}`,type:"error"}),!1}finally{ee.value=!1}}function Me(){B.value&&B.value.disconnect();try{const n=`http://localhost:${ba}`;if(console.log("å°è¯•è¿æ¥Socket.IOæœåŠ¡å™¨:",n),B.value=Ws(n,{reconnectionDelayMax:1e4,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,timeout:2e4,autoConnect:!0,forceNew:!0,transports:["websocket","polling"]}),!B.value){console.error("Socket.IOåˆå§‹åŒ–å¤±è´¥: socketä¸ºnull");return}console.log("Socket.IOåˆå§‹åŒ–æˆåŠŸï¼Œsocket ID:",B.value.id||"æœªè¿æ¥"),B.value.on("connect",()=>{console.log("æˆåŠŸè¿æ¥åˆ°Socket.IOæœåŠ¡å™¨"),X.value&&B.value&&B.value.emit("start_monitoring")}),B.value.on("disconnect",l=>{console.log("ä¸Socket.IOæœåŠ¡å™¨æ–­å¼€è¿æ¥:",l)}),B.value.on("git_status_update",l=>{X.value&&(console.log("æ”¶åˆ°GitçŠ¶æ€æ›´æ–°é€šçŸ¥:",new Date().toLocaleTimeString()),l.porcelain!==void 0&&de(l.porcelain))}),B.value.on("monitoring_status",l=>{console.log("æ–‡ä»¶ç›‘æ§çŠ¶æ€:",l.active?"å·²å¯åŠ¨":"å·²åœæ­¢")}),B.value.on("connect_error",l=>{console.error("Socketè¿æ¥é”™è¯¯:",l.message)}),B.value.on("connect_timeout",()=>{console.error("Socketè¿æ¥è¶…æ—¶")}),B.value.on("reconnect",l=>{var m;console.log(`Socketé‡è¿æˆåŠŸï¼Œå°è¯•æ¬¡æ•°: ${l}`),X.value&&(console.log("é‡è¿åé‡æ–°å‘é€start_monitoringè¯·æ±‚"),(m=B.value)==null||m.emit("start_monitoring"))}),B.value.on("reconnect_attempt",l=>{console.log(`Socketå°è¯•é‡è¿ï¼Œç¬¬ ${l} æ¬¡å°è¯•`)}),B.value.on("reconnect_error",l=>{console.error("Socketé‡è¿é”™è¯¯:",l.message)}),B.value.on("reconnect_failed",()=>{console.error("Socketé‡è¿å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°")}),B.value&&!B.value.connected&&(console.log("Socketæœªè¿æ¥ï¼Œå°è¯•æ‰‹åŠ¨è¿æ¥..."),B.value.connect())}catch(n){console.error("Socket.IOè¿æ¥åˆå§‹åŒ–å¤±è´¥:",n)}}function Re(){if(console.log("toggleAutoUpdateè°ƒç”¨ï¼Œå½“å‰å€¼:",X.value),!B.value){console.error("æ— æ³•åˆ‡æ¢è‡ªåŠ¨æ›´æ–°çŠ¶æ€: socketè¿æ¥ä¸å­˜åœ¨"),i.error("æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè‡ªåŠ¨æ›´æ–°å¯èƒ½ä¸ä¼šç”Ÿæ•ˆ"),console.log("å°è¯•é‡æ–°å»ºç«‹socketè¿æ¥..."),Me(),localStorage.setItem("zen-gitsync-auto-update",X.value.toString());return}try{X.value?(console.log("å‘é€start_monitoringå‘½ä»¤..."),B.value.emit("start_monitoring"),i.success("è‡ªåŠ¨æ›´æ–°å·²å¯ç”¨")):(console.log("å‘é€stop_monitoringå‘½ä»¤..."),B.value.emit("stop_monitoring"),i.info("è‡ªåŠ¨æ›´æ–°å·²ç¦ç”¨")),localStorage.setItem("zen-gitsync-auto-update",X.value.toString()),console.log("å·²ä¿å­˜è‡ªåŠ¨æ›´æ–°è®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨:",X.value)}catch(n){console.error("åˆ‡æ¢è‡ªåŠ¨æ›´æ–°çŠ¶æ€æ—¶å‡ºé”™:",n),i.error(`åˆ‡æ¢è‡ªåŠ¨æ›´æ–°å¤±è´¥: ${n.message}`)}}function de(n){if(n===void 0||n===""){ce.value=[];return}const l=n.split(`
`),m=[];for(const h of l){const le=h.match(/^([ MADRCU\?]{2})\s+(.+)$/);if(le){let ne="";const he=le[1],R=he.charAt(0),Ge=he.charAt(1);R==="A"||R==="M"||R==="D"||R==="R"?ne="added":R===" "&&Ge==="M"?ne="modified":R===" "&&Ge==="D"?ne="deleted":he==="??"?ne="untracked":ne="other",m.push({path:le[2],type:ne})}}ce.value=m}async function Ne(n=!0){if(!G.value){console.log("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè·³è¿‡åŠ è½½æäº¤å†å²");return}try{$.value=!0,console.log("å¼€å§‹åŠ è½½æäº¤å†å²...");const l=new Date().getTime(),h=await(await fetch(`/api/log?page=1&_t=${l}`)).json();h&&h.data&&Array.isArray(h.data)?(U.value=[...h.data],console.log(`æäº¤å†å²åŠ è½½å®Œæˆï¼Œå…± ${U.value.length} æ¡è®°å½•`)):(console.warn("APIè¿”å›çš„æäº¤å†å²æ ¼å¼ä¸æ­£ç¡®:",h),U.value=[])}catch(l){console.error("è·å–æäº¤å†å²å¤±è´¥:",l),n&&i({message:`è·å–æäº¤å†å²å¤±è´¥: ${l.message}`,type:"error"})}finally{$.value=!1}}async function k(){if(!G.value){console.log("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè·³è¿‡åŠ è½½GitçŠ¶æ€");return}try{T.value=!0,await r()}catch(n){console.error("è·å–GitçŠ¶æ€å¤±è´¥:",n),i({message:`è·å–GitçŠ¶æ€å¤±è´¥: ${n.message}`,type:"error"})}finally{T.value=!1}}async function r(){if(console.log("å¼€å§‹è·å–GitçŠ¶æ€(porcelainæ ¼å¼)..."),!G.value){console.log("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè·³è¿‡åŠ è½½GitçŠ¶æ€");return}try{const l=await(await fetch("/api/status_porcelain")).json();l.status!==void 0?de(l.status):ce.value=[]}catch(n){console.error("è·å–GitçŠ¶æ€(porcelain)å¤±è´¥:",n),i({message:`è·å–GitçŠ¶æ€(porcelain)å¤±è´¥: ${n.message}`,type:"error"}),ce.value=[]}}async function K(){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{N.value=!0;const l=await(await fetch("/api/add",{method:"POST"})).json();return l.success?(i({message:"æ–‡ä»¶å·²æ·»åŠ åˆ°æš‚å­˜åŒº",type:"success"}),!0):(i({message:`æ·»åŠ æ–‡ä»¶å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`æ·»åŠ æ–‡ä»¶å¤±è´¥: ${n.message}`,type:"error"}),!1}finally{N.value=!1}}async function J(n){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{N.value=!0;const m=await(await fetch("/api/add-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})})).json();return m.success?(i({message:"æ–‡ä»¶å·²æš‚å­˜",type:"success"}),k(),!0):(i({message:`æš‚å­˜æ–‡ä»¶å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return i({message:`æš‚å­˜æ–‡ä»¶å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{N.value=!1}}async function be(n){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{I.value=!0;const m=await(await fetch("/api/unstage-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:n})})).json();return m.success?(i({message:"å·²å–æ¶ˆæš‚å­˜æ–‡ä»¶",type:"success"}),k(),!0):(i({message:`å–æ¶ˆæš‚å­˜å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return i({message:`å–æ¶ˆæš‚å­˜å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{I.value=!1}}function Ve(n){return new Promise(l=>setTimeout(l,n))}async function fe(n,l=!1){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{ie.value=!0;const h=await(await fetch("/api/commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n,hasNewlines:n.includes(`
`),noVerify:l})})).json();return h.success?(i({message:"æäº¤æˆåŠŸ",type:"success"}),!0):(i({message:`commitChanges æäº¤å¤±è´¥: ${h.error}`,type:"error"}),!1)}catch(m){return i({message:`æäº¤å¤±è´¥: ${m.message}`,type:"error"}),!1}finally{ie.value=!1}}async function ye(){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{D.value=!0;const l=await(await fetch("/api/push",{method:"POST"})).json();return l.success?(i({message:"æ¨é€æˆåŠŸ",type:"success"}),W.value=0,me.value=0,await Promise.all([k(),Ne()]),console.log("æ¨é€æˆåŠŸï¼Œåˆ†æ”¯çŠ¶æ€å·²è®¾ç½®ä¸ºåŒæ­¥ (ahead=0, behind=0)"),!0):(i({message:`æ¨é€å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`æ¨é€å¤±è´¥: ${n.message}`,type:"error"}),!1}finally{D.value=!1}}async function De(n,l={}){if(!G.value)return i({message:"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",type:"warning"}),!1;if(!n)return i({message:"è¯·é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯",type:"warning"}),!1;if(n===ve.value)return i({message:"ä¸èƒ½åˆå¹¶å½“å‰åˆ†æ”¯åˆ°è‡ªèº«",type:"warning"}),!1;try{oe.value=!0;const m=await fetch("/api/merge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:n,...l})}),h=await m.json();return m.status===409?(i({message:"åˆå¹¶åˆ†æ”¯æ—¶å‘ç”Ÿå†²çªï¼Œè¯·æ‰‹åŠ¨è§£å†³",type:"warning",duration:5e3}),!1):h.success?(i({message:`æˆåŠŸåˆå¹¶åˆ†æ”¯ ${n} åˆ° ${ve.value}`,type:"success"}),await k(),await O(),!0):(i({message:`åˆå¹¶åˆ†æ”¯å¤±è´¥: ${h.error}`,type:"error"}),!1)}catch(m){return i({message:`åˆå¹¶åˆ†æ”¯å¤±è´¥: ${m.message}`,type:"error"}),!1}finally{oe.value=!1}}async function Ce(n,l=!1){if(console.log("å¼€å§‹æš‚å­˜å¹¶æäº¤æ“ä½œ..."),!await K())return!1;console.log("æš‚å­˜å®Œæˆï¼Œç­‰å¾…Gitæ“ä½œå®Œæˆ..."),await Ve(Nt),console.log("å¼€å§‹æäº¤æ›´æ”¹...");const h=await fe(n,l);return console.log("æš‚å­˜å¹¶æäº¤æ“ä½œå®Œæˆ"),h}async function $e(n,l=!1){try{if(console.log("å¼€å§‹æš‚å­˜æ–‡ä»¶..."),!await K()||(console.log("æš‚å­˜å®Œæˆï¼Œç­‰å¾…Gitæ“ä½œå®Œæˆ..."),await Ve(Nt),console.log("å¼€å§‹æäº¤æ›´æ”¹..."),!await fe(n,l)))return!1;console.log("æäº¤å®Œæˆï¼Œç­‰å¾…Gitæ“ä½œå®Œæˆ..."),await Ve(Nt),console.log("å¼€å§‹æ¨é€åˆ°è¿œç¨‹...");const le=await ye();return console.log("ä¸€é”®æ¨é€æ“ä½œå®Œæˆï¼ŒçŠ¶æ€å·²ç»Ÿä¸€åˆ·æ–°"),le}catch(m){console.error("ä¸€é”®æ¨é€æ“ä½œå¤±è´¥:",m);try{(await(await fetch("/api/remove-lock",{method:"POST"})).json()).success&&i({message:"æ£€æµ‹åˆ°Gité”å®šæ–‡ä»¶å†²çªï¼Œå·²è‡ªåŠ¨æ¸…ç†ï¼Œè¯·é‡è¯•æ“ä½œ",type:"warning"})}catch(h){console.error("æ¸…ç†é”å®šæ–‡ä»¶å¤±è´¥:",h)}i({message:`æ“ä½œå¤±è´¥: ${m.message}`,type:"error"});try{await Promise.all([k(),Ne(),O()])}catch(h){console.error("åˆ·æ–°çŠ¶æ€å¤±è´¥:",h)}return!1}}async function ot(){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{I.value=!0;const l=await(await fetch("/api/reset-head",{method:"POST"})).json();return l.success?(i({message:"å·²é‡ç½®æš‚å­˜åŒº",type:"success"}),k(),!0):(i({message:`é‡ç½®æš‚å­˜åŒºå¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(n){return i({message:`é‡ç½®æš‚å­˜åŒºå¤±è´¥: ${n.message}`,type:"error"}),!1}finally{I.value=!1}}async function Qe(n){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{I.value=!0;const m=await(await fetch("/api/reset-to-remote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:n})})).json();return m.success?(i({message:`å·²é‡ç½®åˆ†æ”¯ ${n} åˆ°è¿œç¨‹çŠ¶æ€`,type:"success"}),k(),Ne(),!0):(i({message:`é‡ç½®åˆ†æ”¯å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return i({message:`é‡ç½®åˆ†æ”¯å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{I.value=!1}}async function Z(){if(G.value)try{pe.value=!0,console.log("è·å–è¿œç¨‹ä»“åº“åœ°å€...");const l=await(await fetch("/api/remote-url")).json();l.success?(H.value=l.url||"",console.log(`è·å–åˆ°è¿œç¨‹ä»“åº“åœ°å€: ${H.value}`)):(console.warn("è·å–è¿œç¨‹ä»“åº“åœ°å€å¤±è´¥:",l.error),H.value="")}catch(n){console.error("è·å–è¿œç¨‹ä»“åº“åœ°å€å¤±è´¥:",n),H.value=""}finally{pe.value=!1}}async function nt(){if(!H.value)return i({message:"æ²¡æœ‰å¯å¤åˆ¶çš„è¿œç¨‹ä»“åº“åœ°å€",type:"warning"}),!1;try{return await navigator.clipboard.writeText(H.value),i({message:"å·²å¤åˆ¶è¿œç¨‹ä»“åº“åœ°å€",type:"success"}),!0}catch(n){return console.error("å¤åˆ¶è¿œç¨‹ä»“åº“åœ°å€å¤±è´¥:",n),i({message:`å¤åˆ¶å¤±è´¥: ${n.message}`,type:"error"}),!1}}ht(()=>{const n=localStorage.getItem("zen-gitsync-auto-update");n!==null&&(X.value=n==="true"),Me()});function Xe(){B.value&&(B.value.disconnect(),B.value=null)}ps(()=>{Xe()});async function qe(){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),[];try{ue.value=!0;const l=await(await fetch("/api/stash-list")).json();return l.success?(se.value=l.stashes,l.stashes):(i.error(`è·å–stashåˆ—è¡¨å¤±è´¥: ${l.error}`),[])}catch(n){return console.error("è·å–stashåˆ—è¡¨å¤±è´¥:",n),i.error(`è·å–stashåˆ—è¡¨å¤±è´¥: ${n.message}`),[]}finally{ue.value=!1}}async function et(n,l=!1,m=!0){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{P.value=!0;const le=await(await fetch("/api/stash-save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n,includeUntracked:l,excludeLocked:m})})).json();return le.success?(i.success(le.message),await qe(),await k(),!0):(i.warning(le.message),!1)}catch(h){return console.error("ä¿å­˜stashå¤±è´¥:",h),i.error(`ä¿å­˜stashå¤±è´¥: ${h.message}`),!1}finally{P.value=!1}}async function Ke(n,l=!1){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{V.value=!0;const m=await fetch("/api/stash-apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stashId:n,pop:l})}),h=await m.json();return m.status===409?(i.warning("åº”ç”¨stashæ—¶å‘ç”Ÿå†²çªï¼Œè¯·æ‰‹åŠ¨è§£å†³"),!1):h.success?(i.success(h.message),await qe(),await k(),!0):(i.error(`åº”ç”¨stashå¤±è´¥: ${h.error}`),!1)}catch(m){return console.error("åº”ç”¨stashå¤±è´¥:",m),i.error(`åº”ç”¨stashå¤±è´¥: ${m.message}`),!1}finally{V.value=!1}}async function Pe(n){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{p.value=!0;const m=await(await fetch("/api/stash-drop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stashId:n})})).json();return m.success?(i.success(m.message),await qe(),!0):(i.error(`åˆ é™¤stashå¤±è´¥: ${m.error}`),!1)}catch(l){return console.error("åˆ é™¤stashå¤±è´¥:",l),i.error(`åˆ é™¤stashå¤±è´¥: ${l.message}`),!1}finally{p.value=!1}}async function _t(){if(!G.value)return i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{p.value=!0;const l=await(await fetch("/api/stash-clear",{method:"POST"})).json();return l.success?(i.success(l.message),se.value=[],!0):(i.error(`æ¸…ç©ºstashå¤±è´¥: ${l.error}`),!1)}catch(n){return console.error("æ¸…ç©ºstashå¤±è´¥:",n),i.error(`æ¸…ç©ºstashå¤±è´¥: ${n.message}`),!1}finally{p.value=!1}}return{currentBranch:ve,allBranches:c,userName:C,userEmail:v,isChangingBranch:g,isCreatingBranch:E,isGitRepo:G,lastCheckedTime:M,branchAhead:W,branchBehind:me,hasUpstream:Y,upstreamBranch:S,lastBranchStatusTime:x,lastBranchesTime:F,remoteUrl:H,isLoadingRemoteUrl:pe,stashes:se,isLoadingStashes:ue,isApplyingStash:V,isDroppingStash:p,isSavingStash:P,log:U,status:te,fileList:ce,isLoadingLog:$,isLoadingStatus:T,isAddingFiles:N,isCommiting:ie,isResetting:I,autoUpdateEnabled:X,isPushing:D,isGitPulling:Q,isGitFetching:ee,isGitMerging:oe,$reset:j,checkGitRepo:ae,getCurrentBranch:ke,getAllBranches:xe,changeBranch:Ae,getUserInfo:Ee,createBranch:w,clearUserConfig:re,restoreUserConfig:Ye,getBranchStatus:O,gitPull:_e,gitFetchAll:Ue,initSocketConnection:Me,toggleAutoUpdate:Re,parseStatusPorcelain:de,fetchLog:Ne,fetchStatus:k,fetchStatusPorcelain:r,addToStage:K,addFileToStage:J,unstageFile:be,commitChanges:fe,pushToRemote:ye,addAndCommit:Ce,addCommitAndPush:$e,resetHead:ot,resetToRemote:Qe,getRemoteUrl:Z,copyRemoteUrl:nt,mergeBranch:De,getStashList:qe,saveStash:et,applyStash:Ke,dropStash:Pe,clearAllStashes:_t,socket:B,disconnectSocket:Xe}}),es=fs("config",()=>{const ve=d(""),c=d([]),C=d([]),v=d([]),g=d([]),E=d(!1),G=d(!1),M=ze(()=>({defaultCommitMessage:ve.value,descriptionTemplates:c.value,scopeTemplates:C.value,messageTemplates:v.value,lockedFiles:g.value}));async function H(){if(G.value&&!E.value)return console.log("ä½¿ç”¨ç¼“å­˜çš„é…ç½®ä¿¡æ¯"),M.value;try{E.value=!0,console.log("åŠ è½½é…ç½®ä¿¡æ¯...");const x=await(await fetch("/api/config/getConfig")).json();return ve.value=x.defaultCommitMessage||"",c.value=x.descriptionTemplates||[],C.value=x.scopeTemplates||[],v.value=x.messageTemplates||[],g.value=x.lockedFiles||[],G.value=!0,console.log("é…ç½®ä¿¡æ¯åŠ è½½å®Œæˆ"),M.value}catch(S){return console.error("åŠ è½½é…ç½®å¤±è´¥:",S),i.error(`åŠ è½½é…ç½®å¤±è´¥: ${S.message}`),null}finally{E.value=!1}}async function pe(S){try{const F=await(await fetch("/api/config/saveDefaultMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({defaultCommitMessage:S})})).json();return F.success?(ve.value=S,i.success("é»˜è®¤æäº¤ä¿¡æ¯å·²ä¿å­˜"),!0):(i.error(`ä¿å­˜å¤±è´¥: ${F.error}`),!1)}catch(x){return i.error(`ä¿å­˜å¤±è´¥: ${x.message}`),!1}}async function D(S,x){try{const X=await(await fetch("/api/config/save-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:S,type:x})})).json();return X.success?(x==="description"?c.value.includes(S)||c.value.push(S):x==="scope"?C.value.includes(S)||C.value.push(S):x==="message"&&(v.value.includes(S)||v.value.push(S)),i.success("æ¨¡æ¿å·²ä¿å­˜"),!0):(i.error(`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${X.error}`),!1)}catch(F){return i.error(`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${F.message}`),!1}}async function Q(S,x){try{const X=await(await fetch("/api/config/delete-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:S,type:x})})).json();return X.success?(x==="description"?c.value=c.value.filter(B=>B!==S):x==="scope"?C.value=C.value.filter(B=>B!==S):x==="message"&&(v.value=v.value.filter(B=>B!==S)),i.success("æ¨¡æ¿å·²åˆ é™¤"),!0):(i.error(`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${X.error}`),!1)}catch(F){return i.error(`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${F.message}`),!1}}async function ee(S,x,F){try{const B=await(await fetch("/api/config/update-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldTemplate:S,newTemplate:x,type:F})})).json();if(B.success){if(F==="description"){const U=c.value.indexOf(S);U!==-1&&(c.value[U]=x)}else if(F==="scope"){const U=C.value.indexOf(S);U!==-1&&(C.value[U]=x)}else if(F==="message"){const U=v.value.indexOf(S);U!==-1&&(v.value[U]=x)}return i.success("æ¨¡æ¿å·²æ›´æ–°"),!0}else return i.error(`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${B.error}`),!1}catch(X){return i.error(`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${X.message}`),!1}}async function oe(){try{const x=await(await fetch("/api/locked-files")).json();return x.success?(g.value=x.lockedFiles||[],x.lockedFiles):(i.error(`åŠ è½½é”å®šæ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${x.error}`),[])}catch(S){return console.error("åŠ è½½é”å®šæ–‡ä»¶åˆ—è¡¨å¤±è´¥:",S),i.error(`åŠ è½½é”å®šæ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${S.message}`),[]}}async function W(S){try{const F=await(await fetch("/api/lock-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S})})).json();return F.success?(await oe(),i.success(`æ–‡ä»¶å·²é”å®š: ${S}`),!0):(i.error(`é”å®šæ–‡ä»¶å¤±è´¥: ${F.error}`),!1)}catch(x){return console.error("é”å®šæ–‡ä»¶å¤±è´¥:",x),i.error(`é”å®šæ–‡ä»¶å¤±è´¥: ${x.message}`),!1}}async function me(S){try{const F=await(await fetch("/api/unlock-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S})})).json();return F.success?(await oe(),i.success(`æ–‡ä»¶å·²è§£é”: ${S}`),!0):(i.error(`è§£é”æ–‡ä»¶å¤±è´¥: ${F.error}`),!1)}catch(x){return console.error("è§£é”æ–‡ä»¶å¤±è´¥:",x),i.error(`è§£é”æ–‡ä»¶å¤±è´¥: ${x.message}`),!1}}async function Y(S){try{const F=await(await fetch("/api/check-file-lock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S})})).json();return F.success?F.isLocked:(console.error("æ£€æŸ¥æ–‡ä»¶é”å®šçŠ¶æ€å¤±è´¥:",F.error),!1)}catch(x){return console.error("æ£€æŸ¥æ–‡ä»¶é”å®šçŠ¶æ€å¤±è´¥:",x),!1}}return{defaultCommitMessage:ve,descriptionTemplates:c,scopeTemplates:C,messageTemplates:v,lockedFiles:g,isLoading:E,isLoaded:G,config:M,loadConfig:H,saveDefaultMessage:pe,saveTemplate:D,deleteTemplate:Q,updateTemplate:ee,loadLockedFiles:oe,lockFile:W,unlockFile:me,isFileLocked:Y}}),Ca={class:"card"},Sa={class:"status-header"},Ta={class:"header-actions"},xa=["element-loading-text"],Va={key:0,class:"status-box"},La={key:1,class:"status-box-wrap"},za={key:0,class:"branch-status-info"},Ba={class:"branch-sync-status"},Ga={class:"sync-status-content"},Ra={class:"status-badges"},Da={class:"badge-content"},Fa={class:"badge-content"},ja={key:1,class:"file-list-container"},Ua={key:0,class:"file-group"},Ma={class:"file-list"},Oa=["onClick"],Aa={class:"file-info"},Ea={class:"file-name-section"},Pa=["title"],Ha={class:"file-directory"},Ia={class:"file-actions"},Na={key:1,class:"file-group"},Ja={class:"file-list"},Wa=["onClick"],qa={class:"file-info"},Ya={class:"file-name-section"},Xa=["title"],Ka={class:"file-directory"},Za={class:"file-actions"},Qa={key:2,class:"file-group"},el={class:"file-list"},tl=["onClick"],sl={class:"file-info"},al={class:"file-name-section"},ll=["title"],ol={class:"file-directory"},nl={class:"file-actions"},il={key:2,class:"empty-status"},rl={class:"empty-icon"},cl={class:"diff-content"},ul=["innerHTML"],dl={key:1,class:"no-diff"},fl={class:"file-navigation"},pl={class:"file-counter"},vl={class:"lock-feature-description"},ml={class:"description-header"},gl={key:0,class:"empty-locked-files"},yl={class:"empty-icon"},hl={key:1,class:"locked-files-list"},_l={class:"locked-files-header"},wl={class:"locked-file-items"},kl={class:"file-info"},$l={class:"file-path-container"},bl={class:"file-name"},Cl={class:"file-directory"},Sl={class:"file-actions"},Tl={class:"dialog-footer"},xl=St({__name:"GitStatus",props:{initialDirectory:{type:String,default:""}},setup(ve,{expose:c}){const C=ve,v=yt(),g=es(),E=ze(()=>v.isLoadingStatus),G=d(""),M=d(""),H=d(!1),pe=d(!1),D=d(-1),Q=d(!1),ee=d({staged:!1,unstaged:!1,untracked:!1}),oe=d(C.initialDirectory||"");async function W(){try{if(!oe.value){const p=await(await fetch("/api/current_directory")).json();oe.value=p.directory||"æœªçŸ¥ç›®å½•"}if(!v.isGitRepo)return;await v.fetchStatus(),await v.getBranchStatus(),i({message:"Git çŠ¶æ€å·²åˆ·æ–°",type:"success"})}catch(V){i({message:"åˆ·æ–°å¤±è´¥: "+V.message,type:"error"})}}function me(V){if(!V)return"";const p=V.split(`
`);function P(j){return j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}return p.map(j=>{const O=P(j);return j.startsWith("diff --git")?`<div class="diff-header">${O}</div>`:j.startsWith("---")?`<div class="diff-old-file">${O}</div>`:j.startsWith("+++")?`<div class="diff-new-file">${O}</div>`:j.startsWith("@@")?`<div class="diff-hunk-header">${O}</div>`:j.startsWith("+")?`<div class="diff-added">${O}</div>`:j.startsWith("-")?`<div class="diff-removed">${O}</div>`:`<div class="diff-context">${O}</div>`}).join("")}async function Y(V){try{pe.value=!0,G.value=V,D.value=v.fileList.findIndex(P=>P.path===V);const p=v.fileList[D.value];if(p&&p.type==="untracked"){try{const j=await(await fetch(`/api/file-content?file=${encodeURIComponent(V)}`)).json();j.success&&j.content?M.value=`diff --git a/${V} b/${V}
æ–°æ–‡ä»¶: ${V}
--- /dev/null
+++ b/${V}
@@ -0,0 +1,${j.content.split(`
`).length} @@
`+j.content.split(`
`).map(O=>`+${O}`).join(`
`):M.value=`è¿™æ˜¯ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå°šæœªè¢«Gitè·Ÿè¸ªã€‚
æ·»åŠ åˆ°æš‚å­˜åŒºåå¯ä»¥æäº¤è¯¥æ–‡ä»¶ã€‚`}catch(P){console.error("è·å–æœªè·Ÿè¸ªæ–‡ä»¶å†…å®¹å¤±è´¥:",P),M.value=`è¿™æ˜¯ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå°šæœªè¢«Gitè·Ÿè¸ªã€‚
æ·»åŠ åˆ°æš‚å­˜åŒºåå¯ä»¥æäº¤è¯¥æ–‡ä»¶ã€‚`}H.value=!0}else if(p&&p.type==="added"){const j=await(await fetch(`/api/diff-cached?file=${encodeURIComponent(V)}`)).json();M.value=j.diff||"æ²¡æœ‰å˜æ›´",H.value=!0}else{const j=await(await fetch(`/api/diff?file=${encodeURIComponent(V)}`)).json();M.value=j.diff||"æ²¡æœ‰å˜æ›´",H.value=!0}}catch(p){i({message:"è·å–æ–‡ä»¶å·®å¼‚å¤±è´¥: "+p.message,type:"error"}),M.value="è·å–å·®å¼‚å¤±è´¥: "+p.message}finally{pe.value=!1}}async function S(){if(v.fileList.length===0||D.value<=0)return;const V=D.value-1,p=v.fileList[V];await Y(p.path)}async function x(){if(v.fileList.length===0||D.value>=v.fileList.length-1)return;const V=D.value+1,p=v.fileList[V];await Y(p.path)}function F(V){Y(V.path)}async function X(V){await v.addFileToStage(V)}async function B(V){await v.unstageFile(V)}async function U(){await te()}async function te(){try{if(!v.isGitRepo)return;await v.fetchStatus(),i({message:"Git æ–‡ä»¶çŠ¶æ€å·²åˆ·æ–°",type:"success"})}catch(V){i({message:"åˆ·æ–°å¤±è´¥: "+V.message,type:"error"})}}async function ce(){try{await v.gitPull(),await W()}catch(V){console.error("æ‹‰å–æ“ä½œå‘ç”Ÿé”™è¯¯:",V)}}async function $(){try{await v.gitFetchAll(),await W()}catch(V){console.error("è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯æ“ä½œå‘ç”Ÿé”™è¯¯:",V)}}async function T(V){try{await Ie.confirm(`ç¡®å®šè¦æ’¤å›æ–‡ä»¶ "${V}" çš„æ‰€æœ‰ä¿®æ”¹å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚`,"æ’¤å›ä¿®æ”¹",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});const P=await(await fetch("/api/revert_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:V})})).json();P.success?(i.success("å·²æ’¤å›æ–‡ä»¶ä¿®æ”¹"),await W()):i.error(P.error?`æ’¤å›å¤±è´¥: ${P.error}`:"æ’¤å›æ–‡ä»¶ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•")}catch(p){if(p==="cancel"||p.message==="cancel")return;const P=p.message||"æœªçŸ¥é”™è¯¯";P!=="undefined"?i.error(`æ’¤å›æ–‡ä»¶ä¿®æ”¹å¤±è´¥: ${P}`):i.error("æ’¤å›æ–‡ä»¶ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•")}}function N(V){const p=V.split("/");return p[p.length-1]}function ie(V){const p=V.split("/");return p.length<=1?"":p.slice(0,-1).join("/")}function I(V){const p=V.replace(/\\/g,"/"),P=g.lockedFiles.some(j=>{const O=j.replace(/\\/g,"/");return p===O});return(V==="test/2.txt"||V==="2.txt")&&console.log("æ£€æŸ¥æ–‡ä»¶é”å®šçŠ¶æ€:",{filePath:V,normalizedPath:p,lockedFiles:g.lockedFiles,normalizedLockedFiles:g.lockedFiles.map(j=>j.replace(/\\/g,"/")),isLocked:P}),P}function se(V){I(V)?g.unlockFile(V):g.lockFile(V)}function ue(V){ee.value[V]=!ee.value[V]}return ht(()=>{W(),g.loadConfig(),g.loadLockedFiles()}),Ze(()=>v.autoUpdateEnabled,(V,p)=>{console.log(`è‡ªåŠ¨æ›´æ–°çŠ¶æ€å˜æ›´: ${p} -> ${V}`),v.toggleAutoUpdate()},{immediate:!1}),c({refreshStatus:U}),(V,p)=>{const P=vs,j=qt,O=je,ae=Tt,ke=xt,xe=Vt,Ae=Xs,Ee=Yt;return f(),_(we,null,[e("div",Ca,[e("div",Sa,[p[8]||(p[8]=e("h2",null,"Git çŠ¶æ€",-1)),e("div",Ta,[t(j,{content:o(v).autoUpdateEnabled?"ç¦ç”¨è‡ªåŠ¨æ›´æ–°æ–‡ä»¶çŠ¶æ€":"å¯ç”¨è‡ªåŠ¨æ›´æ–°æ–‡ä»¶çŠ¶æ€",placement:"top","hide-after":1e3},{default:a(()=>[t(P,{modelValue:o(v).autoUpdateEnabled,"onUpdate:modelValue":p[0]||(p[0]=w=>o(v).autoUpdateEnabled=w),style:{"--el-switch-on-color":"#67C23A","--el-switch-off-color":"#909399","margin-right":"10px"},"inline-prompt":"","active-icon":o(ms),"inactive-icon":o(Wt),class:"auto-update-switch"},null,8,["modelValue","active-icon","inactive-icon"])]),_:1},8,["content"]),t(j,{content:"Git Pull (æ‹‰å–è¿œç¨‹æ›´æ–°)",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:"primary",icon:o(gs),circle:"",size:"small",onClick:ce,loading:o(v).isGitPulling,disabled:!o(v).hasUpstream},null,8,["icon","loading","disabled"])]),_:1}),t(j,{content:"Git Fetch All (è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯)",placement:"top","hide-after":1e3},{default:a(()=>[He(t(O,{type:"primary",icon:o(ys),circle:"",size:"small",onClick:$,loading:o(v).isGitFetching},null,8,["icon","loading"]),[[dt,!1]])]),_:1}),o(g).lockedFiles.length>0?(f(),q(j,{key:0,content:"ç®¡ç†é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:"warning",circle:"",size:"small",onClick:p[1]||(p[1]=w=>Q.value=!0)},{default:a(()=>[t(ae,null,{default:a(()=>[t(o(lt))]),_:1})]),_:1})]),_:1})):A("",!0),t(j,{content:"åˆ·æ–°çŠ¶æ€",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:"primary",icon:o(qs),circle:"",size:"small",onClick:U,loading:E.value},null,8,["icon","loading"])]),_:1})])]),He((f(),_("div",{class:"card-content","element-loading-text":o(v).isGitPulling?"æ­£åœ¨æ‹‰å–ä»£ç ...":"æ­£åœ¨è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯..."},[o(v).isGitRepo?(f(),_("div",La,[o(v).hasUpstream&&(o(v).branchAhead>0||o(v).branchBehind>0)?(f(),_("div",za,[e("div",Ba,[e("div",Ga,[t(j,{content:"æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„çŠ¶æ€å¯¹æ¯”",placement:"top"},{default:a(()=>[e("div",Ra,[o(v).branchAhead>0?(f(),q(ke,{key:0,size:"small",type:"warning",class:"status-badge"},{default:a(()=>[e("span",Da,[t(ae,null,{default:a(()=>[t(o(hs))]),_:1}),y(" ä½ çš„åˆ†æ”¯é¢†å…ˆ 'origin/"+L(o(v).currentBranch)+"' "+L(o(v).branchAhead)+" ä¸ªæäº¤ ",1)])]),_:1})):A("",!0),o(v).branchBehind>0?(f(),q(ke,{key:1,size:"small",type:"info",class:"status-badge"},{default:a(()=>[e("span",Fa,[t(ae,null,{default:a(()=>[t(o(mt))]),_:1}),y(" ä½ çš„åˆ†æ”¯è½å 'origin/"+L(o(v).currentBranch)+"' "+L(o(v).branchBehind)+" ä¸ªæäº¤ ",1)])]),_:1})):A("",!0)])]),_:1})])])])):A("",!0),o(v).fileList.length?(f(),_("div",ja,[o(v).fileList.some(w=>w.type==="added")?(f(),_("div",Ua,[e("div",{class:"file-group-header",onClick:p[2]||(p[2]=w=>ue("staged"))},[t(ae,{class:ge(["collapse-icon",{collapsed:ee.value.staged}])},{default:a(()=>[t(o(mt))]),_:1},8,["class"]),p[10]||(p[10]=e("span",null,"å·²æš‚å­˜çš„æ›´æ”¹",-1))]),He(e("div",Ma,[(f(!0),_(we,null,Be(o(v).fileList.filter(w=>w.type==="added"),w=>(f(),_("div",{key:w.path,class:"file-item",onClick:re=>F(w)},[e("div",Aa,[e("div",{class:ge(["file-status-indicator",["added",{locked:I(w.path)}]])},null,2),e("div",Ea,[e("span",{class:ge(["file-name",{"locked-file-name":I(w.path)}])},[y(L(N(w.path))+" ",1),I(w.path)?(f(),q(ae,{key:0,class:"lock-indicator"},{default:a(()=>[t(o(lt))]),_:1})):A("",!0)],2)]),e("div",{class:"file-path-section",title:ie(w.path)},[e("span",Ha,L(ie(w.path)),1)],8,Pa)]),e("div",Ia,[t(j,{content:I(w.path)?"è§£é”æ–‡ä»¶":"é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:I(w.path)?"danger":"info",size:"small",circle:"",onClick:We(re=>se(w.path),["stop"]),class:"file-action-btn"},{default:a(()=>[t(ae,{size:"12"},{default:a(()=>[(f(),q(gt(I(w.path)?o(lt):o(Rt))))]),_:2},1024)]),_:2},1032,["type","onClick"])]),_:2},1032,["content"]),t(j,{content:"å–æ¶ˆæš‚å­˜",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:"warning",size:"small",circle:"",onClick:We(re=>B(w.path),["stop"]),class:"file-action-btn"},{default:a(()=>p[11]||(p[11]=[y("-")])),_:2},1032,["onClick"])]),_:2},1024)])],8,Oa))),128))],512),[[dt,!ee.value.staged]])])):A("",!0),o(v).fileList.some(w=>w.type==="modified"||w.type==="deleted")?(f(),_("div",Na,[e("div",{class:"file-group-header",onClick:p[3]||(p[3]=w=>ue("unstaged"))},[t(ae,{class:ge(["collapse-icon",{collapsed:ee.value.unstaged}])},{default:a(()=>[t(o(mt))]),_:1},8,["class"]),p[12]||(p[12]=e("span",null,"æœªæš‚å­˜çš„æ›´æ”¹",-1))]),He(e("div",Ja,[(f(!0),_(we,null,Be(o(v).fileList.filter(w=>w.type==="modified"||w.type==="deleted"),w=>(f(),_("div",{key:w.path,class:"file-item",onClick:re=>F(w)},[e("div",qa,[e("div",{class:ge(["file-status-indicator",[w.type,{locked:I(w.path)}]])},null,2),e("div",Ya,[e("span",{class:ge(["file-name",{"locked-file-name":I(w.path)}])},[y(L(N(w.path))+" ",1),I(w.path)?(f(),q(ae,{key:0,class:"lock-indicator"},{default:a(()=>[t(o(lt))]),_:1})):A("",!0)],2)]),e("div",{class:"file-path-section",title:ie(w.path)},[e("span",Ka,L(ie(w.path)),1)],8,Xa)]),e("div",Za,[t(j,{content:I(w.path)?"è§£é”æ–‡ä»¶":"é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:I(w.path)?"danger":"info",size:"small",circle:"",onClick:We(re=>se(w.path),["stop"]),class:"file-action-btn"},{default:a(()=>[t(ae,{size:"12"},{default:a(()=>[(f(),q(gt(I(w.path)?o(lt):o(Rt))))]),_:2},1024)]),_:2},1032,["type","onClick"])]),_:2},1032,["content"]),t(j,{content:"æ·»åŠ åˆ°æš‚å­˜åŒº",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:"success",size:"small",circle:"",onClick:We(re=>X(w.path),["stop"]),class:"file-action-btn"},{default:a(()=>p[13]||(p[13]=[y("+")])),_:2},1032,["onClick"])]),_:2},1024),t(j,{content:"æ’¤å›ä¿®æ”¹",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:"danger",size:"small",icon:o(Xt),circle:"",onClick:We(re=>T(w.path),["stop"]),class:"file-action-btn"},null,8,["icon","onClick"])]),_:2},1024)])],8,Wa))),128))],512),[[dt,!ee.value.unstaged]])])):A("",!0),o(v).fileList.some(w=>w.type==="untracked")?(f(),_("div",Qa,[e("div",{class:"file-group-header",onClick:p[4]||(p[4]=w=>ue("untracked"))},[t(ae,{class:ge(["collapse-icon",{collapsed:ee.value.untracked}])},{default:a(()=>[t(o(mt))]),_:1},8,["class"]),p[14]||(p[14]=e("span",null,"æœªè·Ÿè¸ªçš„æ–‡ä»¶",-1))]),He(e("div",el,[(f(!0),_(we,null,Be(o(v).fileList.filter(w=>w.type==="untracked"),w=>(f(),_("div",{key:w.path,class:"file-item",onClick:re=>F(w)},[e("div",sl,[e("div",{class:ge(["file-status-indicator",["untracked",{locked:I(w.path)}]])},null,2),e("div",al,[e("span",{class:ge(["file-name",{"locked-file-name":I(w.path)}])},[y(L(N(w.path))+" ",1),I(w.path)?(f(),q(ae,{key:0,class:"lock-indicator"},{default:a(()=>[t(o(lt))]),_:1})):A("",!0)],2)]),e("div",{class:"file-path-section",title:ie(w.path)},[e("span",ol,L(ie(w.path)),1)],8,ll)]),e("div",nl,[t(j,{content:I(w.path)?"è§£é”æ–‡ä»¶":"é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:I(w.path)?"danger":"info",size:"small",circle:"",onClick:We(re=>se(w.path),["stop"]),class:"file-action-btn"},{default:a(()=>[t(ae,{size:"12"},{default:a(()=>[(f(),q(gt(I(w.path)?o(lt):o(Rt))))]),_:2},1024)]),_:2},1032,["type","onClick"])]),_:2},1032,["content"]),t(j,{content:"æ·»åŠ åˆ°æš‚å­˜åŒº",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:"success",size:"small",circle:"",onClick:We(re=>X(w.path),["stop"]),class:"file-action-btn"},{default:a(()=>p[15]||(p[15]=[y("+")])),_:2},1032,["onClick"])]),_:2},1024),t(j,{content:"åˆ é™¤æ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:"danger",size:"small",icon:o(Wt),circle:"",onClick:We(re=>T(w.path),["stop"]),class:"file-action-btn"},null,8,["icon","onClick"])]),_:2},1024)])],8,tl))),128))],512),[[dt,!ee.value.untracked]])])):A("",!0)])):o(v).isGitRepo?(f(),_("div",il,[e("div",rl,[t(ae,null,{default:a(()=>[t(o(_s))]),_:1})]),p[16]||(p[16]=e("div",{class:"empty-text"},"æ²¡æœ‰æ£€æµ‹åˆ°ä»»ä½•æ›´æ”¹",-1)),p[17]||(p[17]=e("div",{class:"empty-subtext"},"å·¥ä½œåŒºæ˜¯å¹²å‡€çš„",-1))])):A("",!0)])):(f(),_("div",Va,p[9]||(p[9]=[e("div",{class:"empty-status"},[e("p",null,"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“")],-1)])))],8,xa)),[[Ee,o(v).isGitPulling||o(v).isGitFetching]])]),t(xe,{modelValue:H.value,"onUpdate:modelValue":p[5]||(p[5]=w=>H.value=w),title:`æ–‡ä»¶å·®å¼‚: ${G.value}`,width:"80%","destroy-on-close":"",class:"diff-dialog"},{footer:a(()=>[e("div",fl,[t(O,{type:"primary",icon:o(Ys),onClick:S,disabled:D.value<=0||o(v).fileList.length===0,plain:"",class:"nav-button"},{default:a(()=>p[18]||(p[18]=[y(" ä¸Šä¸€ä¸ªæ–‡ä»¶ ")])),_:1},8,["icon","disabled"]),e("div",pl,[t(ke,{type:"info",effect:"plain",class:"counter-tag"},{default:a(()=>[y(L(D.value+1)+" / "+L(o(v).fileList.length),1)]),_:1})]),t(O,{type:"primary",icon:o(is),onClick:x,disabled:D.value>=o(v).fileList.length-1||o(v).fileList.length===0,plain:"",class:"nav-button"},{icon:a(()=>[t(ae,{class:"el-icon--right"},{default:a(()=>[t(o(is))]),_:1})]),default:a(()=>[p[19]||(p[19]=y(" ä¸‹ä¸€ä¸ªæ–‡ä»¶ "))]),_:1},8,["icon","disabled"])])]),default:a(()=>[He((f(),_("div",cl,[M.value?(f(),_("div",{key:0,innerHTML:me(M.value),class:"diff-formatted"},null,8,ul)):(f(),_("div",dl,"è¯¥æ–‡ä»¶æ²¡æœ‰å·®å¼‚æˆ–æ˜¯æ–°æ–‡ä»¶"))])),[[Ee,pe.value]])]),_:1},8,["modelValue","title"]),t(xe,{modelValue:Q.value,"onUpdate:modelValue":p[7]||(p[7]=w=>Q.value=w),title:"é”å®šæ–‡ä»¶ç®¡ç†",width:"700px","destroy-on-close":""},{footer:a(()=>[e("span",Tl,[t(O,{onClick:p[6]||(p[6]=w=>Q.value=!1)},{default:a(()=>p[25]||(p[25]=[y("å…³é—­")])),_:1})])]),default:a(()=>[e("div",vl,[e("div",ml,[t(ae,{class:"description-icon"},{default:a(()=>[t(o(rs))]),_:1}),p[20]||(p[20]=e("span",{class:"description-title"},"æ–‡ä»¶é”å®šåŠŸèƒ½è¯´æ˜",-1))]),p[21]||(p[21]=e("div",{class:"description-content"},[e("p",null,[e("strong",null,"ğŸ”’ é”å®šæ–‡ä»¶çš„ä½œç”¨ï¼š")]),e("ul",null,[e("li",null,"é”å®šçš„æ–‡ä»¶åœ¨æ‰§è¡Œ Git æäº¤æ—¶ä¼šè¢«è‡ªåŠ¨è·³è¿‡ï¼Œä¸ä¼šè¢«æ·»åŠ åˆ°æš‚å­˜åŒº"),e("li",null,"é€‚ç”¨äºä¸´æ—¶æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€æˆ–ä¸æƒ³æäº¤çš„å¼€å‘ä¸­æ–‡ä»¶"),e("li",null,"é”å®šçŠ¶æ€ä¼šæŒä¹…ä¿å­˜ï¼Œç›´åˆ°æ‰‹åŠ¨è§£é”")]),e("p",null,[e("strong",null,"ğŸ’¡ ä½¿ç”¨åœºæ™¯ï¼š")]),e("ul",null,[e("li",null,"å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æµ‹è¯•æ–‡ä»¶"),e("li",null,"æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€APIå¯†é’¥ç­‰ï¼‰"),e("li",null,"æ­£åœ¨å¼€å‘ä½†è¿˜ä¸æƒ³æäº¤çš„åŠŸèƒ½æ–‡ä»¶")])],-1))]),t(Ae),o(g).lockedFiles.length===0?(f(),_("div",gl,[e("div",yl,[t(ae,null,{default:a(()=>[t(o(lt))]),_:1})]),p[22]||(p[22]=e("p",null,"å½“å‰æ²¡æœ‰é”å®šçš„æ–‡ä»¶",-1)),p[23]||(p[23]=e("p",{class:"empty-tip"},"æ‚¨å¯ä»¥åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­ç‚¹å‡»é”å®šæŒ‰é’®æ¥é”å®šæ–‡ä»¶",-1))])):(f(),_("div",hl,[e("div",_l,[e("span",null,"ğŸ”’ å·²é”å®š "+L(o(g).lockedFiles.length)+" ä¸ªæ–‡ä»¶",1),t(j,{content:"è¿™äº›æ–‡ä»¶åœ¨æäº¤æ—¶ä¼šè¢«è‡ªåŠ¨è·³è¿‡",placement:"top"},{default:a(()=>[t(ae,{class:"info-icon"},{default:a(()=>[t(o(rs))]),_:1})]),_:1})]),e("div",wl,[(f(!0),_(we,null,Be(o(g).lockedFiles,w=>(f(),_("div",{key:w,class:"locked-file-item"},[e("div",kl,[p[24]||(p[24]=e("div",{class:"file-status-indicator locked"},null,-1)),e("div",$l,[e("span",bl,L(N(w)),1),e("span",Cl,L(ie(w)),1)])]),e("div",Sl,[t(j,{content:"è§£é”æ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[t(O,{type:"danger",size:"small",circle:"",onClick:re=>o(g).unlockFile(w)},{default:a(()=>[t(ae,null,{default:a(()=>[t(o(Rt))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])]))]),_:1},8,["modelValue"])],64)}}}),Lt=(ve,c)=>{const C=ve.__vccOpts||ve;for(const[v,g]of c)C[v]=g;return C},Vl=Lt(xl,[["__scopeId","data-v-15b61579"]]),Ll={class:"card-header"},zl={key:0,class:"pushing-indicator"},Bl={class:"pushing-text"},Gl={key:0,class:"push-success-indicator"},Rl={class:"card-content"},Dl={class:"layout-container"},Fl={key:0,class:"git-config-warning"},jl={key:1,class:"commit-section"},Ul={class:"commit-options"},Ml={class:"options-row"},Ol={class:"commit-mode-toggle"},Al={class:"no-verify-toggle"},El={key:0,class:"commit-form"},Pl={class:"description-container"},Hl={class:"preview-section"},Il={class:"preview-content code-command"},Nl={class:"form-bottom-actions"},Jl={class:"actions-flex-container"},Wl={class:"left-actions"},ql={class:"button-grid"},Yl={key:0},Xl={key:0},Kl={key:0},Zl={class:"right-actions"},Ql={class:"one-push-content"},eo={key:1,class:"standard-commit-form"},to={class:"standard-commit-header"},so={class:"type-scope-container"},ao={class:"scope-wrapper"},lo={class:"description-container"},oo={class:"advanced-fields"},no={class:"preview-section"},io={class:"preview-content code-command"},ro={class:"form-bottom-actions"},co={class:"actions-flex-container"},uo={class:"left-actions"},fo={class:"button-grid"},po={key:0},vo={key:0},mo={key:0},go={class:"right-actions"},yo={class:"one-push-content"},ho={class:"actions-section"},_o={class:"action-groups"},wo={class:"operations-wrapper"},ko={class:"action-group"},$o={class:"group-buttons"},bo={key:0},Co={key:0},So={key:0},To={key:0},xo={class:"action-group"},Vo={class:"group-buttons"},Lo={class:"action-group reset-group"},zo={class:"group-buttons"},Bo={key:0},Go={class:"action-group branch-group"},Ro={class:"group-buttons"},Do={class:"action-group"},Fo={class:"group-buttons"},jo={class:"template-container"},Uo={class:"template-form"},Mo={class:"template-form-buttons"},Oo={class:"template-list"},Ao={class:"template-content"},Eo={class:"template-actions"},Po={class:"template-container"},Ho={class:"template-form"},Io={class:"template-form-buttons"},No={class:"template-list"},Jo={class:"template-content"},Wo={class:"template-actions"},qo={class:"template-container message-template-container"},Yo={class:"template-form"},Xo={class:"template-form-buttons"},Ko={class:"templates-container"},Zo={class:"message-templates-list"},Qo={class:"templates-scroll-area"},en={class:"template-content"},tn={class:"template-actions"},sn={class:"current-default-message"},an={class:"default-message-content"},ln={class:"message-help-text"},on={class:"merge-dialog-content"},nn={class:"merge-intro"},rn={class:"merge-options"},cn={class:"dialog-footer"},un={class:"stash-list-content"},dn={key:0,class:"stash-list-actions"},fn={class:"stash-dialog-content"},pn={class:"dialog-footer"},vn=St({__name:"CommitForm",setup(ve){const c=yt(),C=es(),v=d(""),g=d(!1),E=d(!1),G=d("è¾“å…¥æäº¤ä¿¡æ¯..."),M=d(""),H=d(!1),pe=d("feat"),D=d(""),Q=d(""),ee=d(""),oe=d(""),W=d([]),me=d(!1),Y=d(""),S=d(!1),x=d(""),F=d(-1),X=d(!1),B=d(""),U=d({noFf:!1,squash:!1,noCommit:!1,message:""}),te=d([]),ce=d(!1),$=d(""),T=d(!1),N=d(""),ie=d(-1),I=d(!1),se=d(""),ue=d(!1),V=d(!1),p=[{value:"feat",label:"feat: æ–°åŠŸèƒ½"},{value:"fix",label:"fix: ä¿®å¤bug"},{value:"docs",label:"docs: æ–‡æ¡£ä¿®æ”¹"},{value:"style",label:"style: æ ·å¼ä¿®æ”¹"},{value:"refactor",label:"refactor: ä»£ç é‡æ„"},{value:"test",label:"test: æµ‹è¯•ä»£ç "},{value:"chore",label:"chore: æ„å»º/å·¥å…·ä¿®æ”¹"}],P=d(!1),j=d(!1),O=d(""),ae=d(!1),ke=d(!0);function xe(){O.value="",ae.value=!1,ke.value=!0,P.value=!0}function Ae(){c.getStashList(),j.value=!0}async function Ee(){try{await c.saveStash(O.value,ae.value,ke.value),P.value=!1}catch(u){console.error("å‚¨è—å¤±è´¥:",u)}}async function w(u,s=!1){try{await c.applyStash(u,s),s&&await c.getStashList()}catch(z){console.error("åº”ç”¨å‚¨è—å¤±è´¥:",z)}}async function re(u){Ie.confirm("ç¡®å®šè¦åˆ é™¤æ­¤å‚¨è—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","åˆ é™¤å‚¨è—",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{await c.dropStash(u),await c.getStashList()}).catch(()=>{})}async function Ye(){Ie.confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å‚¨è—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","æ¸…ç©ºæ‰€æœ‰å‚¨è—",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{await c.clearAllStashes(),await c.getStashList()}).catch(()=>{})}const _e=d([]),Ue=d(!1),Me=d(""),Re=d(-1);Ze(H,u=>{localStorage.setItem("zen-gitsync-standard-commit",u.toString())}),Ze(ue,u=>{localStorage.setItem("zen-gitsync-skip-hooks",u.toString())});const de=ze(()=>{if(!H.value)return v.value||M.value;let u=`${pe.value||""}`;return D.value&&(u+=`(${D.value})`),u+=`: ${Q.value}`,ee.value&&(u+=`

${ee.value}`),oe.value&&(u+=`

${oe.value}`),u}),Ne=ze(()=>{let u=`git commit -m "${de.value}"`;return ue.value&&(u+=" --no-verify"),u});function k(){const u=C.config;u&&(G.value=`è¾“å…¥æäº¤ä¿¡æ¯ (é»˜è®¤: ${u.defaultCommitMessage})`,M.value=u.defaultCommitMessage||"",u.descriptionTemplates&&Array.isArray(u.descriptionTemplates)&&(W.value=u.descriptionTemplates),u.scopeTemplates&&Array.isArray(u.scopeTemplates)&&(te.value=u.scopeTemplates),u.messageTemplates&&Array.isArray(u.messageTemplates)&&(_e.value=u.messageTemplates))}async function r(){if(!Y.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(S.value)await K();else{if(W.value.includes(Y.value)){i({message:"è¯¥æ¨¡æ¿å·²å­˜åœ¨",type:"warning"});return}await C.saveTemplate(Y.value,"description")&&(W.value.includes(Y.value)||W.value.push(Y.value),W.value=[...W.value],Y.value="")}}catch(u){i({message:`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${u.message}`,type:"error"})}}async function K(){if(!Y.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(await C.updateTemplate(x.value,Y.value,"description")){const s=W.value.indexOf(x.value);s!==-1&&(W.value[s]=Y.value),W.value=[...W.value],S.value=!1,x.value="",F.value=-1,Y.value=""}}catch(u){i({message:`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${u.message}`,type:"error"})}}function J(u,s){S.value=!0,x.value=u,F.value=s,Y.value=u}function be(){S.value=!1,x.value="",F.value=-1,Y.value=""}async function Ve(){if(!$.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(T.value)await fe();else{if(te.value.includes($.value)){i({message:"è¯¥æ¨¡æ¿å·²å­˜åœ¨",type:"warning"});return}await C.saveTemplate($.value,"scope")&&(te.value.includes($.value)||te.value.push($.value),te.value=[...te.value],$.value="")}}catch(u){i({message:`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${u.message}`,type:"error"})}}async function fe(){if(!$.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(await C.updateTemplate(N.value,$.value,"scope")){const s=te.value.indexOf(N.value);s!==-1&&(te.value[s]=$.value),te.value=[...te.value],T.value=!1,N.value="",ie.value=-1,$.value=""}}catch(u){i({message:`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${u.message}`,type:"error"})}}function ye(u,s){T.value=!0,N.value=u,ie.value=s,$.value=u}function De(){T.value=!1,N.value="",ie.value=-1,$.value=""}async function Ce(u){try{if(await Ie.confirm(`ç¡®å®šè¦åˆ é™¤æè¿°æ¨¡æ¿ "${u}" å—ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await C.deleteTemplate(u,"description")){const z=W.value.indexOf(u);z!==-1&&W.value.splice(z,1),W.value=[...W.value]}}catch(s){if(s==="cancel")return;i({message:`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${s.message}`,type:"error"})}}async function $e(u){try{if(await Ie.confirm(`ç¡®å®šè¦åˆ é™¤ä½œç”¨åŸŸæ¨¡æ¿ "${u}" å—ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await C.deleteTemplate(u,"scope")){const z=te.value.indexOf(u);z!==-1&&te.value.splice(z,1),te.value=[...te.value]}}catch(s){if(s==="cancel")return;i({message:`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${s.message}`,type:"error"})}}function ot(u){Q.value=u,me.value=!1}function Qe(u){D.value=u,ce.value=!1}function Z(){me.value=!0}function nt(){ce.value=!0}async function Xe(){try{await c.addToStage()&&c.fetchStatus()}catch(u){i({message:`æ·»åŠ æ–‡ä»¶å¤±è´¥: ${u.message}`,type:"error"})}}async function qe(){if(!de.value.trim()){i({message:"æäº¤ä¿¡æ¯ä¸èƒ½ä¸ºç©º",type:"warning"});return}try{await c.commitChanges(de.value,ue.value)&&(h(),c.fetchStatus(),c.fetchLog(),c.getBranchStatus(!0))}catch(u){i({message:`æäº¤å¤±è´¥: ${u.message}`,type:"error"})}}function et(){g.value=!0,setTimeout(()=>{g.value=!1},2e3)}async function Ke(){try{await c.pushToRemote(),E.value=!0;try{await new Promise(u=>setTimeout(u,200)),et()}catch(u){console.error("æ¨é€åå¤„ç†å¤±è´¥:",u),et()}finally{E.value=!1}}catch(u){E.value=!1,i({message:`æ¨é€å¤±è´¥: ${u.message}`,type:"error"})}}async function Pe(){try{await c.gitPull(),await c.fetchStatus(),await c.fetchLog(!1)}catch(u){console.error("æ‹‰å–æ“ä½œå‘ç”Ÿé”™è¯¯:",u)}}async function _t(){try{await c.gitFetchAll(),await c.fetchStatus(),await c.fetchLog(!1)}catch(u){console.error("è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯æ“ä½œå‘ç”Ÿé”™è¯¯:",u)}}async function n(){if(!de.value.trim()){i({message:"æäº¤ä¿¡æ¯ä¸èƒ½ä¸ºç©º",type:"warning"});return}try{await c.addAndCommit(de.value,ue.value),h(),c.fetchStatus(),c.fetchLog()}catch(u){i({message:`æš‚å­˜å¹¶æäº¤å¤±è´¥: ${u.message}`,type:"error"})}}async function l(){if(!de.value.trim()){i({message:"æäº¤ä¿¡æ¯ä¸èƒ½ä¸ºç©º",type:"warning"});return}try{if(await c.addCommitAndPush(de.value,ue.value)){h(),E.value=!0;try{await new Promise(s=>setTimeout(s,1e3)),console.log("ä¸€é”®æ¨é€å®Œæˆï¼ŒçŠ¶æ€å·²åœ¨pushToRemoteä¸­åˆ·æ–°"),et()}catch(s){console.error("ä¸€é”®æ¨é€åå¤„ç†å¤±è´¥:",s),et()}finally{E.value=!1}}}catch(u){i({message:`æš‚å­˜ã€æäº¤å¹¶æ¨é€å¤±è´¥: ${u.message}`,type:"error"})}}async function m(){try{await Ie.confirm(`ç¡®å®šè¦é‡ç½®å½“å‰åˆ†æ”¯ "${c.currentBranch}" åˆ°è¿œç¨‹çŠ¶æ€å—ï¼Ÿè¿™å°†ä¸¢å¤±æ‰€æœ‰æœªæ¨é€çš„æäº¤å’Œæœ¬åœ°æ›´æ”¹ã€‚`,"é‡ç½®åˆ°è¿œç¨‹åˆ†æ”¯",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await c.resetToRemote(c.currentBranch)&&(c.fetchStatus(),c.fetchLog())}catch(u){u!=="cancel"&&i({message:`é‡ç½®åˆ°è¿œç¨‹åˆ†æ”¯å¤±è´¥: ${u.message}`,type:"error"})}}function h(){v.value="",Q.value="",ee.value="",oe.value=""}function le(){se.value=M.value,I.value=!0}async function ne(){if(!se.value.trim()){i({message:"è¯·è¾“å…¥é»˜è®¤æäº¤ä¿¡æ¯",type:"warning"});return}try{await C.saveDefaultMessage(se.value)&&(M.value=se.value,G.value=`è¾“å…¥æäº¤ä¿¡æ¯ (é»˜è®¤: ${se.value})`,I.value=!1)}catch(u){i({message:`ä¿å­˜é»˜è®¤æäº¤ä¿¡æ¯å¤±è´¥: ${u.message}`,type:"error"})}}function he(u){const s=u.replace(/\\/g,"/");return C.lockedFiles.some(z=>{const Le=z.replace(/\\/g,"/");return s===Le})}const R=ze(()=>c.fileList.some(u=>["modified","deleted","untracked"].includes(u.type)&&!he(u.path))),Ge=ze(()=>c.fileList.filter(u=>["modified","deleted","untracked"].includes(u.type)&&!he(u.path)).length),Oe=ze(()=>c.fileList.filter(u=>u.type==="added"&&!he(u.path)).length),ft=ze(()=>Oe.value>0),it=ze(()=>c.fileList.some(u=>!he(u.path))),tt=ze(()=>c.branchAhead>0),Mt=ze(()=>c.branchBehind>0),st=ze(()=>c.hasUpstream&&tt.value&&!ft.value),ts=ze(()=>ft.value),Ts=ze(()=>c.hasUpstream&&(tt.value||Mt.value||it.value));async function xs(){if(!se.value.trim()){i({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(Ue.value)await Vs();else{if(_e.value.includes(se.value)){i({message:"è¯¥æ¨¡æ¿å·²å­˜åœ¨",type:"warning"});return}_e.value.push(se.value);const s=await(await fetch("/api/config/save-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:se.value,type:"message"})})).json();s.success?(i({message:"æäº¤ä¿¡æ¯æ¨¡æ¿ä¿å­˜æˆåŠŸ!",type:"success"}),se.value=""):i({message:"æ¨¡æ¿ä¿å­˜å¤±è´¥: "+s.error,type:"error"})}}catch(u){i({message:"æ¨¡æ¿ä¿å­˜å¤±è´¥: "+u.message,type:"error"})}}async function Vs(){try{if(Re.value>=0){const u=Me.value,s=se.value;_e.value[Re.value]=s;const Le=await(await fetch("/api/config/update-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldTemplate:u,newTemplate:s,type:"message"})})).json();Le.success?(i({message:"æäº¤ä¿¡æ¯æ¨¡æ¿æ›´æ–°æˆåŠŸ!",type:"success"}),Ue.value=!1,Me.value="",Re.value=-1,se.value=""):i({message:"æ¨¡æ¿æ›´æ–°å¤±è´¥: "+Le.error,type:"error"})}}catch(u){i({message:"æ¨¡æ¿æ›´æ–°å¤±è´¥: "+u.message,type:"error"})}}function Ls(u,s){Ue.value=!0,Me.value=u,Re.value=s,se.value=u}function zs(){Ue.value=!1,Me.value="",Re.value=-1,se.value=""}async function Bs(u){try{const s=_e.value.indexOf(u);s!==-1&&_e.value.splice(s,1);const Le=await(await fetch("/api/config/delete-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:u,type:"message"})})).json();Le.success?i({message:"æäº¤ä¿¡æ¯æ¨¡æ¿åˆ é™¤æˆåŠŸ!",type:"success"}):i({message:"æ¨¡æ¿åˆ é™¤å¤±è´¥: "+Le.error,type:"error"})}catch(s){i({message:"æ¨¡æ¿åˆ é™¤å¤±è´¥: "+s.message,type:"error"})}}function Gs(u){v.value=u,se.value=u}ht(async()=>{const u=localStorage.getItem("zen-gitsync-standard-commit");u!==null&&(H.value=u==="true");const s=localStorage.getItem("zen-gitsync-skip-hooks");s!==null&&(ue.value=s==="true"),Ze(()=>C.config,k,{immediate:!0}),C.config||await C.loadConfig()});function Rs(){B.value="",U.value={noFf:!1,squash:!1,noCommit:!1,message:""},pt.value="all",X.value=!0,c.allBranches.length===0&&c.getAllBranches()}const pt=d("all"),Ds=ze(()=>{const u=c.allBranches.filter(s=>s!==c.currentBranch);if(console.log("ç­›é€‰åˆ†æ”¯åˆ—è¡¨:",{allBranches:c.allBranches,currentBranch:c.currentBranch,branchTypeFilter:pt.value,filteredBranches:u}),pt.value==="local"){const s=u.filter(z=>!z.includes("origin/"));return console.log("æœ¬åœ°åˆ†æ”¯:",s),s}else if(pt.value==="remote"){const s=u.filter(z=>z.includes("origin/"));return console.log("è¿œç¨‹åˆ†æ”¯:",s),s}else return console.log("æ‰€æœ‰åˆ†æ”¯:",u),u});async function Fs(){if(!B.value){i({message:"è¯·é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯",type:"warning"});return}try{await c.mergeBranch(B.value,U.value)&&(X.value=!1,await c.fetchStatus(),await c.fetchLog(!1))}catch(u){console.error("åˆå¹¶åˆ†æ”¯æ“ä½œå‘ç”Ÿé”™è¯¯:",u)}}const zt=d(!1);function js(){zt.value=!zt.value}function Us(u,s){const Le=[...u?W.value.filter(Se=>Se.toLowerCase().includes(u.toLowerCase())).map(Se=>({value:Se})):W.value.map(Se=>({value:Se})),{value:"âš™ï¸ ç®¡ç†æ¨¡æ¿...",isSettings:!0}];s(Le)}function Ms(u,s){const Le=[...u?te.value.filter(Se=>Se.toLowerCase().includes(u.toLowerCase())).map(Se=>({value:Se})):te.value.map(Se=>({value:Se})),{value:"âš™ï¸ ç®¡ç†æ¨¡æ¿...",isSettings:!0}];s(Le)}function Os(u){u.isSettings?(Z(),Q.value=""):Q.value=u.value}function As(u){u.isSettings?(nt(),D.value=""):D.value=u.value}function Es(u,s){const Le=[...u?_e.value.filter(Se=>Se.toLowerCase().includes(u.toLowerCase())).map(Se=>({value:Se})):_e.value.map(Se=>({value:Se})),{value:"âš™ï¸ ç®¡ç†æ¨¡æ¿...",isSettings:!0}];s(Le)}function Ps(u){u.isSettings?(le(),v.value=""):v.value=u.value}return(u,s)=>{const z=je,Le=Tt,Se=Kt,ss=vs,Ot=Zs,Te=qt,as=jt,ls=Ut,rt=Zt,Hs=ea,Bt=Qt,At=ta,Gt=ks,vt=Vt,os=xt,Et=aa,Is=sa,ct=bs,wt=la,ns=$s,Pt=bt,Ns=Cs,Js=Yt;return f(),_("div",{class:ge(["card",{"is-pushing":o(c).isPushing}])},[e("div",Ll,[s[30]||(s[30]=e("h2",null,"æäº¤æ›´æ”¹",-1)),t(z,{type:"primary",icon:o(Ks),size:"small",circle:"",onClick:js,class:"git-tools-button"},null,8,["icon"])]),t(cs,{name:"el-fade-in-linear"},{default:a(()=>[o(c).isPushing||E.value?(f(),_("div",zl,[s[31]||(s[31]=e("div",{class:"pushing-spinner"},[e("svg",{viewBox:"0 0 50 50",class:"circular"},[e("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})])],-1)),e("div",Bl,L(o(c).isPushing?"æ­£åœ¨æ¨é€...":"æ›´æ–°çŠ¶æ€ä¸­..."),1)])):A("",!0)]),_:1}),t(cs,{name:"el-fade-in-linear"},{default:a(()=>[g.value?(f(),_("div",Gl,[t(Le,{class:"push-success-icon"},{default:a(()=>[t(o(ms))]),_:1}),s[32]||(s[32]=e("div",{class:"push-success-text"},"å·²å®Œæˆ!",-1))])):A("",!0)]),_:1}),e("div",Rl,[e("div",Dl,[o(c).userName===""||o(c).userEmail===""?(f(),_("div",Fl,[t(Se,{title:"Gitç”¨æˆ·ä¿¡æ¯æœªé…ç½®",type:"warning",closable:!1,"show-icon":""},{default:a(()=>s[33]||(s[33]=[e("p",null,"æ‚¨éœ€è¦é…ç½®Gitç”¨æˆ·åå’Œé‚®ç®±æ‰èƒ½æäº¤ä»£ç ã€‚è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é…ç½®ï¼š",-1),e("pre",{class:"config-command"},`git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"`,-1)])),_:1})])):(f(),_("div",jl,[e("div",Ul,[e("div",Ml,[e("div",Ol,[t(ss,{modelValue:H.value,"onUpdate:modelValue":s[0]||(s[0]=b=>H.value=b),"active-text":"æ ‡å‡†åŒ–æäº¤","inactive-text":"æ™®é€šæäº¤"},null,8,["modelValue"])]),e("div",Al,[t(ss,{modelValue:ue.value,"onUpdate:modelValue":s[1]||(s[1]=b=>ue.value=b),"active-text":"è·³è¿‡ Git é’©å­æ£€æŸ¥ (--no-verify)"},null,8,["modelValue"])])])]),H.value?(f(),_("div",eo,[e("div",to,[e("div",so,[t(ls,{modelValue:pe.value,"onUpdate:modelValue":s[3]||(s[3]=b=>pe.value=b),placeholder:"æäº¤ç±»å‹",class:"type-select",clearable:""},{default:a(()=>[(f(),_(we,null,Be(p,b=>t(as,{key:b.value,label:b.label,value:b.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e("div",ao,[t(Ot,{modelValue:D.value,"onUpdate:modelValue":s[4]||(s[4]=b=>D.value=b),"fetch-suggestions":Ms,placeholder:"ä½œç”¨åŸŸï¼ˆå¯é€‰ï¼‰",class:"scope-input",clearable:"",onSelect:As},null,8,["modelValue"])])]),e("div",lo,[t(Ot,{modelValue:Q.value,"onUpdate:modelValue":s[5]||(s[5]=b=>Q.value=b),"fetch-suggestions":Us,placeholder:"ç®€çŸ­æè¿°ï¼ˆå¿…å¡«ï¼‰",class:"description-input",clearable:"",onSelect:Os},null,8,["modelValue"])])]),e("div",{class:"advanced-options-toggle",onClick:s[6]||(s[6]=b=>V.value=!V.value)},[e("span",null,L(V.value?"æ”¶èµ·":"æ­£æ–‡åŠé¡µè„š"),1),t(Le,{class:ge(["toggle-icon",{"is-active":V.value}])},{default:a(()=>[t(o(mt))]),_:1},8,["class"])]),He(e("div",oo,[t(rt,{modelValue:ee.value,"onUpdate:modelValue":s[7]||(s[7]=b=>ee.value=b),type:"textarea",rows:4,placeholder:"æ­£æ–‡ï¼ˆå¯é€‰ï¼‰ï¼šè¯¦ç»†æè¿°æœ¬æ¬¡æäº¤çš„å†…å®¹å’ŒåŸå› ",class:"body-input",clearable:""},null,8,["modelValue"]),t(rt,{modelValue:oe.value,"onUpdate:modelValue":s[8]||(s[8]=b=>oe.value=b),placeholder:"é¡µè„šï¼ˆå¯é€‰ï¼‰ï¼šå¦‚ Closes #123",class:"footer-input",clearable:""},null,8,["modelValue"])],512),[[dt,V.value]]),e("div",no,[s[39]||(s[39]=e("div",{class:"preview-title"},"Gitæäº¤å‘½ä»¤é¢„è§ˆï¼š",-1)),e("pre",io,L(Ne.value),1)]),e("div",ro,[e("div",co,[e("div",uo,[e("div",fo,[t(z,{type:"primary",onClick:Xe,loading:o(c).isAddingFiles,disabled:!R.value,class:"stage-button"},{default:a(()=>[s[40]||(s[40]=y(" æš‚å­˜æ›´æ”¹ ")),Ge.value>0?(f(),_("span",po,"("+L(Ge.value)+")",1)):A("",!0)]),_:1},8,["loading","disabled"]),t(z,{type:"primary",onClick:qe,loading:o(c).isLoadingStatus,disabled:!ft.value||!de.value.trim()},{default:a(()=>[s[41]||(s[41]=y(" æäº¤ ")),Oe.value>0?(f(),_("span",vo,"("+L(Oe.value)+")",1)):A("",!0)]),_:1},8,["loading","disabled"]),t(Te,{content:st.value?"æ¨é€å·²æäº¤çš„æ›´æ”¹åˆ°è¿œç¨‹ä»“åº“":o(c).hasUpstream?tt.value?"æœ‰æœªæäº¤çš„æš‚å­˜æ›´æ”¹ï¼Œè¯·å…ˆæäº¤":"æ²¡æœ‰éœ€è¦æ¨é€çš„æäº¤":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯",placement:"top"},{default:a(()=>[t(z,{type:"primary",icon:o(Ht),onClick:Ke,loading:o(c).isPushing,disabled:!st.value,style:$t(st.value?{backgroundColor:"#67c23a",borderColor:"#67c23a"}:{})},{default:a(()=>[s[42]||(s[42]=y(" æ¨é€ ")),tt.value?(f(),_("span",mo,"("+L(o(c).branchAhead)+")",1)):A("",!0)]),_:1},8,["icon","loading","disabled","style"])]),_:1},8,["content"])])]),e("div",go,[t(Te,{content:it.value?de.value.trim()?o(c).hasUpstream?"ä¸€é”®å®Œæˆï¼šæš‚å­˜æ‰€æœ‰æ›´æ”¹ â†’ æäº¤ â†’ æ¨é€åˆ°è¿œç¨‹ä»“åº“":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯":"è¯·è¾“å…¥æäº¤ä¿¡æ¯":"æ²¡æœ‰éœ€è¦æäº¤çš„æ›´æ”¹",placement:"top"},{default:a(()=>[t(z,{type:"success",onClick:l,loading:o(c).isAddingFiles||o(c).isCommiting||o(c).isPushing,disabled:!it.value||!de.value.trim()||!o(c).hasUpstream,class:"one-push-button"},{default:a(()=>[e("div",yo,[t(Le,{class:"one-push-icon"},{default:a(()=>[t(o(It))]),_:1}),s[43]||(s[43]=e("div",{class:"one-push-text"},[e("span",{class:"one-push-title"},"ä¸€é”®æ¨é€æ‰€æœ‰"),e("span",{class:"one-push-desc"},"æš‚å­˜ + æäº¤ + æ¨é€")],-1))])]),_:1},8,["loading","disabled"])]),_:1},8,["content"])])])])])):(f(),_("div",El,[e("div",Pl,[t(Ot,{modelValue:v.value,"onUpdate:modelValue":s[2]||(s[2]=b=>v.value=b),"fetch-suggestions":Es,placeholder:G.value,type:"textarea",rows:6,resize:"none",class:"commit-message-input",onSelect:Ps},null,8,["modelValue","placeholder"])]),e("div",Hl,[s[34]||(s[34]=e("div",{class:"preview-title"},"Gitæäº¤å‘½ä»¤é¢„è§ˆï¼š",-1)),e("pre",Il,'git commit -m "'+L(de.value||"<æäº¤ä¿¡æ¯>")+'"'+L(ue.value?" --no-verify":""),1)]),e("div",Nl,[e("div",Jl,[e("div",Wl,[e("div",ql,[t(z,{type:"primary",onClick:Xe,loading:o(c).isAddingFiles,disabled:!R.value,class:"stage-button"},{default:a(()=>[s[35]||(s[35]=y(" æš‚å­˜æ›´æ”¹ ")),Ge.value>0?(f(),_("span",Yl,"("+L(Ge.value)+")",1)):A("",!0)]),_:1},8,["loading","disabled"]),t(z,{type:"primary",onClick:qe,loading:o(c).isLoadingStatus,disabled:!ft.value||!de.value.trim()},{default:a(()=>[s[36]||(s[36]=y(" æäº¤ ")),Oe.value>0?(f(),_("span",Xl,"("+L(Oe.value)+")",1)):A("",!0)]),_:1},8,["loading","disabled"]),t(Te,{content:st.value?"æ¨é€å·²æäº¤çš„æ›´æ”¹åˆ°è¿œç¨‹ä»“åº“":o(c).hasUpstream?tt.value?"æœ‰æœªæäº¤çš„æš‚å­˜æ›´æ”¹ï¼Œè¯·å…ˆæäº¤":"æ²¡æœ‰éœ€è¦æ¨é€çš„æäº¤":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯",placement:"top"},{default:a(()=>[t(z,{type:"primary",icon:o(Ht),onClick:Ke,loading:o(c).isPushing,disabled:!st.value,style:$t(st.value?{backgroundColor:"#67c23a",borderColor:"#67c23a"}:{})},{default:a(()=>[s[37]||(s[37]=y(" æ¨é€ ")),tt.value?(f(),_("span",Kl,"("+L(o(c).branchAhead)+")",1)):A("",!0)]),_:1},8,["icon","loading","disabled","style"])]),_:1},8,["content"])])]),e("div",Zl,[t(Te,{content:it.value?de.value.trim()?o(c).hasUpstream?"ä¸€é”®å®Œæˆï¼šæš‚å­˜æ‰€æœ‰æ›´æ”¹ â†’ æäº¤ â†’ æ¨é€åˆ°è¿œç¨‹ä»“åº“":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯":"è¯·è¾“å…¥æäº¤ä¿¡æ¯":"æ²¡æœ‰éœ€è¦æäº¤çš„æ›´æ”¹",placement:"top"},{default:a(()=>[t(z,{type:"success",onClick:l,loading:o(c).isAddingFiles||o(c).isCommiting||o(c).isPushing,disabled:!it.value||!de.value.trim()||!o(c).hasUpstream,class:"one-push-button"},{default:a(()=>[e("div",Ql,[t(Le,{class:"one-push-icon"},{default:a(()=>[t(o(It))]),_:1}),s[38]||(s[38]=e("div",{class:"one-push-text"},[e("span",{class:"one-push-title"},"ä¸€é”®æ¨é€æ‰€æœ‰"),e("span",{class:"one-push-desc"},"æš‚å­˜ + æäº¤ + æ¨é€")],-1))])]),_:1},8,["loading","disabled"])]),_:1},8,["content"])])])])]))]))]),t(Hs,{modelValue:zt.value,"onUpdate:modelValue":s[9]||(s[9]=b=>zt.value=b),title:"Git æ“ä½œ",direction:"rtl",size:"340px","with-header":!0,"show-close":!0,"destroy-on-close":!1,class:"git-operations-drawer"},{default:a(()=>[e("div",ho,[e("div",_o,[e("div",wo,[e("div",ko,[s[49]||(s[49]=e("div",{class:"group-title"},"åŸºç¡€æ“ä½œ",-1)),e("div",$o,[t(Te,{content:R.value?`æš‚å­˜${Ge.value}ä¸ªå¾…æ›´æ”¹æ–‡ä»¶`:"git add .",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"primary",onClick:Xe,loading:o(c).isAddingFiles,disabled:!R.value,class:"action-button"},{default:a(()=>[s[44]||(s[44]=y(" æš‚å­˜æ›´æ”¹ ")),Ge.value>0?(f(),_("span",bo,"("+L(Ge.value)+")",1)):A("",!0)]),_:1},8,["loading","disabled"])]),_:1},8,["content"]),t(Te,{content:ft.value?`æäº¤${Oe.value}ä¸ªå·²æš‚å­˜æ–‡ä»¶`:"git commit",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"primary",onClick:qe,loading:o(c).isLoadingStatus,disabled:!ft.value||!de.value.trim(),class:"action-button"},{default:a(()=>[s[45]||(s[45]=y(" æäº¤ ")),Oe.value>0?(f(),_("span",Co,"("+L(Oe.value)+")",1)):A("",!0)]),_:1},8,["loading","disabled"])]),_:1},8,["content"]),t(Te,{content:tt.value?`æ¨é€${o(c).branchAhead}ä¸ªæœ¬åœ°æäº¤`:"git push",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"primary",icon:o(Ht),onClick:Ke,loading:o(c).isPushing,disabled:!st.value,class:ge(["action-button","push-button",{"is-loading":o(c).isPushing}]),style:$t(st.value?{backgroundColor:"#67c23a",borderColor:"#67c23a"}:{})},{default:a(()=>[s[46]||(s[46]=y(" æ¨é€ ")),tt.value?(f(),_("span",So,"("+L(o(c).branchAhead)+")",1)):A("",!0)]),_:1},8,["icon","loading","disabled","class","style"])]),_:1},8,["content"]),t(Te,{content:Mt.value?`æ‹‰å–${o(c).branchBehind}ä¸ªè¿œç¨‹æäº¤`:"git pull",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"primary",icon:o(gs),onClick:Pe,loading:o(c).isGitPulling,disabled:!o(c).hasUpstream,class:"action-button",style:$t(o(c).hasUpstream?{color:"white",backgroundColor:"#1e90ff",borderColor:"#1e90ff"}:{})},{default:a(()=>[s[47]||(s[47]=y(" æ‹‰å– ")),Mt.value?(f(),_("span",To,"("+L(o(c).branchBehind)+")",1)):A("",!0)]),_:1},8,["icon","loading","disabled","style"])]),_:1},8,["content"]),t(Te,{content:"git fetch --all",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"info",icon:o(ys),onClick:_t,loading:o(c).isGitFetching,class:"action-button",style:{color:"white","background-color":"#1e90ff","border-color":"#1e90ff"}},{default:a(()=>s[48]||(s[48]=[y(" è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯ ")])),_:1},8,["icon","loading"])]),_:1})])]),e("div",xo,[s[52]||(s[52]=e("div",{class:"group-title"},"ç»„åˆæ“ä½œ",-1)),e("div",Vo,[t(Te,{content:"git add + git commit",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"primary",icon:o(Dt),onClick:n,loading:o(c).isAddingFiles||o(c).isCommiting,disabled:!R.value||!de.value.trim(),class:"action-button"},{default:a(()=>s[50]||(s[50]=[y(" æš‚å­˜å¹¶æäº¤ ")])),_:1},8,["icon","loading","disabled"])]),_:1}),t(Te,{content:"git add + git commit + git push",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"success",icon:o(It),onClick:l,loading:o(c).isAddingFiles||o(c).isCommiting||o(c).isPushing,disabled:!it.value||!de.value.trim()||!o(c).hasUpstream,class:ge(["action-button","one-click-push",{"is-loading":o(c).isAddingFiles||o(c).isCommiting||o(c).isPushing}])},{default:a(()=>s[51]||(s[51]=[y(" ä¸€é”®æ¨é€æ‰€æœ‰ ")])),_:1},8,["icon","loading","disabled","class"])]),_:1})])])]),e("div",Lo,[s[55]||(s[55]=e("div",{class:"group-title"},"é‡ç½®æ“ä½œ",-1)),e("div",zo,[t(Te,{content:ts.value?`æ’¤é”€${Oe.value}ä¸ªå·²æš‚å­˜æ–‡ä»¶`:"git reset HEAD",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"warning",icon:o(Xt),onClick:o(c).resetHead,loading:o(c).isResetting,disabled:!ts.value,class:"action-button reset-button"},{default:a(()=>[s[53]||(s[53]=y(" é‡ç½®æš‚å­˜åŒº ")),Oe.value>0?(f(),_("span",Bo,"("+L(Oe.value)+")",1)):A("",!0)]),_:1},8,["icon","onClick","loading","disabled"])]),_:1},8,["content"]),t(Te,{content:"git reset --hard origin/branch",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"danger",icon:o(ws),onClick:m,loading:o(c).isResetting,disabled:!Ts.value,class:"action-button danger-button"},{default:a(()=>s[54]||(s[54]=[y(" é‡ç½®åˆ°è¿œç¨‹ ")])),_:1},8,["icon","loading","disabled"])]),_:1})])]),e("div",Go,[s[57]||(s[57]=e("div",{class:"group-title"},"åˆ†æ”¯æ“ä½œ",-1)),e("div",Ro,[t(Te,{content:"åˆå¹¶å…¶ä»–åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"primary",icon:o(Qs),onClick:Rs,loading:o(c).isGitMerging,class:"action-button merge-button"},{default:a(()=>s[56]||(s[56]=[y(" åˆå¹¶åˆ†æ”¯ ")])),_:1},8,["icon","loading"])]),_:1})])]),e("div",Do,[s[60]||(s[60]=e("div",{class:"group-title"},"å‚¨è—æ“ä½œ",-1)),e("div",Fo,[t(Te,{content:"å°†å·¥ä½œåŒºæ›´æ”¹å‚¨è—èµ·æ¥",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"warning",onClick:xe,loading:o(c).isSavingStash,disabled:!it.value,class:"action-button"},{default:a(()=>s[58]||(s[58]=[y(" å‚¨è—æ›´æ”¹ ")])),_:1},8,["loading","disabled"])]),_:1}),t(Te,{content:"æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰å‚¨è—è®°å½•",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[t(z,{type:"info",onClick:Ae,class:"action-button"},{default:a(()=>s[59]||(s[59]=[y(" å‚¨è—åˆ—è¡¨ ")])),_:1})]),_:1})])])])])]),_:1},8,["modelValue"]),t(vt,{title:"ç®€çŸ­æè¿°æ¨¡æ¿è®¾ç½®",modelValue:me.value,"onUpdate:modelValue":s[11]||(s[11]=b=>me.value=b),width:"80vw",top:"70px",style:{height:"calc(100vh - 140px)"},"close-on-click-modal":!1,class:"template-dialog"},{default:a(()=>[e("div",jo,[e("div",Uo,[t(rt,{modelValue:Y.value,"onUpdate:modelValue":s[10]||(s[10]=b=>Y.value=b),placeholder:S.value?"ç¼–è¾‘æ¨¡æ¿å†…å®¹":"è¾“å…¥æ–°æ¨¡æ¿å†…å®¹",class:"template-input",clearable:""},null,8,["modelValue","placeholder"]),e("div",Mo,[S.value?(f(),q(z,{key:0,onClick:be},{default:a(()=>s[61]||(s[61]=[y("å–æ¶ˆ")])),_:1})):A("",!0),t(z,{type:"primary",onClick:r,disabled:!Y.value.trim()},{default:a(()=>[y(L(S.value?"æ›´æ–°æ¨¡æ¿":"æ·»åŠ æ¨¡æ¿"),1)]),_:1},8,["disabled"])])]),e("div",Oo,[s[65]||(s[65]=e("h3",null,"å·²ä¿å­˜æ¨¡æ¿",-1)),W.value.length===0?(f(),q(Bt,{key:0,description:"æš‚æ— ä¿å­˜çš„æ¨¡æ¿"})):A("",!0),(f(!0),_(we,null,Be(W.value,(b,Je)=>(f(),q(Gt,{key:Je,class:"template-item"},{default:a(()=>[t(At,{justify:"space-between",align:"middle",style:{width:"100%"}},{default:a(()=>[e("div",Ao,L(b),1),e("div",Eo,[t(z,{type:"primary",size:"small",onClick:at=>ot(b)},{default:a(()=>s[62]||(s[62]=[y("ä½¿ç”¨")])),_:2},1032,["onClick"]),t(z,{type:"warning",size:"small",icon:o(Dt),onClick:at=>J(b,Je)},{default:a(()=>s[63]||(s[63]=[y("ç¼–è¾‘")])),_:2},1032,["icon","onClick"]),t(z,{type:"danger",size:"small",onClick:at=>Ce(b)},{default:a(()=>s[64]||(s[64]=[y("åˆ é™¤")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])])]),_:1},8,["modelValue"]),t(vt,{title:"ä½œç”¨åŸŸæ¨¡æ¿è®¾ç½®",modelValue:ce.value,"onUpdate:modelValue":s[13]||(s[13]=b=>ce.value=b),width:"80vw",top:"70px",style:{height:"calc(100vh - 140px)"},"close-on-click-modal":!1,class:"template-dialog"},{default:a(()=>[e("div",Po,[e("div",Ho,[t(rt,{modelValue:$.value,"onUpdate:modelValue":s[12]||(s[12]=b=>$.value=b),placeholder:T.value?"ç¼–è¾‘ä½œç”¨åŸŸæ¨¡æ¿å†…å®¹":"è¾“å…¥æ–°ä½œç”¨åŸŸæ¨¡æ¿",class:"template-input",clearable:""},null,8,["modelValue","placeholder"]),e("div",Io,[T.value?(f(),q(z,{key:0,onClick:De},{default:a(()=>s[66]||(s[66]=[y("å–æ¶ˆ")])),_:1})):A("",!0),t(z,{type:"primary",onClick:Ve,disabled:!$.value.trim()},{default:a(()=>[y(L(T.value?"æ›´æ–°æ¨¡æ¿":"æ·»åŠ æ¨¡æ¿"),1)]),_:1},8,["disabled"])])]),e("div",No,[s[70]||(s[70]=e("h3",null,"å·²ä¿å­˜ä½œç”¨åŸŸ",-1)),te.value.length===0?(f(),q(Bt,{key:0,description:"æš‚æ— ä¿å­˜çš„ä½œç”¨åŸŸ"})):A("",!0),(f(!0),_(we,null,Be(te.value,(b,Je)=>(f(),q(Gt,{key:Je,class:"template-item"},{default:a(()=>[t(At,{justify:"space-between",align:"middle",style:{width:"100%"}},{default:a(()=>[e("div",Jo,L(b),1),e("div",Wo,[t(z,{type:"primary",size:"small",onClick:at=>Qe(b)},{default:a(()=>s[67]||(s[67]=[y("ä½¿ç”¨")])),_:2},1032,["onClick"]),t(z,{type:"warning",size:"small",icon:o(Dt),onClick:at=>ye(b,Je)},{default:a(()=>s[68]||(s[68]=[y("ç¼–è¾‘")])),_:2},1032,["icon","onClick"]),t(z,{type:"danger",size:"small",onClick:at=>$e(b)},{default:a(()=>s[69]||(s[69]=[y("åˆ é™¤")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])])]),_:1},8,["modelValue"]),t(vt,{title:"é»˜è®¤æäº¤ä¿¡æ¯è®¾ç½®",modelValue:I.value,"onUpdate:modelValue":s[15]||(s[15]=b=>I.value=b),width:"80vw",top:"70px",style:{height:"calc(100vh - 140px)"},"close-on-click-modal":!1,class:"message-template-dialog"},{default:a(()=>[e("div",qo,[e("div",Yo,[t(rt,{modelValue:se.value,"onUpdate:modelValue":s[14]||(s[14]=b=>se.value=b),placeholder:Ue.value?"ç¼–è¾‘æ¨¡æ¿å†…å®¹":"è¾“å…¥æ–°æ¨¡æ¿å†…å®¹",class:"template-input",clearable:""},null,8,["modelValue","placeholder"]),e("div",Xo,[Ue.value?(f(),q(z,{key:0,onClick:zs},{default:a(()=>s[71]||(s[71]=[y("å–æ¶ˆ")])),_:1})):A("",!0),t(z,{type:"primary",onClick:xs,disabled:!se.value.trim()},{default:a(()=>[y(L(Ue.value?"æ›´æ–°æ¨¡æ¿":"æ·»åŠ æ¨¡æ¿"),1)]),_:1},8,["disabled"]),t(z,{type:"success",onClick:ne,disabled:!se.value.trim()},{default:a(()=>s[72]||(s[72]=[y(" è®¾ä¸ºé»˜è®¤æäº¤ä¿¡æ¯ ")])),_:1},8,["disabled"])])]),e("div",Ko,[e("div",Zo,[s[76]||(s[76]=e("h3",null,"å·²ä¿å­˜æ¨¡æ¿",-1)),e("div",Qo,[_e.value.length===0?(f(),q(Bt,{key:0,description:"æš‚æ— ä¿å­˜çš„æ¨¡æ¿"})):A("",!0),(f(!0),_(we,null,Be(_e.value,(b,Je)=>(f(),q(Gt,{key:Je,class:"template-item"},{default:a(()=>[t(At,{justify:"space-between",align:"middle",style:{width:"100%"}},{default:a(()=>[e("div",en,L(b),1),e("div",tn,[t(z,{type:"primary",size:"small",onClick:at=>Gs(b)},{default:a(()=>s[73]||(s[73]=[y("ä½¿ç”¨")])),_:2},1032,["onClick"]),t(z,{type:"warning",size:"small",icon:o(Dt),onClick:at=>Ls(b,Je)},{default:a(()=>s[74]||(s[74]=[y("ç¼–è¾‘")])),_:2},1032,["icon","onClick"]),t(z,{type:"danger",size:"small",onClick:at=>Bs(b)},{default:a(()=>s[75]||(s[75]=[y("åˆ é™¤")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])]),e("div",sn,[s[84]||(s[84]=e("h3",null,"å½“å‰é»˜è®¤æäº¤ä¿¡æ¯",-1)),M.value?(f(),q(Gt,{key:0,class:"default-message-card"},{default:a(()=>[e("div",an,L(M.value),1)]),_:1})):(f(),q(Bt,{key:1,description:"å°šæœªè®¾ç½®é»˜è®¤æäº¤ä¿¡æ¯","image-size":100})),e("div",ln,[s[82]||(s[82]=e("h4",null,"å…³äºé»˜è®¤æäº¤ä¿¡æ¯",-1)),s[83]||(s[83]=e("p",null,"é»˜è®¤æäº¤ä¿¡æ¯å°†åœ¨æœªè¾“å…¥æäº¤ä¿¡æ¯æ—¶è‡ªåŠ¨ä½¿ç”¨ã€‚",-1)),e("p",null,[s[79]||(s[79]=y("ä½ å¯ä»¥é€šè¿‡ç‚¹å‡»å·¦ä¾§æ¨¡æ¿çš„")),t(os,{size:"small",type:"primary"},{default:a(()=>s[77]||(s[77]=[y("ä½¿ç”¨")])),_:1}),s[80]||(s[80]=y("æŒ‰é’®å…ˆé€‰æ‹©å–œæ¬¢çš„æ¨¡æ¿ï¼Œç„¶åç‚¹å‡»ä¸Šæ–¹")),t(os,{size:"small",type:"success"},{default:a(()=>s[78]||(s[78]=[y("è®¾ä¸ºé»˜è®¤æäº¤ä¿¡æ¯")])),_:1}),s[81]||(s[81]=y("æŒ‰é’®ä¿å­˜ã€‚"))])])])])])]),_:1},8,["modelValue"]),t(vt,{title:"åˆå¹¶åˆ†æ”¯",modelValue:X.value,"onUpdate:modelValue":s[23]||(s[23]=b=>X.value=b),width:"500px","close-on-click-modal":!1,class:"merge-dialog"},{footer:a(()=>[e("div",cn,[t(z,{onClick:s[22]||(s[22]=b=>X.value=!1)},{default:a(()=>s[91]||(s[91]=[y("å–æ¶ˆ")])),_:1}),t(z,{type:"primary",onClick:Fs,loading:o(c).isGitMerging,disabled:!B.value,class:"merge-confirm-btn"},{default:a(()=>s[92]||(s[92]=[y(" åˆå¹¶ ")])),_:1},8,["loading","disabled"])])]),default:a(()=>[e("div",on,[e("p",nn,"é€‰æ‹©è¦åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ ("+L(o(c).currentBranch)+") çš„åˆ†æ”¯:",1),t(ns,{"label-position":"top"},{default:a(()=>[t(ct,{label:"åˆ†æ”¯ç±»å‹"},{default:a(()=>[t(Is,{modelValue:pt.value,"onUpdate:modelValue":s[16]||(s[16]=b=>pt.value=b),size:"small"},{default:a(()=>[t(Et,{label:"all"},{default:a(()=>s[85]||(s[85]=[y("æ‰€æœ‰åˆ†æ”¯")])),_:1}),t(Et,{label:"local"},{default:a(()=>s[86]||(s[86]=[y("æœ¬åœ°åˆ†æ”¯")])),_:1}),t(Et,{label:"remote"},{default:a(()=>s[87]||(s[87]=[y("è¿œç¨‹åˆ†æ”¯")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(ct,{label:"é€‰æ‹©åˆ†æ”¯"},{default:a(()=>[t(ls,{modelValue:B.value,"onUpdate:modelValue":s[17]||(s[17]=b=>B.value=b),placeholder:"é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯",style:{width:"100%"},filterable:""},{default:a(()=>[(f(!0),_(we,null,Be(Ds.value,b=>(f(),q(as,{key:b,label:b,value:b},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(ct,{label:"åˆå¹¶é€‰é¡¹"},{default:a(()=>[e("div",rn,[t(wt,{modelValue:U.value.noFf,"onUpdate:modelValue":s[18]||(s[18]=b=>U.value.noFf=b)},{default:a(()=>[t(Te,{content:"åˆ›å»ºåˆå¹¶æäº¤ï¼Œå³ä½¿å¯ä»¥ä½¿ç”¨å¿«è¿›åˆå¹¶",placement:"top"},{default:a(()=>s[88]||(s[88]=[e("span",null,"ç¦ç”¨å¿«è¿›åˆå¹¶ (--no-ff)",-1)])),_:1})]),_:1},8,["modelValue"]),t(wt,{modelValue:U.value.squash,"onUpdate:modelValue":s[19]||(s[19]=b=>U.value.squash=b)},{default:a(()=>[t(Te,{content:"å°†å¤šä¸ªæäº¤å‹ç¼©ä¸ºä¸€ä¸ªæäº¤",placement:"top"},{default:a(()=>s[89]||(s[89]=[e("span",null,"å‹ç¼©æäº¤ (--squash)",-1)])),_:1})]),_:1},8,["modelValue"]),t(wt,{modelValue:U.value.noCommit,"onUpdate:modelValue":s[20]||(s[20]=b=>U.value.noCommit=b)},{default:a(()=>[t(Te,{content:"æ‰§è¡Œåˆå¹¶ä½†ä¸è‡ªåŠ¨åˆ›å»ºæäº¤",placement:"top"},{default:a(()=>s[90]||(s[90]=[e("span",null,"ä¸è‡ªåŠ¨æäº¤ (--no-commit)",-1)])),_:1})]),_:1},8,["modelValue"])])]),_:1}),U.value.noFf&&!U.value.noCommit?(f(),q(ct,{key:0,label:"åˆå¹¶æäº¤ä¿¡æ¯ (å¯é€‰)"},{default:a(()=>[t(rt,{modelValue:U.value.message,"onUpdate:modelValue":s[21]||(s[21]=b=>U.value.message=b),type:"textarea",rows:3,placeholder:"è¾“å…¥è‡ªå®šä¹‰åˆå¹¶æäº¤ä¿¡æ¯"},null,8,["modelValue"])]),_:1})):A("",!0)]),_:1})])]),_:1},8,["modelValue"]),t(vt,{title:"å‚¨è—åˆ—è¡¨ (Git Stash)",modelValue:j.value,"onUpdate:modelValue":s[24]||(s[24]=b=>j.value=b),width:"600px","close-on-click-modal":!1},{default:a(()=>[e("div",un,[He((f(),q(Ns,{data:o(c).stashes,stripe:"",style:{width:"100%"},"empty-text":"æš‚æ— å‚¨è—è®°å½•"},{default:a(()=>[t(Pt,{prop:"id",label:"ID",width:"100"}),t(Pt,{prop:"description",label:"æè¿°"}),t(Pt,{label:"æ“ä½œ",width:"220"},{default:a(b=>[t(z,{size:"small",onClick:Je=>w(b.row.id,!1),loading:o(c).isApplyingStash},{default:a(()=>s[93]||(s[93]=[y(" åº”ç”¨ ")])),_:2},1032,["onClick","loading"]),t(z,{size:"small",type:"primary",onClick:Je=>w(b.row.id,!0),loading:o(c).isApplyingStash},{default:a(()=>s[94]||(s[94]=[y(" åº”ç”¨å¹¶åˆ é™¤ ")])),_:2},1032,["onClick","loading"]),t(z,{size:"small",type:"danger",onClick:Je=>re(b.row.id),loading:o(c).isDroppingStash},{default:a(()=>s[95]||(s[95]=[y(" åˆ é™¤ ")])),_:2},1032,["onClick","loading"])]),_:1})]),_:1},8,["data"])),[[Js,o(c).isLoadingStashes]]),o(c).stashes.length>0?(f(),_("div",dn,[t(z,{type:"danger",onClick:Ye,loading:o(c).isDroppingStash},{default:a(()=>s[96]||(s[96]=[y(" æ¸…ç©ºæ‰€æœ‰å‚¨è— ")])),_:1},8,["loading"])])):A("",!0)])]),_:1},8,["modelValue"]),t(vt,{title:"å‚¨è—æ›´æ”¹ (Git Stash)",modelValue:P.value,"onUpdate:modelValue":s[29]||(s[29]=b=>P.value=b),width:"500px","close-on-click-modal":!1},{footer:a(()=>[e("div",pn,[t(z,{onClick:s[28]||(s[28]=b=>P.value=!1)},{default:a(()=>s[100]||(s[100]=[y("å–æ¶ˆ")])),_:1}),t(z,{type:"primary",onClick:Ee,loading:o(c).isSavingStash},{default:a(()=>s[101]||(s[101]=[y(" å‚¨è— ")])),_:1},8,["loading"])])]),default:a(()=>[e("div",fn,[s[99]||(s[99]=e("p",null,"å°†å½“å‰å·¥ä½œåŒºçš„æ›´æ”¹å‚¨è—èµ·æ¥ï¼Œç¨åå¯ä»¥å†æ¬¡åº”ç”¨ã€‚",-1)),t(ns,{"label-position":"top"},{default:a(()=>[t(ct,{label:"å‚¨è—è¯´æ˜ (å¯é€‰)"},{default:a(()=>[t(rt,{modelValue:O.value,"onUpdate:modelValue":s[25]||(s[25]=b=>O.value=b),placeholder:"è¾“å…¥å‚¨è—è¯´æ˜ï¼ˆå¯é€‰ï¼‰",clearable:""},null,8,["modelValue"])]),_:1}),t(ct,null,{default:a(()=>[t(wt,{modelValue:ae.value,"onUpdate:modelValue":s[26]||(s[26]=b=>ae.value=b)},{default:a(()=>s[97]||(s[97]=[y(" åŒ…å«æœªè·Ÿè¸ªæ–‡ä»¶ (--include-untracked) ")])),_:1},8,["modelValue"])]),_:1}),t(ct,null,{default:a(()=>[t(wt,{modelValue:ke.value,"onUpdate:modelValue":s[27]||(s[27]=b=>ke.value=b)},{default:a(()=>s[98]||(s[98]=[y(" æ’é™¤é”å®šæ–‡ä»¶ ")])),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])],2)}}}),mn=Lt(vn,[["__scopeId","data-v-b7f77384"]]),gn={class:"log-header"},yn={class:"log-actions"},hn={key:0,class:"filter-panel-header"},_n={class:"filter-form"},wn={class:"filter-item"},kn={class:"filter-item"},$n={class:"filter-item"},bn={class:"filter-item"},Cn={class:"filter-actions"},Sn={key:0},Tn={key:1,class:"content-area-content"},xn={key:0,class:"graph-view"},Vn={key:0,class:"commit-count"},Ln={class:"graph-controls"},zn={class:"zoom-controls"},Bn={class:"scale-info"},Gn={key:1,class:"table-view-container"},Rn=["onClick"],Dn={class:"commit-message-cell"},Fn={class:"message-content"},jn={key:0,class:"branch-container"},Un={class:"message-text"},Mn={class:"author-name"};const On={class:"commit-detail-container"},An={key:0,class:"commit-info"},En={class:"commit-info-header"},Pn={class:"info-item"},Hn={class:"item-value"},In={class:"info-item"},Nn={class:"item-value"},Jn={class:"info-item"},Wn={class:"item-value"},qn={class:"commit-message-container"},Yn=["innerHTML"],Xn={class:"commit-files-diff"},Kn={class:"files-list"},Zn={key:1},Qn=["onClick"],ei={class:"file-diff"},ti={key:0},si={key:1},ai=["innerHTML"],kt=.5,Ft=1.5,Jt=.1,li=St({__name:"LogList",setup(ve,{expose:c}){const C=yt();let v=[];const g=d(v),E=d(""),G=d(!1),M=ze(()=>C.isLoadingLog||G.value),H=d(!1),pe=d(0),D=d(!1),Q=d(null),ee=d(1),oe=d(!0),W=d(!1),me=d(null),Y=d(!1),S=d(null),x=d([]),F=d(""),X=d(!1),B=d(""),U=d(1),te=d(!1),ce=d(!1),$=d([]),T=d(""),N=d(null),ie=d([]),I=d([]),se=d([]),ue=d(!1),V=d(0),p=d(0),P=d(null),j=ze(()=>g.value);async function O(n=!1,l=1){if(!yt().isGitRepo){E.value="å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“";return}try{l>1?W.value=!0:G.value=!0;const h=new URLSearchParams;h.append("page",l.toString()),h.append("all",n.toString()),h.append("with_parents","true"),$.value.length>0&&h.append("author",$.value.join(",")),I.value.length>0&&h.append("branch",I.value.join(",")),T.value&&h.append("message",T.value),N.value&&Array.isArray(N.value)&&N.value.length===2&&(h.append("dateFrom",N.value[0]),h.append("dateTo",N.value[1])),h.append("_t",Date.now().toString());const ne=await(await fetch(`/api/log?${h.toString()}`)).json();if(!ne||!ne.data||!Array.isArray(ne.data)){E.value="åŠ è½½æäº¤å†å²å¤±è´¥: æœåŠ¡å™¨è¿”å›æ•°æ®æ ¼å¼ä¸æ­£ç¡®";return}const he=l>1;he?ne.data.forEach(R=>v.push(R)):(v.length=0,ne.data.forEach(R=>v.push(R))),g.value=[...v],ee.value=l,pe.value=ne.total||v.length,oe.value=ne.hasMore===!0,he||(te.value=!0,setTimeout(()=>{te.value=!1},2e3)),!he&&D.value?setTimeout(ae,0):!he&&!D.value&&!n&&ut(()=>{_e(),setTimeout(Ke,200)}),E.value=""}catch(h){E.value="åŠ è½½æäº¤å†å²å¤±è´¥: "+(h instanceof Error?h.message:String(h)),l>1&&(oe.value=!1)}finally{l>1?W.value=!1:G.value=!1}}async function ae(){if(Q.value&&v.length!==0)try{Q.value.innerHTML="";const n=ga(Q.value,{orientation:"vertical-reverse",template:"metro",author:"æäº¤è€… <committer@example.com>"}),l={},m=n.branch(C.currentBranch||"main");l[C.currentBranch||"main"]=m,v.forEach(h=>{let le=m;if(h.branch){const ne=Ae(h.branch.split(",")[0]);l[ne]||(l[ne]=n.branch(ne)),le=l[ne]}le.commit({hash:h.hash,subject:h.message,author:`${h.author} <${h.email}>`})}),setTimeout(()=>{r()},100)}catch(n){E.value="æ¸²æŸ“å›¾è¡¨å¤±è´¥: "+(n instanceof Error?n.message:String(n))}}function ke(){D.value=!D.value,D.value&&v.length>0&&setTimeout(ae,0)}function xe(){H.value=!H.value,H.value||(oe.value=!0),ee.value=1,O(H.value),ut(()=>{setTimeout(()=>{!D.value&&!H.value&&(_e(),Ke())},300)})}function Ae(n){return n.includes("HEAD -> ")?n.replace("HEAD -> ",""):n.includes("origin/")?n:n.trim()}function Ee(n){return n.includes("HEAD")?"success":n.includes("origin/")?"warning":"info"}const w=d(null),re=d(null);function Ye(n){if(D.value||!oe.value||W.value||M.value)return;const l=n.target,{scrollTop:m,scrollHeight:h,clientHeight:le}=l;h-m-le<=20&&De()}function _e(){if(!w.value)return;const n=w.value.$el.querySelector(".el-table__body-wrapper");n&&(re.value=n,re.value&&(re.value.removeEventListener("scroll",Ye,!0),re.value.addEventListener("scroll",Ye,!0)))}function Ue(){re.value&&(re.value.removeEventListener("scroll",Ye,!0),re.value=null)}function Me(n){n.key==="Escape"&&Pe.value&&(Pe.value=!1)}ht(()=>{C.isGitRepo?(C.log.length>0?(v.length=0,C.log.forEach(n=>v.push(n)),pe.value=C.log.length,D.value&&setTimeout(()=>{ae()},100)):O(),ot()):E.value="å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",ut(()=>{setTimeout(()=>{_e()},500)}),Ze(()=>w.value,n=>{n&&!D.value&&!H.value&&ut(()=>{_e()})}),window.addEventListener("keydown",Me)}),Ze(()=>C.allBranches,n=>{n&&n.length>0?se.value=[...n].sort():se.value=[]},{immediate:!0}),oa(()=>{Ue(),me.value!==null&&(window.clearInterval(me.value),me.value=null),window.removeEventListener("keydown",Me)});async function Re(){await C.fetchLog(!0),v.length=0,C.log.forEach(n=>v.push(n)),g.value=[...v],pe.value=C.log.length,ee.value=1,oe.value=!1,te.value=!0,setTimeout(()=>{te.value=!1},2e3),D.value&&(await ut(),ae())}Ze(()=>C.log,n=>{try{v.length=0,Array.isArray(n)&&n.forEach(l=>l&&v.push(l)),pe.value=v.length,ee.value=1,g.value=[...v],te.value=!0,setTimeout(()=>{te.value=!1},2e3),D.value&&v.length>0&&setTimeout(ae,0)}catch{}},{immediate:!0}),c({refreshLog:Re});function de(){U.value<Ft&&(U.value=Math.min(Ft,U.value+Jt),k())}function Ne(){U.value>kt&&(U.value=Math.max(kt,U.value-Jt),k())}function k(){if(!Q.value)return;const n=Q.value.querySelector("svg");n&&(n.style.transform=`scale(${U.value})`,n.style.transformOrigin="top left")}function r(){if(!Q.value)return;const n=Q.value.querySelector("svg");if(!n)return;const l=n.getBoundingClientRect().width/U.value,m=Q.value.clientWidth;l>m?U.value=Math.max(kt,m/l):U.value=1,k()}async function K(n){if(n){S.value=n,Y.value=!0,X.value=!0,x.value=[],F.value="",B.value="";try{if(!n.hash||n.hash.length<7){F.value="æ— æ•ˆçš„æäº¤å“ˆå¸Œå€¼",X.value=!1;return}const m=await(await fetch(`/api/commit-files?hash=${n.hash}`)).json();m.success&&Array.isArray(m.files)?(x.value=m.files,x.value.length>0?await J(n.hash,x.value[0]):F.value="è¯¥æäº¤æ²¡æœ‰å˜æ›´æ–‡ä»¶"):F.value=`è·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${m.error||"æœªçŸ¥é”™è¯¯"}`}catch(l){F.value=`è·å–æäº¤è¯¦æƒ…å¤±è´¥: ${l.message}`}finally{X.value=!1}}}async function J(n,l){X.value=!0,B.value=l;try{const h=await(await fetch(`/api/commit-file-diff?hash=${n}&file=${encodeURIComponent(l)}`)).json();h.success?F.value=h.diff||"æ²¡æœ‰å˜æ›´å†…å®¹":F.value=`è·å–å·®å¼‚å¤±è´¥: ${h.error||"æœªçŸ¥é”™è¯¯"}`}catch(m){F.value=`è·å–å·®å¼‚å¤±è´¥: ${m.message}`}finally{X.value=!1}}function be(n){if(!n)return"";const l=n.split(`
`);function m(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}return l.map(h=>{const le=m(h);return h.startsWith("diff --git")?`<div class="diff-header">${le}</div>`:h.startsWith("---")?`<div class="diff-old-file">${le}</div>`:h.startsWith("+++")?`<div class="diff-new-file">${le}</div>`:h.startsWith("@@")?`<div class="diff-hunk-header">${le}</div>`:h.startsWith("+")?`<div class="diff-added">${le}</div>`:h.startsWith("-")?`<div class="diff-removed">${le}</div>`:`<div class="diff-context">${le}</div>`}).join("")}function Ve(n){return n?n.trim():"(æ— æäº¤ä¿¡æ¯)"}function fe(n){if(!n)return"";const l=/^(feat|fix|docs|style|refactor|perf|test|chore|build|ci|revert)(\([^)]+\))?\s*:\s*(.+)$/s,m=n.match(l);return m?m[3].trim():n.trim()}async function ye(n){try{const l=fe(n);await navigator.clipboard.writeText(l),i.success("æäº¤ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{i.error("å¤åˆ¶å¤±è´¥")}}function De(){!oe.value||W.value||M.value||O(H.value,ee.value+1)}function Ce(){$.value=[],I.value=[],T.value="",N.value=null,ee.value=1,O(H.value,1)}function $e(){ee.value=1,O(H.value,1)}async function ot(){try{const l=await(await fetch("/api/authors")).json();l.success&&Array.isArray(l.authors)?ie.value=l.authors.sort():Qe()}catch{Qe()}}function Qe(){const n=new Set;g.value.forEach(l=>{l.author&&n.add(l.author)}),ie.value=Array.from(n).sort()}Ze(()=>g.value,()=>{},{deep:!0});function Z(n,l,m){m.preventDefault(),V.value=m.clientY,p.value=m.clientX,P.value=n,ue.value=!0;const h=()=>{ue.value=!1,document.removeEventListener("click",h)};setTimeout(()=>{document.addEventListener("click",h)},0)}async function nt(n){if(n)try{await Ie.confirm(`ç¡®å®šè¦æ’¤é”€æäº¤ ${n.hash.substring(0,7)} å—ï¼Ÿè¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤æ¥æ’¤é”€è¿™æ¬¡æäº¤çš„æ›´æ”¹ã€‚`,"æ’¤é”€æäº¤ç¡®è®¤",{confirmButtonText:"ç¡®è®¤",cancelButtonText:"å–æ¶ˆ",type:"warning"});const m=await(await fetch("/api/revert-commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:n.hash})})).json();m.success?(i.success(m.message||"å·²æˆåŠŸæ’¤é”€æäº¤"),Re(),C.fetchStatus(),C.getBranchStatus()):i.error(m.error||"æ’¤é”€æäº¤å¤±è´¥")}catch(l){l!=="cancel"&&i.error("æ’¤é”€æäº¤å¤±è´¥: "+(l.message||l))}}async function Xe(n){if(n)try{await Ie.confirm(`ç¡®å®šè¦å°†æäº¤ ${n.hash.substring(0,7)} Cherry-Pick åˆ°å½“å‰åˆ†æ”¯å—ï¼Ÿ`,"Cherry-Pickç¡®è®¤",{confirmButtonText:"ç¡®è®¤",cancelButtonText:"å–æ¶ˆ",type:"warning"});const m=await(await fetch("/api/cherry-pick-commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:n.hash})})).json();m.success?(i.success(m.message||"å·²æˆåŠŸCherry-Pickæäº¤"),Re(),C.fetchStatus(),C.getBranchStatus()):i.error(m.error||"Cherry-Pickæäº¤å¤±è´¥")}catch(l){l!=="cancel"&&i.error("Cherry-Pickæäº¤å¤±è´¥: "+(l.message||l))}}async function qe(n){if(n)try{await navigator.clipboard.writeText(n.hash),i.success(`å·²å¤åˆ¶æäº¤å“ˆå¸Œ: ${n.hash.substring(0,7)}`)}catch(l){i.error(`å¤åˆ¶æäº¤å“ˆå¸Œå¤±è´¥: ${l.message}`)}}async function et(n){if(n)try{await Ie.confirm(`ç¡®å®šè¦å°†å½“å‰åˆ†æ”¯é‡ç½®(hard)åˆ°æäº¤ ${n.hash.substring(0,7)} å—ï¼Ÿ
      
      è­¦å‘Šï¼šè¿™å°†ä¸¢å¤±è¯¥æäº¤ä¹‹åçš„æ‰€æœ‰æ›´æ”¹ï¼`,"é‡ç½®ç¡®è®¤",{confirmButtonText:"ç¡®è®¤é‡ç½®",cancelButtonText:"å–æ¶ˆ",type:"warning",dangerouslyUseHTMLString:!0});const m=await(await fetch("/api/reset-to-commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:n.hash})})).json();m.success?(i.success(m.message||"å·²æˆåŠŸé‡ç½®åˆ°æŒ‡å®šæäº¤"),Re(),C.fetchStatus(),C.getBranchStatus()):i.error(m.error||"é‡ç½®åˆ°æŒ‡å®šæäº¤å¤±è´¥")}catch(l){l!=="cancel"&&i.error("é‡ç½®åˆ°æŒ‡å®šæäº¤å¤±è´¥: "+(l.message||l))}}function Ke(){if(D.value||!oe.value||W.value||M.value||H.value)return;if(!re.value){_e();return}const{scrollTop:n,scrollHeight:l,clientHeight:m}=re.value;l-n-m<=50&&De()}Ze(()=>D.value,n=>{!n&&!H.value&&ut(()=>{_e(),setTimeout(Ke,200)})});const Pe=d(!1);function _t(){Pe.value=!Pe.value,ut(()=>{D.value&&Q.value&&ae()})}return(n,l)=>{var he;const m=Tt,h=qt,le=Qt,ne=Yt;return f(),_(we,null,[e("div",{class:ge(["card",{"fullscreen-mode":Pe.value}])},[e("div",gn,[l[13]||(l[13]=e("div",{class:"header-left"},[e("h2",null,"æäº¤å†å²")],-1)),e("div",yn,[D.value?A("",!0):(f(),q(o(je),{key:0,type:ce.value?"primary":"default",size:"small",onClick:l[0]||(l[0]=R=>ce.value=!ce.value),class:ge(["action-button filter-button icon-only-button",{"active-filter":ce.value}])},{icon:a(()=>[t(m,null,{default:a(()=>[t(o(na))]),_:1})]),_:1},8,["type","class"])),t(o(je),{type:"primary",size:"small",onClick:ke,class:ge(["action-button view-mode-button icon-only-button",{"active-view":D.value}])},{icon:a(()=>[t(m,null,{default:a(()=>[(f(),q(gt(D.value?o(_s):o(ia))))]),_:1})]),_:1},8,["class"]),He(t(o(je),{type:"success",size:"small",onClick:xe,loading:M.value,class:ge(["action-button commit-display-button",{"active-commits":H.value}])},{icon:a(()=>[t(m,null,{default:a(()=>[(f(),q(gt(H.value?o(ra):o(ca))))]),_:1})]),default:a(()=>[y(" "+L(H.value?"æ˜¾ç¤ºåˆ†é¡µåŠ è½½":"æ˜¾ç¤ºæ‰€æœ‰æäº¤"),1)]),_:1},8,["loading","class"]),[[dt,!1]]),t(o(je),{type:"info",size:"small",onClick:_t,class:ge(["action-button fullscreen-button icon-only-button",{"active-fullscreen":Pe.value}])},{icon:a(()=>[t(m,null,{default:a(()=>[(f(),q(gt(Pe.value?o(Wt):o(ua))))]),_:1})]),_:1},8,["class"]),t(o(je),{circle:"",size:"small",onClick:l[1]||(l[1]=R=>Re()),class:ge([{"refresh-button-animated":te.value},"action-button refresh-button"])},{default:a(()=>[M.value?(f(),q(m,{key:1},{default:a(()=>[t(o(da))]),_:1})):(f(),q(m,{key:0},{default:a(()=>[t(o(Xt))]),_:1}))]),_:1},8,["class"])])]),ce.value&&!D.value?(f(),_("div",hn,[e("div",_n,[e("div",wn,[t(o(Ut),{modelValue:$.value,"onUpdate:modelValue":l[2]||(l[2]=R=>$.value=R),placeholder:"é€‰æ‹©ä½œè€…",multiple:"",clearable:"",filterable:"",class:"filter-input",size:"small"},{prefix:a(()=>l[14]||(l[14]=[e("span",{class:"compact-label"},"ä½œè€…",-1)])),default:a(()=>[(f(!0),_(we,null,Be(ie.value,R=>(f(),q(o(jt),{key:R,label:R,value:R},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",kn,[t(o(Ut),{modelValue:I.value,"onUpdate:modelValue":l[3]||(l[3]=R=>I.value=R),placeholder:"é€‰æ‹©åˆ†æ”¯",multiple:"",clearable:"",filterable:"",class:"filter-input",size:"small"},{prefix:a(()=>l[15]||(l[15]=[e("span",{class:"compact-label"},"åˆ†æ”¯",-1)])),default:a(()=>[(f(!0),_(we,null,Be(se.value,R=>(f(),q(o(jt),{key:R,label:R,value:R},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",$n,[t(o(Zt),{modelValue:T.value,"onUpdate:modelValue":l[4]||(l[4]=R=>T.value=R),placeholder:"æäº¤ä¿¡æ¯å…³é”®è¯",clearable:"",class:"filter-input",size:"small"},{prefix:a(()=>l[16]||(l[16]=[e("span",{class:"compact-label"},"ä¿¡æ¯",-1)])),_:1},8,["modelValue"])]),e("div",bn,[t(o(fa),{modelValue:N.value,"onUpdate:modelValue":l[5]||(l[5]=R=>N.value=R),type:"daterange","range-separator":"è‡³","start-placeholder":"å¼€å§‹æ—¥æœŸ","end-placeholder":"ç»“æŸæ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",class:"filter-input date-range",size:"small"},{prefix:a(()=>l[17]||(l[17]=[e("span",{class:"compact-label"},"æ—¥æœŸ",-1)])),_:1},8,["modelValue"])]),e("div",Cn,[t(o(je),{type:"primary",size:"small",onClick:$e,class:"filter-action-button"},{default:a(()=>l[18]||(l[18]=[y("åº”ç”¨")])),_:1}),t(o(je),{type:"info",size:"small",onClick:Ce,class:"filter-action-button"},{default:a(()=>l[19]||(l[19]=[y("é‡ç½®")])),_:1})])])])):A("",!0),e("div",{class:ge(["content-area",{"with-filter":ce.value&&!D.value}])},[E.value?(f(),_("div",Sn,L(E.value),1)):(f(),_("div",Tn,[D.value?(f(),_("div",xn,[o(v).length>0?(f(),_("div",Vn," æ˜¾ç¤º "+L(o(v).length)+" æ¡æäº¤è®°å½• "+L(H.value?"(å…¨éƒ¨)":"(åˆ†é¡µåŠ è½½ï¼Œæ¯é¡µ20æ¡)"),1)):A("",!0),e("div",Ln,[e("div",zn,[t(o(je),{type:"primary",circle:"",size:"small",onClick:Ne,disabled:U.value<=kt},{default:a(()=>[t(m,null,{default:a(()=>[t(o(pa))]),_:1})]),_:1},8,["disabled"]),t(o(va),{modelValue:U.value,"onUpdate:modelValue":l[6]||(l[6]=R=>U.value=R),min:kt,max:Ft,step:Jt,onChange:k,class:"zoom-slider"},null,8,["modelValue"]),t(o(je),{type:"primary",circle:"",size:"small",onClick:de,disabled:U.value>=Ft},{default:a(()=>[t(m,null,{default:a(()=>[t(o(ma))]),_:1})]),_:1},8,["disabled"]),t(o(je),{type:"primary",size:"small",onClick:r},{default:a(()=>l[20]||(l[20]=[y(" è‡ªé€‚åº”å¤§å° ")])),_:1})]),e("div",Bn," ç¼©æ”¾: "+L(Math.round(U.value*100))+"% ",1)]),e("div",{ref_key:"graphContainer",ref:Q,class:"graph-container"},null,512)])):(f(),_("div",Gn,[He((f(),q(o(Cs),{ref_key:"tableRef",ref:w,data:j.value,stripe:"",border:"",class:"log-table","empty-text":M.value?"åŠ è½½ä¸­...":"æ²¡æœ‰åŒ¹é…çš„æäº¤è®°å½•",height:"450",onRowContextmenu:Z},{default:a(()=>[t(o(bt),{label:"å“ˆå¸Œ",width:"80",resizable:""},{default:a(R=>[e("span",{class:"commit-hash",onClick:Ge=>K(R.row)},L(R.row.hash.substring(0,6)),9,Rn)]),_:1}),t(o(bt),{label:"æäº¤ä¿¡æ¯","min-width":"300"},{default:a(R=>[e("div",Dn,[e("div",Fn,[R.row.branch?(f(),_("div",jn,[(f(!0),_(we,null,Be(R.row.branch.split(","),(Ge,Oe)=>(f(),q(o(xt),{key:Oe,size:"small",type:Ee(Ge),class:"branch-tag"},{default:a(()=>[y(L(Ae(Ge)),1)]),_:2},1032,["type"]))),128))])):A("",!0),e("span",Un,L(R.row.message),1),t(o(je),{type:"text",icon:o(Ct),size:"small",onClick:We(Ge=>ye(R.row.message),["stop"]),class:"copy-message-btn",title:"å¤åˆ¶çº¯å‡€æäº¤ä¿¡æ¯ï¼ˆä¸å«ç±»å‹å‰ç¼€ï¼‰"},null,8,["icon","onClick"])])])]),_:1}),t(o(bt),{prop:"date",label:"æ—¥æœŸ",width:"150",resizable:""}),t(o(bt),{label:"ä½œè€…",width:"100",resizable:""},{default:a(R=>[t(h,{content:R.row.email,placement:"top","hide-after":1e3},{default:a(()=>[e("span",Mn,L(R.row.author),1)]),_:2},1032,["content"])]),_:1})]),_:1},8,["data","empty-text"])),[[ne,M.value]]),(H.value,A("",!0))]))]))],2),t(o(Vt),{modelValue:Y.value,"onUpdate:modelValue":l[7]||(l[7]=R=>Y.value=R),title:`æäº¤è¯¦æƒ…: ${(he=S.value)!=null&&he.hash?S.value.hash.substring(0,7):"æœªçŸ¥"}`,width:"80%","destroy-on-close":"",class:"commit-detail-dialog"},{default:a(()=>[He((f(),_("div",On,[S.value?(f(),_("div",An,[e("div",En,[e("div",Pn,[l[24]||(l[24]=e("span",{class:"item-label"},"å“ˆå¸Œ:",-1)),e("span",Hn,L(S.value.hash),1)]),e("div",In,[l[25]||(l[25]=e("span",{class:"item-label"},"ä½œè€…:",-1)),e("span",Nn,L(S.value.author)+" <"+L(S.value.email)+">",1)]),e("div",Jn,[l[26]||(l[26]=e("span",{class:"item-label"},"æ—¥æœŸ:",-1)),e("span",Wn,L(S.value.date),1)])]),e("div",qn,[l[27]||(l[27]=e("div",{class:"message-label"},"æäº¤ä¿¡æ¯:",-1)),e("div",{class:"message-content",innerHTML:Ve(S.value.message).replace(/\n/g,"<br>")},null,8,Yn)])])):A("",!0),e("div",Xn,[e("div",Kn,[l[28]||(l[28]=e("h3",null,"å˜æ›´æ–‡ä»¶",-1)),x.value.length===0?(f(),q(le,{key:0,description:"æ²¡æœ‰æ‰¾åˆ°å˜æ›´æ–‡ä»¶"})):(f(),_("ul",Zn,[(f(!0),_(we,null,Be(x.value,R=>(f(),_("li",{key:R,class:ge({"active-file":R===B.value}),onClick:Ge=>J(S.value.hash,R)},L(R),11,Qn))),128))]))]),e("div",ei,[B.value?(f(),_("h3",ti," æ–‡ä»¶å·®å¼‚: "+L(B.value),1)):(f(),_("h3",si,"æ–‡ä»¶å·®å¼‚")),!F.value&&!X.value?(f(),q(le,{key:2,description:"é€‰æ‹©æ–‡ä»¶æŸ¥çœ‹å·®å¼‚"})):F.value?(f(),_("div",{key:3,innerHTML:be(F.value),class:"diff-content"},null,8,ai)):A("",!0)])])])),[[ne,X.value]])]),_:1},8,["modelValue","title"])],2),He(e("div",{class:ge(["context-menu",{"fullscreen-context-menu":Pe.value}]),style:$t({top:V.value+"px",left:p.value+"px"})},[e("div",{class:"context-menu-item",onClick:l[8]||(l[8]=R=>K(P.value))},l[29]||(l[29]=[e("i",{class:"el-icon-view"},null,-1),y(" æŸ¥çœ‹è¯¦æƒ… ")])),e("div",{class:"context-menu-item",onClick:l[9]||(l[9]=R=>qe(P.value))},l[30]||(l[30]=[e("i",{class:"el-icon-document-copy"},null,-1),y(" å¤åˆ¶æäº¤å“ˆå¸Œ ")])),e("div",{class:"context-menu-item",onClick:l[10]||(l[10]=R=>et(P.value))},l[31]||(l[31]=[e("i",{class:"el-icon-refresh-right"},null,-1),y(" é‡ç½®åˆ°è¯¥æäº¤(hard) ")])),e("div",{class:"context-menu-item",onClick:l[11]||(l[11]=R=>nt(P.value))},l[32]||(l[32]=[e("i",{class:"el-icon-delete"},null,-1),y(" æ’¤é”€æäº¤ (Revert) ")])),e("div",{class:"context-menu-item",onClick:l[12]||(l[12]=R=>Xe(P.value))},l[33]||(l[33]=[e("i",{class:"el-icon-edit"},null,-1),y(" Cherry-Pick åˆ°å½“å‰åˆ†æ”¯ ")]))],6),[[dt,ue.value]])],64)}}}),oi=Lt(li,[["__scopeId","data-v-081ce552"]]),ni={class:"dialog-header"},ii={class:"header-actions"},ri={class:"dialog-content"},ci={key:0,class:"loading-state"},ui={key:2,class:"history-list"},di=["onClick"],fi={class:"command-info"},pi={class:"command-text"},vi={class:"command-meta"},mi={class:"timestamp"},gi={class:"duration"},yi={class:"item-actions"},hi={key:0,class:"item-details"},_i={key:0,class:"output-section"},wi={class:"output-header"},ki={class:"output-content"},$i={key:0,class:"truncation-notice"},bi={class:"output-header"},Ci={class:"output-content"},Si={key:0,class:"truncation-notice"},Ti={key:2,class:"output-section error"},xi={class:"output-content"},Vi=St({__name:"CommandHistory",setup(ve){const c=yt(),C=d([]),v=d(!1),g=d(!1),E=d(!1),G=d(!1),M=d(new Set),H=d(!1),pe=d(!1);function D(){pe.value=!0,C.value.length===0&&Q()}async function Q(){try{if(v.value=!0,c.socket&&c.socket.connected)c.socket.emit("request_full_history");else{const T=await(await fetch("/api/command-history")).json();T.success?C.value=T.history:i.error(`åŠ è½½å‘½ä»¤å†å²å¤±è´¥: ${T.error}`)}}catch($){i.error(`åŠ è½½å‘½ä»¤å†å²å¤±è´¥: ${$.message}`)}finally{v.value=!1}}async function ee(){if(C.value.length===0){i.warning("æ²¡æœ‰å¯å¤åˆ¶çš„å‘½ä»¤å†å²");return}try{E.value=!0;const $=C.value.map(T=>{let N=`# ${me(T.timestamp)} (è€—æ—¶: ${Y(T.executionTime)}) - ${T.success?"æˆåŠŸ":"å¤±è´¥"}
`;if(N+=`${T.command}
`,T.stdout&&(N+=`
# è¾“å‡º:
${T.stdout}
`),T.stderr){const ie=B(T.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º";N+=`
# ${ie}:
${T.stderr}
`}return T.error&&(N+=`
# é”™è¯¯ä¿¡æ¯:
${T.error}
`),N}).join(`
---

`);await navigator.clipboard.writeText($),i.success("å‘½ä»¤å†å²å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch($){i.error(`å¤åˆ¶å¤±è´¥: ${$.message}`)}finally{E.value=!1}}async function oe(){if(C.value.length===0){i.warning("æ²¡æœ‰å¯å¤åˆ¶çš„å‘½ä»¤");return}try{H.value=!0;const $=C.value.map(T=>T.command).join(`
`);await navigator.clipboard.writeText($),i.success("å‘½ä»¤åˆ—è¡¨å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch($){i.error(`å¤åˆ¶å¤±è´¥: ${$.message}`)}finally{H.value=!1}}async function W(){try{if(await Ie.confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å‘½ä»¤å†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","æ¸…ç©ºå‘½ä»¤å†å²",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),g.value=!0,c.socket&&c.socket.connected)c.socket.emit("clear_command_history");else{const T=await(await fetch("/api/clear-command-history",{method:"POST",headers:{"Content-Type":"application/json"}})).json();T.success?(C.value=[],i.success("å‘½ä»¤å†å²å·²æ¸…ç©º")):i.error(`æ¸…ç©ºå‘½ä»¤å†å²å¤±è´¥: ${T.error}`)}}catch($){$!=="cancel"&&$.toString()!=="Error: cancel"&&i.error(`æ¸…ç©ºå‘½ä»¤å†å²å¤±è´¥: ${$.message}`)}finally{g.value=!1}}function me($){return new Date($).toLocaleString()}function Y($){return $<1e3?`${$}ms`:`${($/1e3).toFixed(2)}s`}function S($){M.value.has($)?M.value.delete($):M.value.add($)}function x($){return M.value.has($)}async function F($){try{await navigator.clipboard.writeText($),i.success("å‘½ä»¤å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(T){i.error(`å¤åˆ¶å¤±è´¥: ${T.message}`)}}function X($){return $.includes("git push")||$.includes("git-push")}function B($){return!!X($)}async function U($){try{let T="";if($.stdout&&(T+=`æ ‡å‡†è¾“å‡º:
${$.stdout}

`),$.stderr){const N=B($.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º";T+=`${N}:
${$.stderr}

`}$.error&&(T+=`é”™è¯¯ä¿¡æ¯:
${$.error}`),await navigator.clipboard.writeText(T.trim()),i.success("è¾“å‡ºå·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(T){i.error(`å¤åˆ¶å¤±è´¥: ${T.message}`)}}function te(){if(!c.socket){console.error("Socketå®ä¾‹ä¸å¯ç”¨");return}c.socket.on("initial_command_history",$=>{C.value=$.history,G.value=!0}),c.socket.on("command_history_update",$=>{C.value.unshift($.newCommand),C.value.length>100&&C.value.pop(),G.value=!0}),c.socket.on("full_command_history",$=>{C.value=$.history,v.value=!1,G.value=!0}),c.socket.on("command_history_cleared",$=>{$.success&&(C.value=[],i.success("å‘½ä»¤å†å²å·²æ¸…ç©º")),g.value=!1}),c.socket.on("connect",()=>{G.value=!0,i.success("å·²è¿æ¥åˆ°å®æ—¶å‘½ä»¤å†å²")}),c.socket.on("disconnect",()=>{G.value=!1,i.warning("å®æ—¶å‘½ä»¤å†å²è¿æ¥å·²æ–­å¼€")})}function ce(){c.socket&&(c.socket.off("initial_command_history"),c.socket.off("command_history_update"),c.socket.off("full_command_history"),c.socket.off("command_history_cleared"))}return ht(()=>{te(),c.socket||(console.log("å°è¯•åˆå§‹åŒ–Socketè¿æ¥"),c.initSocketConnection())}),ps(()=>{ce()}),($,T)=>{const N=je,ie=xt,I=Tt,se=Qt,ue=Kt,V=Vt;return f(),_(we,null,[t(N,{type:"primary",icon:o(ya),onClick:D,class:"command-history-button",title:"æŸ¥çœ‹Gitå‘½ä»¤å†å²"},{default:a(()=>T[1]||(T[1]=[y(" å‘½ä»¤å†å² ")])),_:1},8,["icon"]),(f(),q(ha,{to:"body"},[t(V,{modelValue:pe.value,"onUpdate:modelValue":T[0]||(T[0]=p=>pe.value=p),title:"Git å‘½ä»¤å†å²",width:"80%",top:"5vh","destroy-on-close":"",class:"command-history-dialog","z-index":99999,"append-to-body":"",modal:""},{header:a(()=>[e("div",ni,[T[2]||(T[2]=e("h2",null,"Git å‘½ä»¤å†å²",-1)),e("div",ii,[t(ie,{type:G.value?"success":"danger",size:"small",effect:"dark",class:"socket-status"},{default:a(()=>[y(L(G.value?"å®æ—¶æ›´æ–°":"æœªè¿æ¥"),1)]),_:1},8,["type"]),t(N,{type:"success",icon:o(Ct),circle:"",size:"small",onClick:oe,loading:H.value,class:"copy-commands-button",title:"åªå¤åˆ¶å‘½ä»¤åˆ—è¡¨ï¼ˆä¸å«è¾“å‡ºï¼‰",disabled:C.value.length===0},null,8,["icon","loading","disabled"]),t(N,{type:"primary",icon:o(Ct),circle:"",size:"small",onClick:ee,loading:E.value,class:"copy-all-button",title:"å¤åˆ¶å®Œæ•´å‘½ä»¤å†å²ï¼ˆå«è¾“å‡ºï¼‰",disabled:C.value.length===0},null,8,["icon","loading","disabled"]),t(N,{type:"danger",icon:o(ws),circle:"",size:"small",onClick:W,loading:g.value,class:"clear-button",title:"æ¸…ç©ºå‘½ä»¤å†å²",disabled:C.value.length===0},null,8,["icon","loading","disabled"])])])]),default:a(()=>[e("div",ri,[v.value&&C.value.length===0?(f(),_("div",ci,[t(I,{class:"loading-icon is-loading"},{default:a(()=>T[3]||(T[3]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})],-1)])),_:1}),T[4]||(T[4]=e("div",{class:"loading-text"},"åŠ è½½å‘½ä»¤å†å²...",-1))])):C.value.length===0?(f(),q(se,{key:1,description:"æš‚æ— å‘½ä»¤å†å²"})):(f(),_("div",ui,[(f(!0),_(we,null,Be(C.value,(p,P)=>(f(),_("div",{key:P,class:ge(["history-item",{"is-error":!p.success}])},[e("div",{class:"item-header",onClick:j=>S(P)},[e("div",fi,[e("div",pi,[t(ie,{size:"small",type:p.success?"success":"danger",effect:"dark",class:"status-tag"},{default:a(()=>[y(L(p.success?"æˆåŠŸ":"å¤±è´¥"),1)]),_:2},1032,["type"]),e("code",null,L(p.command),1)]),e("div",vi,[e("span",mi,L(me(p.timestamp)),1),e("span",gi,"è€—æ—¶: "+L(Y(p.executionTime)),1)])]),e("div",yi,[t(N,{type:"primary",icon:o(Ct),circle:"",size:"small",onClick:We(j=>F(p.command),["stop"]),title:"å¤åˆ¶å‘½ä»¤"},null,8,["icon","onClick"]),t(N,{type:x(P)?"primary":"default",icon:x(P)?o(hs):o(mt),circle:"",size:"small",onClick:We(j=>S(P),["stop"]),title:"å±•å¼€/æ”¶èµ·"},null,8,["type","icon","onClick"])])],8,di),x(P)?(f(),_("div",hi,[p.stdout?(f(),_("div",_i,[e("div",wi,[T[5]||(T[5]=e("h4",null,"æ ‡å‡†è¾“å‡º",-1)),t(N,{type:"primary",icon:o(Ct),circle:"",size:"small",onClick:j=>U(p),title:"å¤åˆ¶è¾“å‡º"},null,8,["icon","onClick"])]),e("pre",ki,L(p.stdout),1),p.isStdoutTruncated?(f(),_("div",$i,[t(ue,{type:"info",closable:!1,"show-icon":""},{default:a(()=>T[6]||(T[6]=[y(" è¾“å‡ºå†…å®¹è¿‡é•¿å·²è¢«æˆªæ–­ï¼Œè¯·ç›´æ¥æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹å®Œæ•´è¾“å‡º ")])),_:1})])):A("",!0)])):A("",!0),p.stderr?(f(),_("div",{key:1,class:ge(["output-section",B(p.command)?"":"error"])},[e("div",bi,[e("h4",null,L(B(p.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º"),1)]),e("pre",Ci,L(p.stderr),1),p.isStderrTruncated?(f(),_("div",Si,[t(ue,{type:"info",closable:!1,"show-icon":""},{default:a(()=>[y(L(B(p.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º")+"å†…å®¹è¿‡é•¿å·²è¢«æˆªæ–­ï¼Œè¯·ç›´æ¥æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹å®Œæ•´è¾“å‡º ",1)]),_:2},1024)])):A("",!0)],2)):A("",!0),p.error?(f(),_("div",Ti,[T[7]||(T[7]=e("div",{class:"output-header"},[e("h4",null,"é”™è¯¯ä¿¡æ¯")],-1)),e("pre",xi,L(p.error),1)])):A("",!0)])):A("",!0)],2))),128))]))])]),_:1},8,["modelValue"])]))],64)}}}),Li=Lt(Vi,[["__scopeId","data-v-3e9f6472"]]),zi="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20ä¸»åˆ†æ”¯%20--%3e%3cline%20x1='40'%20y1='40'%20x2='40'%20y2='160'%20stroke='%2334495e'%20stroke-width='8'%20stroke-linecap='round'%20/%3e%3c!--%20ç‰¹æ€§åˆ†æ”¯%20--%3e%3cpath%20d='M40,70%20C60,70%2080,90%2080,110%20L80,130'%20stroke='%233498db'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20å¼€å‘åˆ†æ”¯%20--%3e%3cpath%20d='M40,100%20C60,100%20100,110%20100,130%20L100,160'%20stroke='%232ecc71'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20ä¿®å¤åˆ†æ”¯%20--%3e%3cpath%20d='M40,130%20C60,130%20120,140%20120,160'%20stroke='%23e74c3c'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20åˆå¹¶ç‚¹%20--%3e%3cpath%20d='M80,130%20C80,145%2060,145%2040,145'%20stroke='%233498db'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20èŠ‚ç‚¹%20--%3e%3ccircle%20cx='40'%20cy='40'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='70'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='100'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='130'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='145'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='160'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='80'%20cy='130'%20r='10'%20fill='%233498db'%20/%3e%3ccircle%20cx='100'%20cy='160'%20r='10'%20fill='%232ecc71'%20/%3e%3ccircle%20cx='120'%20cy='160'%20r='10'%20fill='%23e74c3c'%20/%3e%3c/svg%3e",Bi={class:"main-header"},Gi={class:"header-left"},Ri=["src"],Di={class:"header-info"},Fi={key:0,id:"user-info"},ji={class:"user-name"},Ui={class:"user-email"},Mi={key:1,id:"user-info"},Oi={class:"directory-selector"},Ai={class:"directory-display"},Ei={class:"directory-icon"},Pi=["title"],Hi={class:"directory-actions"},Ii={key:2,class:"command-history-section"},Ni={class:"main-container"},Ji={key:0,class:"loading-container"},Wi={class:"loading-spinner"},qi={key:1,class:"grid-layout"},Yi={class:"git-status-panel"},Xi={key:0,class:"commit-form-panel"},Ki={key:0,class:"card"},Zi={class:"tips"},Qi={key:1,class:"commit-form-panel"},er={key:2,class:"log-list-panel"},tr={class:"dialog-footer"},sr={class:"main-footer"},ar={key:0,class:"branch-info"},lr={class:"branch-wrapper"},or={key:1,class:"footer-right"},nr={class:"repo-url"},ir={class:"dialog-footer"},rr={class:"directory-input-group"},cr={class:"recent-directories"},ur={class:"dialog-footer"},dr=St({__name:"App",setup(ve){const c=d(""),C=d(null),v=d(null),g=yt(),E=es(),G=d(!1),M=d("");function H(){E.config&&(c.value=`é»˜è®¤æäº¤ä¿¡æ¯: ${E.config.defaultCommitMessage}`)}async function pe(){try{const r=await(await fetch("/api/current_directory")).json();return M.value=r.directory||"æœªçŸ¥ç›®å½•",r}catch(k){return console.error("è·å–å½“å‰ç›®å½•å¤±è´¥:",k),{directory:"æœªçŸ¥ç›®å½•",isGitRepo:!1}}}ht(async()=>{console.log("---------- é¡µé¢åˆå§‹åŒ–å¼€å§‹ ----------");try{const k=await pe();E.isLoaded||await E.loadConfig(),H(),g.isGitRepo=k.isGitRepo===!0,g.lastCheckedTime=Date.now(),g.isGitRepo?await Promise.all([g.getCurrentBranch(!0),g.getAllBranches(),g.getUserInfo(),g.getRemoteUrl(),g.getBranchStatus(!0)]):i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œéƒ¨åˆ†åŠŸèƒ½å°†ä¸å¯ç”¨")}catch(k){console.error("åˆå§‹åŒ–å¤±è´¥:",k)}finally{G.value=!0,console.log("---------- é¡µé¢åˆå§‹åŒ–å®Œæˆ ----------"),setTimeout(()=>{ue()},100)}});const D=d(!1),Q=d(""),ee=d("");async function oe(){await g.createBranch(Q.value,ee.value)&&(D.value=!1,Q.value="",v.value&&v.value.refreshStatus(),C.value&&C.value.refreshLog())}function W(){ee.value=g.currentBranch,D.value=!0}async function me(k){await g.changeBranch(k)&&(v.value&&v.value.refreshStatus(),C.value&&C.value.refreshLog())}const Y=d(!1),S=d(""),x=d("");function F(){S.value=g.userName,x.value=g.userEmail,Y.value=!0}async function X(){if(!S.value||!x.value){i.warning("ç”¨æˆ·åå’Œé‚®ç®±ä¸èƒ½ä¸ºç©º");return}await g.restoreUserConfig(S.value,x.value)&&(Y.value=!1)}async function B(){await g.clearUserConfig()&&(S.value="",x.value="")}let U=!1,te=!1,ce=!1,$=0,T=0,N="",ie="",I=null;function se(){const k=document.querySelector(".grid-layout");if(!k)return;const r=getComputedStyle(k).gridTemplateColumns.split(" "),K=getComputedStyle(k).gridTemplateRows.split(" ");if(r.length>=3&&K.length>=3){const J=parseFloat(r[0]),be=parseFloat(r[2]),Ve=J+be,fe=J/Ve,ye=parseFloat(K[0]),De=parseFloat(K[2]),Ce=ye+De,$e=ye/Ce;localStorage.setItem("zen-gitsync-layout-left-ratio",fe.toString()),localStorage.setItem("zen-gitsync-layout-top-ratio",$e.toString()),console.log(`å¸ƒå±€æ¯”ä¾‹å·²ä¿å­˜ - å·¦ä¾§: ${(fe*100).toFixed(0)}%, ä¸Šæ–¹: ${($e*100).toFixed(0)}%`),localStorage.setItem("zen-gitsync-layout-bottom-left-ratio",fe.toString()),console.log(`åº•éƒ¨å¸ƒå±€æ¯”ä¾‹å·²ä¿å­˜ - å·¦ä¾§: ${(fe*100).toFixed(0)}%`)}}function ue(){const k=document.querySelector(".grid-layout");if(!k)return;const r=localStorage.getItem("zen-gitsync-layout-left-ratio"),K=localStorage.getItem("zen-gitsync-layout-top-ratio");if(r){const J=parseFloat(r),be=1-J;k.style.gridTemplateColumns=`${J}fr 8px ${be}fr`,console.log(`å·²æ¢å¤å·¦ä¾§æ¯”ä¾‹: ${(J*100).toFixed(0)}%`)}else k.style.gridTemplateColumns="1fr 8px 3fr";if(K){const J=parseFloat(K),be=1-J;k.style.gridTemplateRows=`${J}fr 8px ${be}fr`,console.log(`å·²æ¢å¤ä¸Šæ–¹æ¯”ä¾‹: ${(J*100).toFixed(0)}%`)}}function V(k){var J;const r=k.currentTarget;if(!r||!r.id)return;I=r.id,I==="v-resizer"?U=!0:I==="v-resizer-bottom"&&(te=!0),$=k.clientX;const K=document.querySelector(".grid-layout");N=getComputedStyle(K).gridTemplateColumns,(J=document.getElementById(I))==null||J.classList.add("active"),document.addEventListener("mousemove",p),document.addEventListener("mouseup",P),k.preventDefault()}function p(k){if(!U&&!te)return;const r=document.querySelector(".grid-layout"),K=k.clientX-$,J=N.split(" ");if(J.length>=3){const be=parseFloat(J[0]),Ve=parseFloat(J[2]),fe=be+Ve,ye=(be+K/r.clientWidth*fe)/fe,De=1-ye,Ce=.1,$e=.5;ye<Ce?r.style.gridTemplateColumns=`${Ce}fr 8px ${1-Ce}fr`:ye>$e?r.style.gridTemplateColumns=`${$e}fr 8px ${1-$e}fr`:r.style.gridTemplateColumns=`${ye}fr 8px ${De}fr`}}function P(){var k,r;U=!1,te=!1,(k=document.getElementById("v-resizer"))==null||k.classList.remove("active"),(r=document.getElementById("v-resizer-bottom"))==null||r.classList.remove("active"),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",P),se()}function j(k){var K;ce=!0,T=k.clientY;const r=document.querySelector(".grid-layout");ie=getComputedStyle(r).gridTemplateRows,(K=document.getElementById("h-resizer"))==null||K.classList.add("active"),document.addEventListener("mousemove",O),document.addEventListener("mouseup",ae),k.preventDefault()}function O(k){if(!ce)return;const r=document.querySelector(".grid-layout"),K=k.clientY-T,J=ie.split(" ");if(J.length>=3){const be=parseFloat(J[0]),Ve=parseFloat(J[2]),fe=be+Ve,ye=(be+K/r.clientHeight*fe)/fe,De=1-ye,Ce=.2,$e=.8;ye<Ce?r.style.gridTemplateRows=`${Ce}fr 8px ${1-Ce}fr`:ye>$e?r.style.gridTemplateRows=`${$e}fr 8px ${1-$e}fr`:r.style.gridTemplateRows=`${ye}fr 8px ${De}fr`}}function ae(){var k;ce=!1,(k=document.getElementById("h-resizer"))==null||k.classList.remove("active"),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",ae),se()}const ke=d(!1),xe=d(""),Ae=d(!1),Ee=d([]);async function w(){if(!M.value){i.warning("å½“å‰ç›®å½•è·¯å¾„ä¸ºç©º");return}try{await navigator.clipboard.writeText(M.value),i.success("å·²å¤åˆ¶ç›®å½•è·¯å¾„")}catch(k){console.error("å¤åˆ¶ç›®å½•è·¯å¾„å¤±è´¥:",k),i.error(`å¤åˆ¶å¤±è´¥: ${k.message}`)}}function re(){xe.value=M.value,ke.value=!0,Ye()}async function Ye(){try{const r=await(await fetch("/api/recent_directories")).json();r.success&&Array.isArray(r.directories)&&(Ee.value=r.directories)}catch(k){console.error("è·å–æœ€è¿‘ç›®å½•å¤±è´¥:",k)}}async function _e(){if(!xe.value){i.warning("ç›®å½•è·¯å¾„ä¸èƒ½ä¸ºç©º");return}try{Ae.value=!0;const r=await(await fetch("/api/change_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:xe.value})})).json();r.success?(i.success("å·²åˆ‡æ¢å·¥ä½œç›®å½•"),M.value=r.directory,ke.value=!1,await Ue(r.directory),g.isGitRepo=r.isGitRepo,r.isGitRepo?(await Promise.all([g.getCurrentBranch(),g.getAllBranches(),g.getUserInfo(),g.getRemoteUrl()]),v.value&&v.value.refreshStatus(),C.value&&C.value.refreshLog()):(i.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œéƒ¨åˆ†åŠŸèƒ½å°†ä¸å¯ç”¨"),g.$reset())):i.error(r.error||"åˆ‡æ¢ç›®å½•å¤±è´¥")}catch(k){i.error(`åˆ‡æ¢ç›®å½•å¤±è´¥: ${k.message}`)}finally{Ae.value=!1}}async function Ue(k){try{await fetch("/api/save_recent_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:k})})}catch(r){console.error("ä¿å­˜æœ€è¿‘ç›®å½•å¤±è´¥:",r)}}async function Me(){try{if(!M.value){i.warning("å½“å‰ç›®å½•è·¯å¾„ä¸ºç©º");return}const r=await(await fetch("/api/open_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:M.value})})).json();r.success?i.success("å·²åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰“å¼€ç›®å½•"):r.error&&i.error(r.error)}catch(k){console.error("æ‰“å¼€ç›®å½•å¤±è´¥:",k),i.error(`æ‰“å¼€ç›®å½•å¤±è´¥: ${k.message}`)}}async function Re(){try{const r=await(await fetch("/api/browse_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPath:xe.value||M.value})})).json();r.success?de(r):r.error&&i.error(r.error)}catch(k){console.error("æµè§ˆç›®å½•å¤±è´¥:",k),i.error(`æµè§ˆç›®å½•å¤±è´¥: ${k.message}`)}}function de(k){!k||!k.items||Ie.alert(Fe("div",{class:"directory-browser"},[Fe("div",{class:"current-path"},[Fe("span",{class:"path-label"},"å½“å‰è·¯å¾„: "),Fe("span",{class:"path-value"},k.path)]),Fe("div",{class:"directory-list"},[k.parentPath?Fe("div",{class:"directory-item parent-dir",onClick:()=>{Ne(k.parentPath)}},[Fe("span",{class:"dir-icon"},Fe("svg",{class:"folder-icon",viewBox:"0 0 24 24",width:"20",height:"20",style:{fill:"#E6A23C"}},[Fe("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})])),Fe("span",{class:"dir-name"},"è¿”å›ä¸Šçº§ç›®å½•")]):null,...k.items.map(r=>Fe("div",{class:"directory-item",onClick:()=>{Ne(r.path)}},[Fe("span",{class:"dir-icon"},Fe("svg",{class:"folder-icon",viewBox:"0 0 24 24",width:"20",height:"20",style:{fill:"#409EFF"}},[Fe("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})])),Fe("span",{class:"dir-name"},r.name)]))])]),"æµè§ˆå¹¶é€‰æ‹©ç›®å½•",{confirmButtonText:"ä½¿ç”¨å½“å‰ç›®å½•",customClass:"directory-browser-dialog",callback:r=>{r==="confirm"&&(xe.value=k.path)}})}async function Ne(k){try{Ie.close(),setTimeout(async()=>{try{const K=await(await fetch("/api/browse_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPath:k})})).json();K.success?de(K):K.error&&i.error(K.error)}catch(r){console.error("æµè§ˆç›®å½•å¤±è´¥:",r),i.error(`æµè§ˆç›®å½•å¤±è´¥: ${r.message}`)}},100)}catch(r){console.error("å¤„ç†ç›®å½•é€‰æ‹©æ—¶å‡ºé”™:",r),i.error(`å¤„ç†ç›®å½•é€‰æ‹©æ—¶å‡ºé”™: ${r.message}`)}}return(k,r)=>{const K=Tt,J=je,be=ks,Ve=Zt,fe=bs,ye=jt,De=Ut,Ce=$s,$e=Vt,ot=Kt,Qe=xt;return f(),_(we,null,[e("header",Bi,[e("div",Gi,[e("img",{src:o(zi),alt:"Zen GitSync Logo",class:"logo"},null,8,Ri),r[14]||(r[14]=e("h1",null,"Zen GitSync UI",-1))]),e("div",Di,[o(g).userName&&o(g).userEmail?(f(),_("div",Fi,[r[15]||(r[15]=e("span",{class:"user-label"},"ç”¨æˆ·:",-1)),e("span",ji,L(o(g).userName),1),e("span",Ui,"<"+L(o(g).userEmail)+">",1),t(J,{type:"primary",size:"small",onClick:F,class:"user-settings-btn",circle:""},{default:a(()=>[t(K,null,{default:a(()=>[t(o(us))]),_:1})]),_:1})])):(f(),_("div",Mi,[r[16]||(r[16]=e("span",{class:"user-label"},"ç”¨æˆ·: ",-1)),r[17]||(r[17]=e("span",{class:"user-warning"},"æœªé…ç½®",-1)),t(J,{type:"primary",size:"small",onClick:F,class:"user-settings-btn",circle:""},{default:a(()=>[t(K,null,{default:a(()=>[t(o(us))]),_:1})]),_:1})])),e("div",Oi,[e("div",Ai,[e("div",Ei,[t(K,null,{default:a(()=>[t(o(ds))]),_:1})]),e("div",{class:"directory-path",title:M.value},L(M.value),9,Pi)]),e("div",Hi,[t(J,{type:"primary",size:"small",onClick:re,class:"dir-button",circle:"",title:"åˆ‡æ¢ç›®å½•"},{default:a(()=>[t(K,null,{default:a(()=>r[18]||(r[18]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192H128zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32z"})],-1)])),_:1})]),_:1}),t(J,{type:"success",size:"small",onClick:Me,class:"dir-button",circle:"",title:"åœ¨èµ„æºç®¡ç†å™¨ä¸­æ‰“å¼€"},{default:a(()=>[t(K,null,{default:a(()=>r[19]||(r[19]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 0 0-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"})],-1)])),_:1})]),_:1}),t(J,{type:"info",size:"small",onClick:w,class:"dir-button",circle:"",title:"å¤åˆ¶è·¯å¾„"},{default:a(()=>[t(K,null,{default:a(()=>r[20]||(r[20]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64h64z"}),e("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64z"})],-1)])),_:1})]),_:1})])]),o(g).isGitRepo?(f(),_("div",Ii,[t(Li)])):A("",!0)])]),e("main",Ni,[G.value?(f(),_("div",qi,[e("div",Yi,[t(Vl,{ref_key:"gitStatusRef",ref:v,"initial-directory":M.value},null,8,["initial-directory"])]),e("div",{class:"vertical-resizer",id:"v-resizer",onMousedown:V},null,32),o(g).isGitRepo?(f(),_("div",Xi,[!o(g).userName||!o(g).userEmail?(f(),_("div",Ki,[r[26]||(r[26]=e("h2",null,"Gitç”¨æˆ·æœªé…ç½®",-1)),r[27]||(r[27]=e("p",null,"è¯·å…ˆé…ç½®Gitç”¨æˆ·ä¿¡æ¯æ‰èƒ½è¿›è¡Œæäº¤æ“ä½œã€‚",-1)),e("div",Zi,[r[24]||(r[24]=e("h3",null,"æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é…ç½®ï¼š",-1)),r[25]||(r[25]=e("ol",null,[e("li",null,"ç‚¹å‡»å³ä¸Šè§’çš„è®¾ç½®æŒ‰é’®ï¼Œé…ç½®ç”¨æˆ·åå’Œé‚®ç®±"),e("li",null,"æˆ–è€…ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼š"),e("div",{class:"code-block"},[y(' git config --global user.name "æ‚¨çš„ç”¨æˆ·å"'),e("br"),y(' git config --global user.email "æ‚¨çš„é‚®ç®±" ')])],-1)),t(J,{type:"primary",onClick:F},{default:a(()=>r[23]||(r[23]=[y(" ç«‹å³é…ç½® ")])),_:1})])])):(f(),q(mn,{key:1}))])):(f(),_("div",Qi,r[28]||(r[28]=[e("div",{class:"card",style:{padding:"20px"}},[e("h2",null,"Gitä»“åº“åˆå§‹åŒ–"),e("p",null,"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè¯·å…ˆåˆå§‹åŒ–Gitä»“åº“æˆ–åˆ‡æ¢åˆ°Gitä»“åº“ç›®å½•ã€‚"),e("div",{class:"tips"},[e("h3",null,"å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ä»“åº“ï¼š"),e("div",{class:"code-block"},"git init")])],-1)]))),e("div",{class:"horizontal-resizer",id:"h-resizer",onMousedown:j},null,32),o(g).isGitRepo?(f(),_("div",er,[t(oi,{ref_key:"logListRef",ref:C},null,512)])):A("",!0),t($e,{modelValue:D.value,"onUpdate:modelValue":r[3]||(r[3]=Z=>D.value=Z),title:"åˆ›å»ºæ–°åˆ†æ”¯",width:"30%","destroy-on-close":""},{footer:a(()=>[e("span",tr,[t(J,{onClick:r[2]||(r[2]=Z=>D.value=!1)},{default:a(()=>r[29]||(r[29]=[y("å–æ¶ˆ")])),_:1}),t(J,{type:"primary",onClick:oe,loading:o(g).isCreatingBranch},{default:a(()=>r[30]||(r[30]=[y(" åˆ›å»º ")])),_:1},8,["loading"])])]),default:a(()=>[t(Ce,{model:{newBranchName:Q.value,selectedBaseBranch:ee.value}},{default:a(()=>[t(fe,{label:"æ–°åˆ†æ”¯åç§°"},{default:a(()=>[t(Ve,{modelValue:Q.value,"onUpdate:modelValue":r[0]||(r[0]=Z=>Q.value=Z),placeholder:"è¯·è¾“å…¥æ–°åˆ†æ”¯åç§°"},null,8,["modelValue"])]),_:1}),t(fe,{label:"åŸºäºåˆ†æ”¯"},{default:a(()=>[t(De,{modelValue:ee.value,"onUpdate:modelValue":r[1]||(r[1]=Z=>ee.value=Z),placeholder:"é€‰æ‹©åŸºç¡€åˆ†æ”¯",style:{width:"100%"}},{default:a(()=>[(f(!0),_(we,null,Be(o(g).allBranches,Z=>(f(),q(ye,{key:Z,label:Z,value:Z},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])):(f(),_("div",Ji,[t(be,{class:"loading-card"},{default:a(()=>[e("div",Wi,[t(K,{class:"is-loading"},{default:a(()=>r[21]||(r[21]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})],-1)])),_:1})]),r[22]||(r[22]=e("div",{class:"loading-text"},"åŠ è½½ä¸­...",-1))]),_:1})]))]),e("footer",sr,[o(g).currentBranch?(f(),_("div",ar,[e("div",lr,[r[32]||(r[32]=e("span",{class:"branch-label"},"å½“å‰åˆ†æ”¯:",-1)),t(De,{modelValue:o(g).currentBranch,"onUpdate:modelValue":r[4]||(r[4]=Z=>o(g).currentBranch=Z),size:"small",onChange:me,loading:o(g).isChangingBranch,class:"branch-select"},{default:a(()=>[(f(!0),_(we,null,Be(o(g).allBranches,Z=>(f(),q(ye,{key:Z,label:Z,value:Z},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),t(J,{type:"primary",size:"small",onClick:W,class:"create-branch-btn"},{default:a(()=>[t(K,null,{default:a(()=>[t(o(_a))]),_:1}),r[31]||(r[31]=y(" æ–°å»ºåˆ†æ”¯ "))]),_:1})])])):A("",!0),o(g).remoteUrl?(f(),_("div",or,[r[34]||(r[34]=e("span",{class:"repo-url-label"},"è¿œç¨‹ä»“åº“:",-1)),e("span",nr,L(o(g).remoteUrl),1),t(J,{type:"primary",circle:"",size:"small",onClick:r[5]||(r[5]=Z=>o(g).copyRemoteUrl()),class:"copy-url-btn",title:"å¤åˆ¶ä»“åº“åœ°å€"},{default:a(()=>[t(K,null,{default:a(()=>r[33]||(r[33]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64h64z"}),e("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64z"})],-1)])),_:1})]),_:1})])):A("",!0)]),t($e,{modelValue:Y.value,"onUpdate:modelValue":r[9]||(r[9]=Z=>Y.value=Z),title:"Gitç”¨æˆ·è®¾ç½®",width:"30%","destroy-on-close":""},{footer:a(()=>[e("span",ir,[t(J,{type:"danger",onClick:B},{default:a(()=>r[36]||(r[36]=[y(" æ¸…é™¤é…ç½® ")])),_:1}),t(J,{onClick:r[8]||(r[8]=Z=>Y.value=!1)},{default:a(()=>r[37]||(r[37]=[y("å–æ¶ˆ")])),_:1}),t(J,{type:"primary",onClick:X},{default:a(()=>r[38]||(r[38]=[y(" ä¿å­˜ ")])),_:1})])]),default:a(()=>[t(Ce,null,{default:a(()=>[t(fe,{label:"ç”¨æˆ·å"},{default:a(()=>[t(Ve,{modelValue:S.value,"onUpdate:modelValue":r[6]||(r[6]=Z=>S.value=Z),placeholder:"è¯·è¾“å…¥Gitç”¨æˆ·å"},null,8,["modelValue"])]),_:1}),t(fe,{label:"é‚®ç®±"},{default:a(()=>[t(Ve,{modelValue:x.value,"onUpdate:modelValue":r[7]||(r[7]=Z=>x.value=Z),placeholder:"è¯·è¾“å…¥Gité‚®ç®±"},null,8,["modelValue"])]),_:1}),t(fe,null,{default:a(()=>[t(ot,{type:"info",closable:!1,"show-icon":""},{default:a(()=>r[35]||(r[35]=[y(" è¿™äº›è®¾ç½®å°†å½±å“å…¨å±€Gité…ç½®ï¼Œå¯¹æ‰€æœ‰Gitä»“åº“ç”Ÿæ•ˆã€‚ ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($e,{modelValue:ke.value,"onUpdate:modelValue":r[13]||(r[13]=Z=>ke.value=Z),title:"åˆ‡æ¢å·¥ä½œç›®å½•",width:"50%","destroy-on-close":""},{footer:a(()=>[e("span",ur,[t(J,{onClick:r[11]||(r[11]=Z=>ke.value=!1)},{default:a(()=>r[40]||(r[40]=[y("å–æ¶ˆ")])),_:1}),t(J,{type:"primary",onClick:r[12]||(r[12]=Z=>_e()),loading:Ae.value},{default:a(()=>r[41]||(r[41]=[y(" åˆ‡æ¢ ")])),_:1},8,["loading"])])]),default:a(()=>[t(Ce,null,{default:a(()=>[t(fe,{label:"ç›®å½•è·¯å¾„"},{default:a(()=>[e("div",rr,[t(Ve,{modelValue:xe.value,"onUpdate:modelValue":r[10]||(r[10]=Z=>xe.value=Z),placeholder:"è¯·è¾“å…¥ç›®å½•è·¯å¾„"},null,8,["modelValue"]),t(J,{type:"primary",onClick:Re},{default:a(()=>[t(K,null,{default:a(()=>[t(o(ds))]),_:1}),r[39]||(r[39]=y(" æµè§ˆ "))]),_:1})])]),_:1}),Ee.value.length>0?(f(),q(fe,{key:0,label:"å¸¸ç”¨ç›®å½•"},{default:a(()=>[e("div",cr,[(f(!0),_(we,null,Be(Ee.value,(Z,nt)=>(f(),q(Qe,{key:nt,class:"recent-dir-tag",onClick:Xe=>xe.value=Z,effect:"plain"},{default:a(()=>[y(L(Z),1)]),_:2},1032,["onClick"]))),128))])]),_:1})):A("",!0)]),_:1})]),_:1},8,["modelValue"])],64)}}}),fr=Lt(dr,[["__scopeId","data-v-1e84e10d"]]),Ss=wa(fr);Ss.use(ka());Ss.mount("#app");
