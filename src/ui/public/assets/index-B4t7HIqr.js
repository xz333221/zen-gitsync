import{d as $s,r as u,o as yt,a as bs,E as n,l as ca,c as Be,b as zt,w as Ke,e as _,f,F as $e,g as e,h as s,i as Me,j as J,k as O,m as as,u as o,n as a,p as Cs,q as ss,s as Ss,t as je,v as Ts,x as xs,y as ft,z as Bt,A as lt,B as ua,C as ls,D as Dt,G as y,H as Vs,I as L,J as mt,K as he,L as Le,M as Ls,N as Ft,O as da,P as hs,Q as ys,R as fa,S as Ot,T as Oe,U as We,V as gt,W as os,X as St,Y as pa,Z as _s,_ as ns,$ as va,a0 as xt,a1 as Zt,a2 as Qt,a3 as Mt,a4 as Pt,a5 as is,a6 as zs,a7 as ma,a8 as ga,a9 as rs,aa as Bs,ab as ha,ac as Ds,ad as Fs,ae as ya,af as _a,ag as wa,ah as Rs,ai as Vt,aj as ka,ak as dt,al as $a,am as ba,an as Ca,ao as Sa,ap as Ta,aq as xa,ar as Va,as as La,at as za,au as Ba,av as Da,aw as Lt,ax as Fa,ay as Ra,az as Ga,aA as ws,aB as ks,aC as ja,aD as Ge,aE as Aa,aF as Ua}from"./vendor-D7H7DZAk.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))p(g);new MutationObserver(g=>{for(const M of g)if(M.type==="childList")for(const R of M.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&p(R)}).observe(document,{childList:!0,subtree:!0});function k(g){const M={};return g.integrity&&(M.integrity=g.integrity),g.referrerPolicy&&(M.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?M.credentials="include":g.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function p(g){if(g.ep)return;g.ep=!0;const M=k(g);fetch(g.href,M)}})();const es=800;function Oa(){const ye="3000";return console.log(`ä»ç¯å¢ƒå˜é‡è¯»å–åç«¯ç«¯å£: ${ye}`),parseInt(ye,10)}const Ea=Oa(),ht=$s("git",()=>{const ye=u(""),d=u([]),k=u(""),p=u(""),g=u(!1),M=u(!1),R=u(!1),E=u(0),P=u(""),ge=u(!1),U=u(!1),Z=u(!1),Q=u(!1),ie=u(!1),re=u(0),_e=u(0),pe=u(!1),S=u(""),z=u(0),B=u(0),W=u(!0),F=u(null),N=u([]),we=u({staged:[],unstaged:[],untracked:[]}),ce=u([]),V=u(!1),x=u(!1),q=u(!1),se=u(!1),Y=u(!1),ne=u([]),ee=u(!1),Ce=u(!1),G=u(!1),b=u(!1);function v(){ye.value="",d.value=[],k.value="",p.value="",g.value=!1,M.value=!1,R.value=!1,E.value=0,re.value=0,_e.value=0,pe.value=!1,S.value="",z.value=0,B.value=0,U.value=!1,Z.value=!1,Q.value=!1,ie.value=!1,P.value="",ge.value=!1,N.value=[],we.value={staged:[],unstaged:[],untracked:[]},ce.value=[],V.value=!1,x.value=!1,q.value=!1,se.value=!1,Y.value=!1}async function K(i=!1,l=!1){if(!R.value)return;const m=Date.now();if(!i&&!l&&m-z.value<3e4){console.log("ä½¿ç”¨ç¼“å­˜çš„åˆ†æ”¯çŠ¶æ€");return}try{console.log("è·å–åˆ†æ”¯çŠ¶æ€...");let $="/api/branch-status";const le=[];i&&le.push("force=true"),l&&le.push("countOnly=true"),le.length>0&&($+="?"+le.join("&"));const Te=await(await fetch($)).json();Te&&(re.value=Te.ahead||0,_e.value=Te.behind||0,pe.value=Te.hasUpstream||!1,S.value=Te.upstreamBranch||"",z.value=m,console.log(`åˆ†æ”¯çŠ¶æ€æ›´æ–°ï¼šé¢†å…ˆ ${re.value} ä¸ªæäº¤ï¼Œè½å ${_e.value} ä¸ªæäº¤ï¼Œä¸Šæ¸¸åˆ†æ”¯ï¼š${pe.value?S.value:"æ— "}`))}catch($){console.error("è·å–åˆ†æ”¯çŠ¶æ€å¤±è´¥:",$),re.value=0,_e.value=0,pe.value=!1,S.value=""}}async function D(){const i=Date.now();if(i-E.value<1e3)return console.log("ä½¿ç”¨ç¼“å­˜çš„Gitä»“åº“çŠ¶æ€:",R.value?"æ˜¯":"ä¸æ˜¯"),R.value;try{const m=await(await fetch("/api/current_directory")).json();return R.value=m.isGitRepo===!0,E.value=i,console.log(`å½“å‰ç›®å½•${R.value?"æ˜¯":"ä¸æ˜¯"}Gitä»“åº“`),R.value}catch(l){return console.error("æ£€æŸ¥Gitä»“åº“çŠ¶æ€å¤±è´¥:",l),R.value=!1,E.value=i,!1}}async function I(i=!1){try{const $=await(await fetch(i?"/api/branch?force=true":"/api/branch")).json();$.branch&&(ye.value=$.branch,console.log(`å½“å‰åˆ†æ”¯æ›´æ–°ä¸º: ${$.branch}${i?" (å¼ºåˆ¶åˆ·æ–°)":""}`))}catch(l){console.error("è·å–åˆ†æ”¯ä¿¡æ¯å¤±è´¥:",l)}}async function te(){if(R.value)try{console.log("è·å–æ‰€æœ‰åˆ†æ”¯...");const l=await(await fetch("/api/branches")).json();l.branches&&Array.isArray(l.branches)&&(d.value=l.branches,B.value=Date.now(),console.log(`è·å–åˆ°${l.branches.length}ä¸ªåˆ†æ”¯`))}catch(i){console.error("è·å–æ‰€æœ‰åˆ†æ”¯ä¿¡æ¯å¤±è´¥:",i)}}async function ze(i){console.log("åˆ‡æ¢åˆ°åˆ†æ”¯:",i);try{g.value=!0;const m=await(await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:i})})).json();return m.success?(n({message:`å·²åˆ‡æ¢åˆ°åˆ†æ”¯: ${i}`,type:"success"}),await I(!0),await K(!0),!0):(n({message:`åˆ‡æ¢åˆ†æ”¯å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return n({message:`åˆ‡æ¢åˆ†æ”¯å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{g.value=!1}}async function De(){try{const l=await(await fetch("/api/user-info")).json();l.name&&l.email&&(k.value=l.name,p.value=l.email)}catch(i){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",i)}}async function Fe(i,l){if(!i.trim())return n({message:"åˆ†æ”¯åç§°ä¸èƒ½ä¸ºç©º",type:"warning"}),!1;try{M.value=!0;const $=await(await fetch("/api/create-branch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newBranchName:i,baseBranch:l||ye.value})})).json();return $.success?(n({message:`å·²åˆ›å»ºå¹¶åˆ‡æ¢åˆ°åˆ†æ”¯: ${i}`,type:"success"}),await I(!0),await K(!0),await te(),!0):(n({message:`åˆ›å»ºåˆ†æ”¯å¤±è´¥: ${$.error}`,type:"error"}),!1)}catch(m){return n({message:`åˆ›å»ºåˆ†æ”¯å¤±è´¥: ${m.message}`,type:"error"}),!1}finally{M.value=!1}}async function be(){try{const l=await(await fetch("/api/clear-user-config",{method:"POST"})).json();return l.success?(k.value="",p.value="",n({message:"å·²æ¸…é™¤Gitç”¨æˆ·é…ç½®",type:"success"}),!0):(n({message:`æ¸…é™¤é…ç½®å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(i){return n({message:`æ¸…é™¤é…ç½®å¤±è´¥: ${i.message}`,type:"error"}),!1}}async function h(i,l){try{const $=await(await fetch("/api/restore-user-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,email:l})})).json();return $.success?(k.value=i,p.value=l,n({message:"å·²æ¢å¤Gitç”¨æˆ·é…ç½®",type:"success"}),!0):(n({message:`æ¢å¤é…ç½®å¤±è´¥: ${$.error}`,type:"error"}),!1)}catch(m){return n({message:`æ¢å¤é…ç½®å¤±è´¥: ${m.message}`,type:"error"}),!1}}async function oe(){if(!R.value)return n({message:"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",type:"warning"}),!1;try{Z.value=!0;const l=await(await fetch("/api/pull",{method:"POST"})).json();return l.success?(n({message:"æ‹‰å–æˆåŠŸ",type:"success"}),await K(),!0):(l.needsMerge?n({message:`éœ€è¦åˆå¹¶æ›´æ”¹: ${l.pullOutput||"å­˜åœ¨å†²çªéœ€è¦æ‰‹åŠ¨è§£å†³"}`,type:"warning",duration:5e3}):n({message:`æ‹‰å–å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(i){return n({message:`æ‹‰å–å¤±è´¥: ${i.message}`,type:"error"}),!1}finally{Z.value=!1}}async function Ae(){if(!R.value)return n({message:"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",type:"warning"}),!1;try{Q.value=!0;const l=await(await fetch("/api/fetch-all",{method:"POST"})).json();return l.success?(n({message:"è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯ä¿¡æ¯æˆåŠŸ",type:"success"}),await K(),!0):(n({message:`è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(i){return n({message:`è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯å¤±è´¥: ${i.message}`,type:"error"}),!1}finally{Q.value=!1}}function Ue(){F.value&&F.value.disconnect();try{const i=`http://localhost:${Ea}`;if(console.log("å°è¯•è¿æ¥Socket.IOæœåŠ¡å™¨:",i),F.value=ca(i,{reconnectionDelayMax:1e4,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,timeout:2e4,autoConnect:!0,forceNew:!0,transports:["websocket","polling"]}),!F.value){console.error("Socket.IOåˆå§‹åŒ–å¤±è´¥: socketä¸ºnull");return}console.log("Socket.IOåˆå§‹åŒ–æˆåŠŸï¼Œsocket ID:",F.value.id||"æœªè¿æ¥"),F.value.on("connect",()=>{console.log("æˆåŠŸè¿æ¥åˆ°Socket.IOæœåŠ¡å™¨"),W.value&&F.value&&F.value.emit("start_monitoring")}),F.value.on("disconnect",l=>{console.log("ä¸Socket.IOæœåŠ¡å™¨æ–­å¼€è¿æ¥:",l)}),F.value.on("git_status_update",l=>{W.value&&(console.log("æ”¶åˆ°GitçŠ¶æ€æ›´æ–°é€šçŸ¥:",new Date().toLocaleTimeString()),l.porcelain!==void 0&&qe(l.porcelain))}),F.value.on("monitoring_status",l=>{console.log("æ–‡ä»¶ç›‘æ§çŠ¶æ€:",l.active?"å·²å¯åŠ¨":"å·²åœæ­¢")}),F.value.on("connect_error",l=>{console.error("Socketè¿æ¥é”™è¯¯:",l.message)}),F.value.on("connect_timeout",()=>{console.error("Socketè¿æ¥è¶…æ—¶")}),F.value.on("reconnect",l=>{var m;console.log(`Socketé‡è¿æˆåŠŸï¼Œå°è¯•æ¬¡æ•°: ${l}`),W.value&&(console.log("é‡è¿åé‡æ–°å‘é€start_monitoringè¯·æ±‚"),(m=F.value)==null||m.emit("start_monitoring"))}),F.value.on("reconnect_attempt",l=>{console.log(`Socketå°è¯•é‡è¿ï¼Œç¬¬ ${l} æ¬¡å°è¯•`)}),F.value.on("reconnect_error",l=>{console.error("Socketé‡è¿é”™è¯¯:",l.message)}),F.value.on("reconnect_failed",()=>{console.error("Socketé‡è¿å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°")}),F.value&&!F.value.connected&&(console.log("Socketæœªè¿æ¥ï¼Œå°è¯•æ‰‹åŠ¨è¿æ¥..."),F.value.connect())}catch(i){console.error("Socket.IOè¿æ¥åˆå§‹åŒ–å¤±è´¥:",i)}}function Ie(){if(console.log("toggleAutoUpdateè°ƒç”¨ï¼Œå½“å‰å€¼:",W.value),!F.value){console.error("æ— æ³•åˆ‡æ¢è‡ªåŠ¨æ›´æ–°çŠ¶æ€: socketè¿æ¥ä¸å­˜åœ¨"),n.error("æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè‡ªåŠ¨æ›´æ–°å¯èƒ½ä¸ä¼šç”Ÿæ•ˆ"),console.log("å°è¯•é‡æ–°å»ºç«‹socketè¿æ¥..."),Ue(),localStorage.setItem("zen-gitsync-auto-update",W.value.toString());return}try{W.value?(console.log("å‘é€start_monitoringå‘½ä»¤..."),F.value.emit("start_monitoring"),n.success("è‡ªåŠ¨æ›´æ–°å·²å¯ç”¨")):(console.log("å‘é€stop_monitoringå‘½ä»¤..."),F.value.emit("stop_monitoring"),n.info("è‡ªåŠ¨æ›´æ–°å·²ç¦ç”¨")),localStorage.setItem("zen-gitsync-auto-update",W.value.toString()),console.log("å·²ä¿å­˜è‡ªåŠ¨æ›´æ–°è®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨:",W.value)}catch(i){console.error("åˆ‡æ¢è‡ªåŠ¨æ›´æ–°çŠ¶æ€æ—¶å‡ºé”™:",i),n.error(`åˆ‡æ¢è‡ªåŠ¨æ›´æ–°å¤±è´¥: ${i.message}`)}}function qe(i){if(i===void 0||i===""){ce.value=[];return}const l=i.split(`
`),m=[];for(const $ of l){const le=$.match(/^([ MADRCU\?]{2})\s+(.+)$/);if(le){let de="";const Te=le[1],j=Te.charAt(0),Xe=Te.charAt(1);j==="A"||j==="M"||j==="D"||j==="R"?de="added":j===" "&&Xe==="M"?de="modified":j===" "&&Xe==="D"?de="deleted":Te==="??"?de="untracked":de="other",m.push({path:le[2],type:de})}}ce.value=m}async function Ne(i=!0){if(!R.value){console.log("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè·³è¿‡åŠ è½½æäº¤å†å²");return}try{V.value=!0,console.log("å¼€å§‹åŠ è½½æäº¤å†å²...");const l=new Date().getTime(),$=await(await fetch(`/api/log?page=1&_t=${l}`)).json();$&&$.data&&Array.isArray($.data)?(N.value=[...$.data],console.log(`æäº¤å†å²åŠ è½½å®Œæˆï¼Œå…± ${N.value.length} æ¡è®°å½•`)):(console.warn("APIè¿”å›çš„æäº¤å†å²æ ¼å¼ä¸æ­£ç¡®:",$),N.value=[])}catch(l){console.error("è·å–æäº¤å†å²å¤±è´¥:",l),i&&n({message:`è·å–æäº¤å†å²å¤±è´¥: ${l.message}`,type:"error"})}finally{V.value=!1}}async function C(){if(!R.value){console.log("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè·³è¿‡åŠ è½½GitçŠ¶æ€");return}try{x.value=!0,await c()}catch(i){console.error("è·å–GitçŠ¶æ€å¤±è´¥:",i),n({message:`è·å–GitçŠ¶æ€å¤±è´¥: ${i.message}`,type:"error"})}finally{x.value=!1}}async function c(){if(console.log("å¼€å§‹è·å–GitçŠ¶æ€(porcelainæ ¼å¼)..."),!R.value){console.log("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè·³è¿‡åŠ è½½GitçŠ¶æ€");return}try{const l=await(await fetch("/api/status_porcelain")).json();l.status!==void 0?qe(l.status):ce.value=[]}catch(i){console.error("è·å–GitçŠ¶æ€(porcelain)å¤±è´¥:",i),n({message:`è·å–GitçŠ¶æ€(porcelain)å¤±è´¥: ${i.message}`,type:"error"}),ce.value=[]}}async function X(){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{q.value=!0;const l=await(await fetch("/api/add",{method:"POST"})).json();return l.success?(n({message:"æ–‡ä»¶å·²æ·»åŠ åˆ°æš‚å­˜åŒº",type:"success"}),!0):(n({message:`æ·»åŠ æ–‡ä»¶å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(i){return n({message:`æ·»åŠ æ–‡ä»¶å¤±è´¥: ${i.message}`,type:"error"}),!1}finally{q.value=!1}}async function H(i){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{q.value=!0;const m=await(await fetch("/api/add-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:i})})).json();return m.success?(n({message:"æ–‡ä»¶å·²æš‚å­˜",type:"success"}),C(),!0):(n({message:`æš‚å­˜æ–‡ä»¶å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return n({message:`æš‚å­˜æ–‡ä»¶å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{q.value=!1}}async function Se(i){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{Y.value=!0;const m=await(await fetch("/api/unstage-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:i})})).json();return m.success?(n({message:"å·²å–æ¶ˆæš‚å­˜æ–‡ä»¶",type:"success"}),C(),!0):(n({message:`å–æ¶ˆæš‚å­˜å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return n({message:`å–æ¶ˆæš‚å­˜å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{Y.value=!1}}function Ve(i){return new Promise(l=>setTimeout(l,i))}async function ve(i,l=!1){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{se.value=!0;const $=await(await fetch("/api/commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:i,hasNewlines:i.includes(`
`),noVerify:l})})).json();return $.success?(n({message:"æäº¤æˆåŠŸ",type:"success"}),!0):(n({message:`commitChanges æäº¤å¤±è´¥: ${$.error}`,type:"error"}),!1)}catch(m){return n({message:`æäº¤å¤±è´¥: ${m.message}`,type:"error"}),!1}finally{se.value=!1}}async function ke(){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{U.value=!0;const l=await(await fetch("/api/push",{method:"POST"})).json();return l.success?(n({message:"æ¨é€æˆåŠŸ",type:"success"}),re.value=0,_e.value=0,await Promise.all([C(),Ne()]),console.log("æ¨é€æˆåŠŸï¼Œåˆ†æ”¯çŠ¶æ€å·²è®¾ç½®ä¸ºåŒæ­¥ (ahead=0, behind=0)"),!0):(n({message:`æ¨é€å¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(i){return n({message:`æ¨é€å¤±è´¥: ${i.message}`,type:"error"}),!1}finally{U.value=!1}}async function Re(i,l={}){if(!R.value)return n({message:"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",type:"warning"}),!1;if(!i)return n({message:"è¯·é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯",type:"warning"}),!1;if(i===ye.value)return n({message:"ä¸èƒ½åˆå¹¶å½“å‰åˆ†æ”¯åˆ°è‡ªèº«",type:"warning"}),!1;try{ie.value=!0;const m=await fetch("/api/merge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:i,...l})}),$=await m.json();return m.status===409?(n({message:"åˆå¹¶åˆ†æ”¯æ—¶å‘ç”Ÿå†²çªï¼Œè¯·æ‰‹åŠ¨è§£å†³",type:"warning",duration:5e3}),!1):$.success?(n({message:`æˆåŠŸåˆå¹¶åˆ†æ”¯ ${i} åˆ° ${ye.value}`,type:"success"}),await C(),await K(),!0):(n({message:`åˆå¹¶åˆ†æ”¯å¤±è´¥: ${$.error}`,type:"error"}),!1)}catch(m){return n({message:`åˆå¹¶åˆ†æ”¯å¤±è´¥: ${m.message}`,type:"error"}),!1}finally{ie.value=!1}}async function ue(i,l=!1){if(console.log("å¼€å§‹æš‚å­˜å¹¶æäº¤æ“ä½œ..."),!await X())return!1;console.log("æš‚å­˜å®Œæˆï¼Œç­‰å¾…Gitæ“ä½œå®Œæˆ..."),await Ve(es),console.log("å¼€å§‹æäº¤æ›´æ”¹...");const $=await ve(i,l);return console.log("æš‚å­˜å¹¶æäº¤æ“ä½œå®Œæˆ"),$}async function me(i,l=!1){try{if(console.log("å¼€å§‹æš‚å­˜æ–‡ä»¶..."),!await X()||(console.log("æš‚å­˜å®Œæˆï¼Œç­‰å¾…Gitæ“ä½œå®Œæˆ..."),await Ve(es),console.log("å¼€å§‹æäº¤æ›´æ”¹..."),!await ve(i,l)))return!1;console.log("æäº¤å®Œæˆï¼Œç­‰å¾…Gitæ“ä½œå®Œæˆ..."),await Ve(es),console.log("å¼€å§‹æ¨é€åˆ°è¿œç¨‹...");const le=await ke();return console.log("ä¸€é”®æ¨é€æ“ä½œå®Œæˆï¼ŒçŠ¶æ€å·²ç»Ÿä¸€åˆ·æ–°"),le}catch(m){console.error("ä¸€é”®æ¨é€æ“ä½œå¤±è´¥:",m);try{(await(await fetch("/api/remove-lock",{method:"POST"})).json()).success&&n({message:"æ£€æµ‹åˆ°Gité”å®šæ–‡ä»¶å†²çªï¼Œå·²è‡ªåŠ¨æ¸…ç†ï¼Œè¯·é‡è¯•æ“ä½œ",type:"warning"})}catch($){console.error("æ¸…ç†é”å®šæ–‡ä»¶å¤±è´¥:",$)}n({message:`æ“ä½œå¤±è´¥: ${m.message}`,type:"error"});try{await Promise.all([C(),Ne(),K()])}catch($){console.error("åˆ·æ–°çŠ¶æ€å¤±è´¥:",$)}return!1}}async function Ye(){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{Y.value=!0;const l=await(await fetch("/api/reset-head",{method:"POST"})).json();return l.success?(n({message:"å·²é‡ç½®æš‚å­˜åŒº",type:"success"}),C(),!0):(n({message:`é‡ç½®æš‚å­˜åŒºå¤±è´¥: ${l.error}`,type:"error"}),!1)}catch(i){return n({message:`é‡ç½®æš‚å­˜åŒºå¤±è´¥: ${i.message}`,type:"error"}),!1}finally{Y.value=!1}}async function Pe(i){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{Y.value=!0;const m=await(await fetch("/api/reset-to-remote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:i})})).json();return m.success?(n({message:`å·²é‡ç½®åˆ†æ”¯ ${i} åˆ°è¿œç¨‹çŠ¶æ€`,type:"success"}),C(),Ne(),!0):(n({message:`é‡ç½®åˆ†æ”¯å¤±è´¥: ${m.error}`,type:"error"}),!1)}catch(l){return n({message:`é‡ç½®åˆ†æ”¯å¤±è´¥: ${l.message}`,type:"error"}),!1}finally{Y.value=!1}}async function A(){if(R.value)try{ge.value=!0,console.log("è·å–è¿œç¨‹ä»“åº“åœ°å€...");const l=await(await fetch("/api/remote-url")).json();l.success?(P.value=l.url||"",console.log(`è·å–åˆ°è¿œç¨‹ä»“åº“åœ°å€: ${P.value}`)):(console.warn("è·å–è¿œç¨‹ä»“åº“åœ°å€å¤±è´¥:",l.error),P.value="")}catch(i){console.error("è·å–è¿œç¨‹ä»“åº“åœ°å€å¤±è´¥:",i),P.value=""}finally{ge.value=!1}}async function ot(){if(!P.value)return n({message:"æ²¡æœ‰å¯å¤åˆ¶çš„è¿œç¨‹ä»“åº“åœ°å€",type:"warning"}),!1;try{return await navigator.clipboard.writeText(P.value),n({message:"å·²å¤åˆ¶è¿œç¨‹ä»“åº“åœ°å€",type:"success"}),!0}catch(i){return console.error("å¤åˆ¶è¿œç¨‹ä»“åº“åœ°å€å¤±è´¥:",i),n({message:`å¤åˆ¶å¤±è´¥: ${i.message}`,type:"error"}),!1}}yt(()=>{const i=localStorage.getItem("zen-gitsync-auto-update");i!==null&&(W.value=i==="true"),Ue()});function nt(){F.value&&(F.value.disconnect(),F.value=null)}bs(()=>{nt()});async function Ze(){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),[];try{ee.value=!0;const l=await(await fetch("/api/stash-list")).json();return l.success?(ne.value=l.stashes,l.stashes):(n.error(`è·å–stashåˆ—è¡¨å¤±è´¥: ${l.error}`),[])}catch(i){return console.error("è·å–stashåˆ—è¡¨å¤±è´¥:",i),n.error(`è·å–stashåˆ—è¡¨å¤±è´¥: ${i.message}`),[]}finally{ee.value=!1}}async function _t(i,l=!1,m=!0){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{b.value=!0;const le=await(await fetch("/api/stash-save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:i,includeUntracked:l,excludeLocked:m})})).json();return le.success?(n.success(le.message),await Ze(),await C(),!0):(n.warning(le.message),!1)}catch($){return console.error("ä¿å­˜stashå¤±è´¥:",$),n.error(`ä¿å­˜stashå¤±è´¥: ${$.message}`),!1}finally{b.value=!1}}async function it(i,l=!1){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{Ce.value=!0;const m=await fetch("/api/stash-apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stashId:i,pop:l})}),$=await m.json();return m.status===409?(n.warning("åº”ç”¨stashæ—¶å‘ç”Ÿå†²çªï¼Œè¯·æ‰‹åŠ¨è§£å†³"),!1):$.success?(n.success($.message),await Ze(),await C(),!0):(n.error(`åº”ç”¨stashå¤±è´¥: ${$.error}`),!1)}catch(m){return console.error("åº”ç”¨stashå¤±è´¥:",m),n.error(`åº”ç”¨stashå¤±è´¥: ${m.message}`),!1}finally{Ce.value=!1}}async function He(i){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{G.value=!0;const m=await(await fetch("/api/stash-drop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stashId:i})})).json();return m.success?(n.success(m.message),await Ze(),!0):(n.error(`åˆ é™¤stashå¤±è´¥: ${m.error}`),!1)}catch(l){return console.error("åˆ é™¤stashå¤±è´¥:",l),n.error(`åˆ é™¤stashå¤±è´¥: ${l.message}`),!1}finally{G.value=!1}}async function wt(){if(!R.value)return n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“"),!1;try{G.value=!0;const l=await(await fetch("/api/stash-clear",{method:"POST"})).json();return l.success?(n.success(l.message),ne.value=[],!0):(n.error(`æ¸…ç©ºstashå¤±è´¥: ${l.error}`),!1)}catch(i){return console.error("æ¸…ç©ºstashå¤±è´¥:",i),n.error(`æ¸…ç©ºstashå¤±è´¥: ${i.message}`),!1}finally{G.value=!1}}return{currentBranch:ye,allBranches:d,userName:k,userEmail:p,isChangingBranch:g,isCreatingBranch:M,isGitRepo:R,lastCheckedTime:E,branchAhead:re,branchBehind:_e,hasUpstream:pe,upstreamBranch:S,lastBranchStatusTime:z,lastBranchesTime:B,remoteUrl:P,isLoadingRemoteUrl:ge,stashes:ne,isLoadingStashes:ee,isApplyingStash:Ce,isDroppingStash:G,isSavingStash:b,log:N,status:we,fileList:ce,isLoadingLog:V,isLoadingStatus:x,isAddingFiles:q,isCommiting:se,isResetting:Y,autoUpdateEnabled:W,isPushing:U,isGitPulling:Z,isGitFetching:Q,isGitMerging:ie,$reset:v,checkGitRepo:D,getCurrentBranch:I,getAllBranches:te,changeBranch:ze,getUserInfo:De,createBranch:Fe,clearUserConfig:be,restoreUserConfig:h,getBranchStatus:K,gitPull:oe,gitFetchAll:Ae,initSocketConnection:Ue,toggleAutoUpdate:Ie,parseStatusPorcelain:qe,fetchLog:Ne,fetchStatus:C,fetchStatusPorcelain:c,addToStage:X,addFileToStage:H,unstageFile:Se,commitChanges:ve,pushToRemote:ke,addAndCommit:ue,addCommitAndPush:me,resetHead:Ye,resetToRemote:Pe,getRemoteUrl:A,copyRemoteUrl:ot,mergeBranch:Re,getStashList:Ze,saveStash:_t,applyStash:it,dropStash:He,clearAllStashes:wt,socket:F,disconnectSocket:nt}}),cs=$s("config",()=>{const ye=u(""),d=u([]),k=u([]),p=u([]),g=u([]),M=u(!1),R=u(!1),E=Be(()=>({defaultCommitMessage:ye.value,descriptionTemplates:d.value,scopeTemplates:k.value,messageTemplates:p.value,lockedFiles:g.value}));async function P(S=!1){if(!S&&R.value&&!M.value)return console.log("ä½¿ç”¨ç¼“å­˜çš„é…ç½®ä¿¡æ¯"),E.value;try{M.value=!0,console.log("åŠ è½½é…ç½®ä¿¡æ¯...");const B=await(await fetch("/api/config/getConfig")).json();return ye.value=B.defaultCommitMessage||"",d.value=B.descriptionTemplates||[],k.value=B.scopeTemplates||[],p.value=B.messageTemplates||[],g.value=B.lockedFiles||[],R.value=!0,console.log("é…ç½®ä¿¡æ¯åŠ è½½å®Œæˆ"),E.value}catch(z){return console.error("åŠ è½½é…ç½®å¤±è´¥:",z),n.error(`åŠ è½½é…ç½®å¤±è´¥: ${z.message}`),null}finally{M.value=!1}}async function ge(S){try{const B=await(await fetch("/api/config/saveDefaultMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({defaultCommitMessage:S})})).json();return B.success?(ye.value=S,n.success("é»˜è®¤æäº¤ä¿¡æ¯å·²ä¿å­˜"),!0):(n.error(`ä¿å­˜å¤±è´¥: ${B.error}`),!1)}catch(z){return n.error(`ä¿å­˜å¤±è´¥: ${z.message}`),!1}}async function U(S,z){try{const W=await(await fetch("/api/config/save-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:S,type:z})})).json();return W.success?(z==="description"?d.value.includes(S)||d.value.push(S):z==="scope"?k.value.includes(S)||k.value.push(S):z==="message"&&(p.value.includes(S)||p.value.push(S)),n.success("æ¨¡æ¿å·²ä¿å­˜"),!0):(n.error(`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${W.error}`),!1)}catch(B){return n.error(`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${B.message}`),!1}}async function Z(S,z){try{const W=await(await fetch("/api/config/delete-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:S,type:z})})).json();return W.success?(z==="description"?d.value=d.value.filter(F=>F!==S):z==="scope"?k.value=k.value.filter(F=>F!==S):z==="message"&&(p.value=p.value.filter(F=>F!==S)),n.success("æ¨¡æ¿å·²åˆ é™¤"),!0):(n.error(`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${W.error}`),!1)}catch(B){return n.error(`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${B.message}`),!1}}async function Q(S,z,B){try{const F=await(await fetch("/api/config/update-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldTemplate:S,newTemplate:z,type:B})})).json();if(F.success){if(B==="description"){const N=d.value.indexOf(S);N!==-1&&(d.value[N]=z)}else if(B==="scope"){const N=k.value.indexOf(S);N!==-1&&(k.value[N]=z)}else if(B==="message"){const N=p.value.indexOf(S);N!==-1&&(p.value[N]=z)}return n.success("æ¨¡æ¿å·²æ›´æ–°"),!0}else return n.error(`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${F.error}`),!1}catch(W){return n.error(`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${W.message}`),!1}}async function ie(){try{const z=await(await fetch("/api/locked-files")).json();return z.success?(g.value=z.lockedFiles||[],z.lockedFiles):(n.error(`åŠ è½½é”å®šæ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${z.error}`),[])}catch(S){return console.error("åŠ è½½é”å®šæ–‡ä»¶åˆ—è¡¨å¤±è´¥:",S),n.error(`åŠ è½½é”å®šæ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${S.message}`),[]}}async function re(S){try{const B=await(await fetch("/api/lock-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S})})).json();return B.success?(await ie(),n.success(`æ–‡ä»¶å·²é”å®š: ${S}`),!0):(n.error(`é”å®šæ–‡ä»¶å¤±è´¥: ${B.error}`),!1)}catch(z){return console.error("é”å®šæ–‡ä»¶å¤±è´¥:",z),n.error(`é”å®šæ–‡ä»¶å¤±è´¥: ${z.message}`),!1}}async function _e(S){try{const B=await(await fetch("/api/unlock-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S})})).json();return B.success?(await ie(),n.success(`æ–‡ä»¶å·²è§£é”: ${S}`),!0):(n.error(`è§£é”æ–‡ä»¶å¤±è´¥: ${B.error}`),!1)}catch(z){return console.error("è§£é”æ–‡ä»¶å¤±è´¥:",z),n.error(`è§£é”æ–‡ä»¶å¤±è´¥: ${z.message}`),!1}}async function pe(S){try{const B=await(await fetch("/api/check-file-lock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S})})).json();return B.success?B.isLocked:(console.error("æ£€æŸ¥æ–‡ä»¶é”å®šçŠ¶æ€å¤±è´¥:",B.error),!1)}catch(z){return console.error("æ£€æŸ¥æ–‡ä»¶é”å®šçŠ¶æ€å¤±è´¥:",z),!1}}return{defaultCommitMessage:ye,descriptionTemplates:d,scopeTemplates:k,messageTemplates:p,lockedFiles:g,isLoading:M,isLoaded:R,config:E,loadConfig:P,saveDefaultMessage:ge,saveTemplate:U,deleteTemplate:Z,updateTemplate:Q,loadLockedFiles:ie,lockFile:re,unlockFile:_e,isFileLocked:pe}}),Ma={class:"card"},Pa={class:"status-header"},Ha={class:"header-actions"},Ia=["element-loading-text"],Na={key:0,class:"status-box"},Ja={key:1,class:"status-box-wrap"},Wa={key:0,class:"branch-status-info"},qa={class:"branch-sync-status"},Ya={class:"sync-status-content"},Xa={class:"status-badges"},Ka={class:"badge-content"},Za={class:"badge-content"},Qa={key:1,class:"file-list-container"},el={key:0,class:"file-group"},tl={class:"file-list"},sl=["onClick"],al={class:"file-info"},ll={class:"file-name-section"},ol=["title"],nl={class:"file-directory"},il={class:"file-actions"},rl={key:1,class:"file-group"},cl={class:"file-list"},ul=["onClick"],dl={class:"file-info"},fl={class:"file-name-section"},pl=["title"],vl={class:"file-directory"},ml={class:"file-actions"},gl={key:2,class:"file-group"},hl={class:"file-list"},yl=["onClick"],_l={class:"file-info"},wl={class:"file-name-section"},kl=["title"],$l={class:"file-directory"},bl={class:"file-actions"},Cl={key:2,class:"empty-status"},Sl={class:"empty-icon"},Tl={class:"diff-content dialog-content-scroll"},xl=["innerHTML"],Vl={key:1,class:"no-diff"},Ll={class:"file-navigation"},zl={class:"file-counter"},Bl={class:"lock-feature-description"},Dl={class:"description-header"},Fl={key:0,class:"empty-locked-files"},Rl={class:"empty-icon"},Gl={key:1,class:"locked-files-list"},jl={class:"locked-files-header"},Al={class:"locked-file-items"},Ul={class:"file-info"},Ol={class:"file-path-container"},El={class:"file-name"},Ml={class:"file-directory"},Pl={class:"file-actions"},Hl={class:"dialog-footer"},Il=zt({__name:"GitStatus",props:{initialDirectory:{type:String,default:""}},setup(ye,{expose:d}){const k=ye,p=ht(),g=cs(),M=Be(()=>p.isLoadingStatus),R=u(""),E=u(""),P=u(!1),ge=u(!1),U=u(-1),Z=u(!1),Q=u({staged:!1,unstaged:!1,untracked:!1}),ie=u(k.initialDirectory||"");async function re(){try{if(!ie.value){const v=await(await fetch("/api/current_directory")).json();ie.value=v.directory||"æœªçŸ¥ç›®å½•"}if(!p.isGitRepo)return;await p.fetchStatus(),await p.getBranchStatus(),n({message:"Git çŠ¶æ€å·²åˆ·æ–°",type:"success"})}catch(b){n({message:"åˆ·æ–°å¤±è´¥: "+b.message,type:"error"})}}async function _e(b){try{await Oe.confirm(`ç¡®è®¤è§£é”è¯¥æ–‡ä»¶ï¼Ÿ
${b}`,"ç¡®è®¤è§£é”",{type:"warning",confirmButtonText:"è§£é”",cancelButtonText:"å–æ¶ˆ"}),await g.unlockFile(b)}catch{}}async function pe(){if(g.lockedFiles.length)try{await Oe.confirm(`ç¡®è®¤è§£é”æ‰€æœ‰å·²é”å®šæ–‡ä»¶ï¼Ÿå…± ${g.lockedFiles.length} ä¸ªã€‚`,"æ¸…ç©ºå…¨éƒ¨é”å®š",{type:"warning",confirmButtonText:"å…¨éƒ¨è§£é”",cancelButtonText:"å–æ¶ˆ"});const b=[...g.lockedFiles];await Promise.all(b.map(v=>g.unlockFile(v))),await g.loadLockedFiles(),n.success("å·²æ¸…ç©ºæ‰€æœ‰æ–‡ä»¶é”å®š")}catch{}}function S(b){if(!b)return"";const v=b.split(`
`);function K(D){return D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}return v.map(D=>{const I=K(D);return D.startsWith("diff --git")?`<div class="diff-header">${I}</div>`:D.startsWith("---")?`<div class="diff-old-file">${I}</div>`:D.startsWith("+++")?`<div class="diff-new-file">${I}</div>`:D.startsWith("@@")?`<div class="diff-hunk-header">${I}</div>`:D.startsWith("+")?`<div class="diff-added">${I}</div>`:D.startsWith("-")?`<div class="diff-removed">${I}</div>`:`<div class="diff-context">${I}</div>`}).join("")}async function z(b){try{ge.value=!0,R.value=b,U.value=p.fileList.findIndex(K=>K.path===b);const v=p.fileList[U.value];if(v&&v.type==="untracked"){try{const D=await(await fetch(`/api/file-content?file=${encodeURIComponent(b)}`)).json();D.success&&D.content?E.value=`diff --git a/${b} b/${b}
æ–°æ–‡ä»¶: ${b}
--- /dev/null
+++ b/${b}
@@ -0,0 +1,${D.content.split(`
`).length} @@
`+D.content.split(`
`).map(I=>`+${I}`).join(`
`):E.value=`è¿™æ˜¯ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå°šæœªè¢«Gitè·Ÿè¸ªã€‚
æ·»åŠ åˆ°æš‚å­˜åŒºåå¯ä»¥æäº¤è¯¥æ–‡ä»¶ã€‚`}catch(K){console.error("è·å–æœªè·Ÿè¸ªæ–‡ä»¶å†…å®¹å¤±è´¥:",K),E.value=`è¿™æ˜¯ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå°šæœªè¢«Gitè·Ÿè¸ªã€‚
æ·»åŠ åˆ°æš‚å­˜åŒºåå¯ä»¥æäº¤è¯¥æ–‡ä»¶ã€‚`}P.value=!0}else if(v&&v.type==="added"){const D=await(await fetch(`/api/diff-cached?file=${encodeURIComponent(b)}`)).json();E.value=D.diff||"æ²¡æœ‰å˜æ›´",P.value=!0}else{const D=await(await fetch(`/api/diff?file=${encodeURIComponent(b)}`)).json();E.value=D.diff||"æ²¡æœ‰å˜æ›´",P.value=!0}}catch(v){n({message:"è·å–æ–‡ä»¶å·®å¼‚å¤±è´¥: "+v.message,type:"error"}),E.value="è·å–å·®å¼‚å¤±è´¥: "+v.message}finally{ge.value=!1}}async function B(){if(p.fileList.length===0||U.value<=0)return;const b=U.value-1,v=p.fileList[b];await z(v.path)}async function W(){if(p.fileList.length===0||U.value>=p.fileList.length-1)return;const b=U.value+1,v=p.fileList[b];await z(v.path)}function F(b){z(b.path)}async function N(b){await p.addFileToStage(b)}async function we(b){await p.unstageFile(b)}async function ce(){await V()}async function V(){try{if(!p.isGitRepo)return;await p.fetchStatus(),n({message:"Git æ–‡ä»¶çŠ¶æ€å·²åˆ·æ–°",type:"success"})}catch(b){n({message:"åˆ·æ–°å¤±è´¥: "+b.message,type:"error"})}}async function x(){try{await p.gitPull(),await re()}catch(b){console.error("æ‹‰å–æ“ä½œå‘ç”Ÿé”™è¯¯:",b)}}async function q(){try{await p.gitFetchAll(),await re()}catch(b){console.error("è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯æ“ä½œå‘ç”Ÿé”™è¯¯:",b)}}async function se(b){try{await Oe.confirm(`ç¡®å®šè¦æ’¤å›æ–‡ä»¶ "${b}" çš„æ‰€æœ‰ä¿®æ”¹å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚`,"æ’¤å›ä¿®æ”¹",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});const K=await(await fetch("/api/revert_file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:b})})).json();K.success?(n.success("å·²æ’¤å›æ–‡ä»¶ä¿®æ”¹"),await re()):n.error(K.error?`æ’¤å›å¤±è´¥: ${K.error}`:"æ’¤å›æ–‡ä»¶ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•")}catch(v){if(v==="cancel"||v.message==="cancel")return;const K=v.message||"æœªçŸ¥é”™è¯¯";K!=="undefined"?n.error(`æ’¤å›æ–‡ä»¶ä¿®æ”¹å¤±è´¥: ${K}`):n.error("æ’¤å›æ–‡ä»¶ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•")}}function Y(b){const v=b.split("/");return v[v.length-1]}function ne(b){const v=b.split("/");return v.length<=1?"":v.slice(0,-1).join("/")}function ee(b){const v=b.replace(/\\/g,"/"),K=g.lockedFiles.some(D=>{const I=D.replace(/\\/g,"/");return v===I});return(b==="test/2.txt"||b==="2.txt")&&console.log("æ£€æŸ¥æ–‡ä»¶é”å®šçŠ¶æ€:",{filePath:b,normalizedPath:v,lockedFiles:g.lockedFiles,normalizedLockedFiles:g.lockedFiles.map(D=>D.replace(/\\/g,"/")),isLocked:K}),K}function Ce(b){ee(b)?g.unlockFile(b):g.lockFile(b)}function G(b){Q.value[b]=!Q.value[b]}return yt(()=>{re(),g.loadConfig(),g.loadLockedFiles()}),Ke(()=>p.autoUpdateEnabled,(b,v)=>{console.log(`è‡ªåŠ¨æ›´æ–°çŠ¶æ€å˜æ›´: ${v} -> ${b}`),p.toggleAutoUpdate()},{immediate:!1}),d({refreshStatus:ce}),(b,v)=>{const K=Cs,D=as,I=je,te=Bt,ze=Dt,De=Ft,Fe=fa,be=ls;return f(),_($e,null,[e("div",Ma,[e("div",Pa,[v[8]||(v[8]=e("h2",null,"Git çŠ¶æ€",-1)),e("div",Ha,[s(D,{content:o(p).autoUpdateEnabled?"ç¦ç”¨è‡ªåŠ¨æ›´æ–°æ–‡ä»¶çŠ¶æ€":"å¯ç”¨è‡ªåŠ¨æ›´æ–°æ–‡ä»¶çŠ¶æ€",placement:"top","hide-after":1e3},{default:a(()=>[s(K,{modelValue:o(p).autoUpdateEnabled,"onUpdate:modelValue":v[0]||(v[0]=h=>o(p).autoUpdateEnabled=h),style:{"--el-switch-on-color":"#67C23A","--el-switch-off-color":"#909399","margin-right":"10px"},"inline-prompt":"","active-icon":o(Ss),"inactive-icon":o(ss),class:"auto-update-switch"},null,8,["modelValue","active-icon","inactive-icon"])]),_:1},8,["content"]),s(D,{content:"Git Pull (æ‹‰å–è¿œç¨‹æ›´æ–°)",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:"primary",icon:o(Ts),circle:"",size:"small",onClick:x,loading:o(p).isGitPulling,disabled:!o(p).hasUpstream},null,8,["icon","loading","disabled"])]),_:1}),s(D,{content:"Git Fetch All (è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯)",placement:"top","hide-after":1e3},{default:a(()=>[Me(s(I,{type:"primary",icon:o(xs),circle:"",size:"small",onClick:q,loading:o(p).isGitFetching},null,8,["icon","loading"]),[[ft,!1]])]),_:1}),o(g).lockedFiles.length>0?(f(),J(D,{key:0,content:"ç®¡ç†é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:"warning",circle:"",size:"small",onClick:v[1]||(v[1]=h=>Z.value=!0)},{default:a(()=>[s(te,null,{default:a(()=>[s(o(lt))]),_:1})]),_:1})]),_:1})):O("",!0),s(D,{content:"åˆ·æ–°çŠ¶æ€",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:"primary",icon:o(ua),circle:"",size:"small",onClick:ce,loading:M.value},null,8,["icon","loading"])]),_:1})])]),Me((f(),_("div",{class:"card-content","element-loading-text":o(p).isGitPulling?"æ­£åœ¨æ‹‰å–ä»£ç ...":"æ­£åœ¨è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯..."},[o(p).isGitRepo?(f(),_("div",Ja,[o(p).hasUpstream&&(o(p).branchAhead>0||o(p).branchBehind>0)?(f(),_("div",Wa,[e("div",qa,[e("div",Ya,[s(D,{content:"æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„çŠ¶æ€å¯¹æ¯”",placement:"top"},{default:a(()=>[e("div",Xa,[o(p).branchAhead>0?(f(),J(ze,{key:0,size:"small",type:"warning",class:"status-badge"},{default:a(()=>[e("span",Ka,[s(te,null,{default:a(()=>[s(o(Vs))]),_:1}),y(" ä½ çš„åˆ†æ”¯é¢†å…ˆ 'origin/"+L(o(p).currentBranch)+"' "+L(o(p).branchAhead)+" ä¸ªæäº¤ ",1)])]),_:1})):O("",!0),o(p).branchBehind>0?(f(),J(ze,{key:1,size:"small",type:"info",class:"status-badge"},{default:a(()=>[e("span",Za,[s(te,null,{default:a(()=>[s(o(mt))]),_:1}),y(" ä½ çš„åˆ†æ”¯è½å 'origin/"+L(o(p).currentBranch)+"' "+L(o(p).branchBehind)+" ä¸ªæäº¤ ",1)])]),_:1})):O("",!0)])]),_:1})])])])):O("",!0),o(p).fileList.length?(f(),_("div",Qa,[o(p).fileList.some(h=>h.type==="added")?(f(),_("div",el,[e("div",{class:"file-group-header",onClick:v[2]||(v[2]=h=>G("staged"))},[s(te,{class:he(["collapse-icon",{collapsed:Q.value.staged}])},{default:a(()=>[s(o(mt))]),_:1},8,["class"]),v[10]||(v[10]=e("span",null,"å·²æš‚å­˜çš„æ›´æ”¹",-1))]),Me(e("div",tl,[(f(!0),_($e,null,Le(o(p).fileList.filter(h=>h.type==="added"),h=>(f(),_("div",{key:h.path,class:"file-item",onClick:oe=>F(h)},[e("div",al,[e("div",{class:he(["file-status-indicator",["added",{locked:ee(h.path)}]])},null,2),e("div",ll,[s(D,{content:Y(h.path),placement:"top",disabled:Y(h.path).length<=25,"hide-after":1e3},{default:a(()=>[e("span",{class:he(["file-name",{"locked-file-name":ee(h.path)}])},[y(L(Y(h.path))+" ",1),ee(h.path)?(f(),J(te,{key:0,class:"lock-indicator"},{default:a(()=>[s(o(lt))]),_:1})):O("",!0)],2)]),_:2},1032,["content","disabled"])]),e("div",{class:"file-path-section",title:ne(h.path)},[s(D,{content:ne(h.path),placement:"top",disabled:ne(h.path).length<=30,"hide-after":1e3},{default:a(()=>[e("span",nl,L(ne(h.path)),1)]),_:2},1032,["content","disabled"])],8,ol)]),e("div",il,[s(D,{content:ee(h.path)?"è§£é”æ–‡ä»¶":"é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:ee(h.path)?"danger":"info",size:"small",circle:"",onClick:We(oe=>Ce(h.path),["stop"]),class:"file-action-btn"},{default:a(()=>[s(te,{size:"12"},{default:a(()=>[(f(),J(gt(ee(h.path)?o(lt):o(Ot))))]),_:2},1024)]),_:2},1032,["type","onClick"])]),_:2},1032,["content"]),s(D,{content:"å–æ¶ˆæš‚å­˜",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:"warning",size:"small",circle:"",onClick:We(oe=>we(h.path),["stop"]),class:"file-action-btn"},{default:a(()=>v[11]||(v[11]=[y("-")])),_:2},1032,["onClick"])]),_:2},1024)])],8,sl))),128))],512),[[ft,!Q.value.staged]])])):O("",!0),o(p).fileList.some(h=>h.type==="modified"||h.type==="deleted")?(f(),_("div",rl,[e("div",{class:"file-group-header",onClick:v[3]||(v[3]=h=>G("unstaged"))},[s(te,{class:he(["collapse-icon",{collapsed:Q.value.unstaged}])},{default:a(()=>[s(o(mt))]),_:1},8,["class"]),v[12]||(v[12]=e("span",null,"æœªæš‚å­˜çš„æ›´æ”¹",-1))]),Me(e("div",cl,[(f(!0),_($e,null,Le(o(p).fileList.filter(h=>h.type==="modified"||h.type==="deleted"),h=>(f(),_("div",{key:h.path,class:"file-item",onClick:oe=>F(h)},[e("div",dl,[e("div",{class:he(["file-status-indicator",[h.type,{locked:ee(h.path)}]])},null,2),e("div",fl,[s(D,{content:Y(h.path),placement:"top",disabled:Y(h.path).length<=25,"hide-after":1e3},{default:a(()=>[e("span",{class:he(["file-name",{"locked-file-name":ee(h.path)}])},[y(L(Y(h.path))+" ",1),ee(h.path)?(f(),J(te,{key:0,class:"lock-indicator"},{default:a(()=>[s(o(lt))]),_:1})):O("",!0)],2)]),_:2},1032,["content","disabled"])]),e("div",{class:"file-path-section",title:ne(h.path)},[s(D,{content:ne(h.path),placement:"top",disabled:ne(h.path).length<=30,"hide-after":1e3},{default:a(()=>[e("span",vl,L(ne(h.path)),1)]),_:2},1032,["content","disabled"])],8,pl)]),e("div",ml,[s(D,{content:ee(h.path)?"è§£é”æ–‡ä»¶":"é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:ee(h.path)?"danger":"info",size:"small",circle:"",onClick:We(oe=>Ce(h.path),["stop"]),class:"file-action-btn"},{default:a(()=>[s(te,{size:"12"},{default:a(()=>[(f(),J(gt(ee(h.path)?o(lt):o(Ot))))]),_:2},1024)]),_:2},1032,["type","onClick"])]),_:2},1032,["content"]),s(D,{content:"æ·»åŠ åˆ°æš‚å­˜åŒº",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:"success",size:"small",circle:"",onClick:We(oe=>N(h.path),["stop"]),class:"file-action-btn"},{default:a(()=>v[13]||(v[13]=[y("+")])),_:2},1032,["onClick"])]),_:2},1024),s(D,{content:"æ’¤å›ä¿®æ”¹",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:"danger",size:"small",icon:o(os),circle:"",onClick:We(oe=>se(h.path),["stop"]),class:"file-action-btn"},null,8,["icon","onClick"])]),_:2},1024)])],8,ul))),128))],512),[[ft,!Q.value.unstaged]])])):O("",!0),o(p).fileList.some(h=>h.type==="untracked")?(f(),_("div",gl,[e("div",{class:"file-group-header",onClick:v[4]||(v[4]=h=>G("untracked"))},[s(te,{class:he(["collapse-icon",{collapsed:Q.value.untracked}])},{default:a(()=>[s(o(mt))]),_:1},8,["class"]),v[14]||(v[14]=e("span",null,"æœªè·Ÿè¸ªçš„æ–‡ä»¶",-1))]),Me(e("div",hl,[(f(!0),_($e,null,Le(o(p).fileList.filter(h=>h.type==="untracked"),h=>(f(),_("div",{key:h.path,class:"file-item",onClick:oe=>F(h)},[e("div",_l,[e("div",{class:he(["file-status-indicator",["untracked",{locked:ee(h.path)}]])},null,2),e("div",wl,[s(D,{content:Y(h.path),placement:"top",disabled:Y(h.path).length<=25,"hide-after":1e3},{default:a(()=>[e("span",{class:he(["file-name",{"locked-file-name":ee(h.path)}])},[y(L(Y(h.path))+" ",1),ee(h.path)?(f(),J(te,{key:0,class:"lock-indicator"},{default:a(()=>[s(o(lt))]),_:1})):O("",!0)],2)]),_:2},1032,["content","disabled"])]),e("div",{class:"file-path-section",title:ne(h.path)},[s(D,{content:ne(h.path),placement:"top",disabled:ne(h.path).length<=30,"hide-after":1e3},{default:a(()=>[e("span",$l,L(ne(h.path)),1)]),_:2},1032,["content","disabled"])],8,kl)]),e("div",bl,[s(D,{content:ee(h.path)?"è§£é”æ–‡ä»¶":"é”å®šæ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:ee(h.path)?"danger":"info",size:"small",circle:"",onClick:We(oe=>Ce(h.path),["stop"]),class:"file-action-btn"},{default:a(()=>[s(te,{size:"12"},{default:a(()=>[(f(),J(gt(ee(h.path)?o(lt):o(Ot))))]),_:2},1024)]),_:2},1032,["type","onClick"])]),_:2},1032,["content"]),s(D,{content:"æ·»åŠ åˆ°æš‚å­˜åŒº",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:"success",size:"small",circle:"",onClick:We(oe=>N(h.path),["stop"]),class:"file-action-btn"},{default:a(()=>v[15]||(v[15]=[y("+")])),_:2},1032,["onClick"])]),_:2},1024),s(D,{content:"åˆ é™¤æ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:"danger",size:"small",icon:o(ss),circle:"",onClick:We(oe=>se(h.path),["stop"]),class:"file-action-btn"},null,8,["icon","onClick"])]),_:2},1024)])],8,yl))),128))],512),[[ft,!Q.value.untracked]])])):O("",!0)])):o(p).isGitRepo?(f(),_("div",Cl,[e("div",Sl,[s(te,null,{default:a(()=>[s(o(Ls))]),_:1})]),v[16]||(v[16]=e("div",{class:"empty-text"},"æ²¡æœ‰æ£€æµ‹åˆ°ä»»ä½•æ›´æ”¹",-1)),v[17]||(v[17]=e("div",{class:"empty-subtext"},"å·¥ä½œåŒºæ˜¯å¹²å‡€çš„",-1))])):O("",!0)])):(f(),_("div",Na,v[9]||(v[9]=[e("div",{class:"empty-status"},[e("p",null,"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“")],-1)])))],8,Ia)),[[be,o(p).isGitPulling||o(p).isGitFetching]])]),s(De,{modelValue:P.value,"onUpdate:modelValue":v[5]||(v[5]=h=>P.value=h),title:`æ–‡ä»¶å·®å¼‚: ${R.value}`,width:"80%",top:"50px",style:{height:"calc(100vh - 100px)"},"destroy-on-close":"",class:"diff-dialog use-flex-body"},{footer:a(()=>[e("div",Ll,[s(I,{type:"primary",icon:o(da),onClick:B,disabled:U.value<=0||o(p).fileList.length===0,plain:"",class:"nav-button"},{default:a(()=>v[18]||(v[18]=[y(" ä¸Šä¸€ä¸ªæ–‡ä»¶ ")])),_:1},8,["icon","disabled"]),e("div",zl,[s(ze,{type:"info",effect:"plain",class:"counter-tag"},{default:a(()=>[y(L(U.value+1)+" / "+L(o(p).fileList.length),1)]),_:1})]),s(I,{type:"primary",icon:o(hs),onClick:W,disabled:U.value>=o(p).fileList.length-1||o(p).fileList.length===0,plain:"",class:"nav-button"},{icon:a(()=>[s(te,{class:"el-icon--right"},{default:a(()=>[s(o(hs))]),_:1})]),default:a(()=>[v[19]||(v[19]=y(" ä¸‹ä¸€ä¸ªæ–‡ä»¶ "))]),_:1},8,["icon","disabled"])])]),default:a(()=>[Me((f(),_("div",Tl,[E.value?(f(),_("div",{key:0,innerHTML:S(E.value),class:"diff-formatted"},null,8,xl)):(f(),_("div",Vl,"è¯¥æ–‡ä»¶æ²¡æœ‰å·®å¼‚æˆ–æ˜¯æ–°æ–‡ä»¶"))])),[[be,ge.value]])]),_:1},8,["modelValue","title"]),s(De,{modelValue:Z.value,"onUpdate:modelValue":v[7]||(v[7]=h=>Z.value=h),title:"é”å®šæ–‡ä»¶ç®¡ç†",width:"700px","destroy-on-close":""},{footer:a(()=>[e("span",Hl,[s(I,{onClick:v[6]||(v[6]=h=>Z.value=!1)},{default:a(()=>v[27]||(v[27]=[y("å…³é—­")])),_:1})])]),default:a(()=>[e("div",Bl,[e("div",Dl,[s(te,{class:"description-icon"},{default:a(()=>[s(o(ys))]),_:1}),v[20]||(v[20]=e("span",{class:"description-title"},"æ–‡ä»¶é”å®šåŠŸèƒ½è¯´æ˜",-1))]),v[21]||(v[21]=e("div",{class:"description-content"},[e("p",null,[e("strong",null,"ğŸ”’ é”å®šæ–‡ä»¶çš„ä½œç”¨ï¼š")]),e("ul",null,[e("li",null,"é”å®šçš„æ–‡ä»¶åœ¨æ‰§è¡Œ Git æäº¤æ—¶ä¼šè¢«è‡ªåŠ¨è·³è¿‡ï¼Œä¸ä¼šè¢«æ·»åŠ åˆ°æš‚å­˜åŒº"),e("li",null,"é€‚ç”¨äºä¸´æ—¶æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€æˆ–ä¸æƒ³æäº¤çš„å¼€å‘ä¸­æ–‡ä»¶"),e("li",null,"é”å®šçŠ¶æ€ä¼šæŒä¹…ä¿å­˜ï¼Œç›´åˆ°æ‰‹åŠ¨è§£é”")]),e("p",null,[e("strong",null,"ğŸ’¡ ä½¿ç”¨åœºæ™¯ï¼š")]),e("ul",null,[e("li",null,"å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æµ‹è¯•æ–‡ä»¶"),e("li",null,"æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€APIå¯†é’¥ç­‰ï¼‰"),e("li",null,"æ­£åœ¨å¼€å‘ä½†è¿˜ä¸æƒ³æäº¤çš„åŠŸèƒ½æ–‡ä»¶")])],-1))]),s(Fe),o(g).lockedFiles.length===0?(f(),_("div",Fl,[e("div",Rl,[s(te,null,{default:a(()=>[s(o(lt))]),_:1})]),v[22]||(v[22]=e("p",null,"å½“å‰æ²¡æœ‰é”å®šçš„æ–‡ä»¶",-1)),v[23]||(v[23]=e("p",{class:"empty-tip"},"æ‚¨å¯ä»¥åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­ç‚¹å‡»é”å®šæŒ‰é’®æ¥é”å®šæ–‡ä»¶",-1))])):(f(),_("div",Gl,[e("div",jl,[e("span",null,"ğŸ”’ å·²é”å®š "+L(o(g).lockedFiles.length)+" ä¸ªæ–‡ä»¶",1),s(D,{content:"è¿™äº›æ–‡ä»¶åœ¨æäº¤æ—¶ä¼šè¢«è‡ªåŠ¨è·³è¿‡",placement:"top"},{default:a(()=>[s(te,{class:"info-icon"},{default:a(()=>[s(o(ys))]),_:1})]),_:1}),v[25]||(v[25]=e("div",{style:{flex:"1"}},null,-1)),s(I,{type:"danger",size:"small",plain:"",disabled:!o(g).lockedFiles.length,onClick:pe},{default:a(()=>v[24]||(v[24]=[y(" æ¸…ç©ºå…¨éƒ¨é”å®š ")])),_:1},8,["disabled"])]),e("div",Al,[(f(!0),_($e,null,Le(o(g).lockedFiles,h=>(f(),_("div",{key:h,class:"locked-file-item"},[e("div",Ul,[v[26]||(v[26]=e("div",{class:"file-status-indicator locked"},null,-1)),e("div",Ol,[e("span",El,L(Y(h)),1),e("span",Ml,L(ne(h)),1)])]),e("div",Pl,[s(D,{content:"è§£é”æ–‡ä»¶",placement:"top","hide-after":1e3},{default:a(()=>[s(I,{type:"danger",size:"small",circle:"",class:"file-action-btn",icon:o(Ot),"aria-label":"è§£é”",onClick:oe=>_e(h)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]))]),_:1},8,["modelValue"])],64)}}}),Rt=(ye,d)=>{const k=ye.__vccOpts||ye;for(const[p,g]of d)k[p]=g;return k},Nl=Rt(Il,[["__scopeId","data-v-c2fa4de9"]]),Jl={class:"card-header"},Wl={class:"header-actions"},ql={key:0,class:"pushing-indicator"},Yl={class:"pushing-text"},Xl={key:0,class:"push-success-indicator"},Kl={class:"card-content"},Zl={class:"layout-container"},Ql={key:0,class:"git-config-warning"},eo={key:1,class:"commit-section"},to={class:"commit-options"},so={class:"options-row"},ao={class:"commit-mode-toggle"},lo={class:"no-verify-toggle"},oo={key:0,class:"commit-form"},no={class:"description-container"},io={class:"preview-section"},ro={class:"preview-content code-command"},co={class:"form-bottom-actions"},uo={class:"actions-flex-container"},fo={class:"left-actions"},po={class:"button-grid"},vo={key:0},mo={key:0},go={key:0},ho={class:"right-actions"},yo={class:"one-push-content"},_o={key:1,class:"standard-commit-form"},wo={class:"standard-commit-header"},ko={class:"type-scope-container"},$o={class:"scope-wrapper"},bo={class:"description-container"},Co={class:"advanced-fields"},So={class:"preview-section"},To={class:"preview-content code-command"},xo={class:"form-bottom-actions"},Vo={class:"actions-flex-container"},Lo={class:"left-actions"},zo={class:"button-grid"},Bo={key:0},Do={key:0},Fo={key:0},Ro={class:"right-actions"},Go={class:"one-push-content"},jo={class:"actions-section"},Ao={class:"action-groups"},Uo={class:"operations-wrapper"},Oo={class:"action-group"},Eo={class:"group-buttons"},Mo={key:0},Po={key:0},Ho={key:0},Io={key:0},No={class:"action-group"},Jo={class:"group-buttons"},Wo={class:"action-group reset-group"},qo={class:"group-buttons"},Yo={key:0},Xo={class:"action-group branch-group"},Ko={class:"group-buttons"},Zo={class:"action-group"},Qo={class:"group-buttons"},en={class:"dialog-footer"},tn={class:"template-container"},sn={class:"template-form"},an={class:"template-form-buttons"},ln={class:"template-list"},on={class:"template-content"},nn={class:"template-actions"},rn={class:"template-container"},cn={class:"template-form"},un={class:"template-form-buttons"},dn={class:"template-list"},fn={class:"template-content"},pn={class:"template-actions"},vn={class:"template-container message-template-container"},mn={class:"template-form"},gn={class:"template-form-buttons"},hn={class:"templates-container"},yn={class:"message-templates-list"},_n={class:"templates-scroll-area"},wn={class:"template-content"},kn={class:"template-actions"},$n={class:"current-default-message"},bn={class:"default-message-content"},Cn={class:"message-help-text"},Sn={class:"stash-dialog-content"},Tn={class:"dialog-footer"},xn={class:"merge-dialog-content"},Vn={class:"merge-intro"},Ln={class:"merge-options"},zn={class:"dialog-footer"},Bn={class:"stash-list-content"},Dn={class:"stash-action-buttons"},Fn={key:0,class:"stash-list-actions"},Rn={key:0,class:"stash-header"},Gn={class:"stash-info"},jn={class:"stash-description"},An={class:"stash-main-content"},Un={class:"stash-files-panel"},On={class:"files-list"},En=["onClick"],Mn={class:"file-name"},Pn={class:"stash-diff-panel"},Hn={class:"panel-header"},In={key:0,class:"selected-file"},Nn={class:"diff-content dialog-content-scroll"},Jn=["innerHTML"],Wn={class:"dialog-footer"},qn=zt({__name:"CommitForm",setup(ye){const d=ht(),k=cs(),p=u(""),g=u(!1),M=u(!1),R=u("è¾“å…¥æäº¤ä¿¡æ¯..."),E=u(""),P=u(!1),ge=u("feat"),U=u(""),Z=u(""),Q=u(""),ie=u(""),re=u(!1),_e=u(""),pe=u(!1),S=u([]),z=u(!1),B=u(""),W=u(!1),F=u(""),N=u(-1),we=u(!1),ce=u(""),V=u({noFf:!1,squash:!1,noCommit:!1,message:""}),x=u([]),q=u(!1),se=u(""),Y=u(!1),ne=u(""),ee=u(-1),Ce=u(!1),G=u(""),b=u(!1),v=u(!1),K=[{value:"feat",label:"feat: æ–°åŠŸèƒ½"},{value:"fix",label:"fix: ä¿®å¤bug"},{value:"docs",label:"docs: æ–‡æ¡£ä¿®æ”¹"},{value:"style",label:"style: æ ·å¼ä¿®æ”¹"},{value:"refactor",label:"refactor: ä»£ç é‡æ„"},{value:"test",label:"test: æµ‹è¯•ä»£ç "},{value:"chore",label:"chore: æ„å»º/å·¥å…·ä¿®æ”¹"}],D=u(!1),I=u(!1),te=u(""),ze=u(!1),De=u(!0),Fe=u(!1),be=u(null),h=u([]),oe=u(""),Ae=u(!1),Ue=u("");function Ie(){te.value="",ze.value=!1,De.value=!0,D.value=!0}function qe(){try{const r=k.config;_e.value=JSON.stringify(r,null,2),re.value=!0}catch{n.error("åŠ è½½é…ç½®å¤±è´¥")}}async function Ne(){try{pe.value=!0;let r;try{r=JSON.parse(_e.value)}catch(ae){n.error(`JSON è§£æå¤±è´¥: ${ae.message||ae}`);return}const T=await(await fetch("/api/config/saveAll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:r})})).json();if(!T.success)throw new Error(T.error||"ä¿å­˜å¤±è´¥");await k.loadConfig(!0);try{await k.loadLockedFiles()}catch{}try{Array.isArray(k.descriptionTemplates)&&(S.value=[...k.descriptionTemplates])}catch{}try{Array.isArray(k.scopeTemplates)&&(x.value=[...k.scopeTemplates])}catch{}try{Array.isArray(k.messageTemplates)&&(ue.value=[...k.messageTemplates])}catch{}n.success("é…ç½®å·²ä¿å­˜"),re.value=!1}catch(r){n.error(`ä¿å­˜é…ç½®å¤±è´¥: ${r.message||r}`)}finally{pe.value=!1}}async function C(){try{const r=await fetch("/api/config/open-file",{method:"POST"}),t=await r.json();if(!r.ok||!(t!=null&&t.success))throw new Error((t==null?void 0:t.error)||"æ‰“å¼€å¤±è´¥");n.success("å·²ç”¨ç³»ç»Ÿç¨‹åºæ‰“å¼€é…ç½®æ–‡ä»¶")}catch(r){n.error(`æ‰“å¼€é…ç½®æ–‡ä»¶å¤±è´¥: ${(r==null?void 0:r.message)||r}`)}}function c(){d.getStashList(),I.value=!0}async function X(){try{await d.saveStash(te.value,ze.value,De.value),D.value=!1}catch(r){console.error("å‚¨è—å¤±è´¥:",r)}}async function H(r,t=!1){try{await d.applyStash(r,t),t&&await d.getStashList()}catch(T){console.error("åº”ç”¨å‚¨è—å¤±è´¥:",T)}}async function Se(r){Oe.confirm("ç¡®å®šè¦åˆ é™¤æ­¤å‚¨è—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","åˆ é™¤å‚¨è—",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{await d.dropStash(r),await d.getStashList()}).catch(()=>{})}async function Ve(){Oe.confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å‚¨è—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","æ¸…ç©ºæ‰€æœ‰å‚¨è—",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{await d.clearAllStashes(),await d.getStashList()}).catch(()=>{})}async function ve(r){if(r){be.value=r,Fe.value=!0,Ae.value=!0,h.value=[],oe.value="",Ue.value="";try{if(!r.id||r.id.length<7){oe.value="æ— æ•ˆçš„stash ID",Ae.value=!1;return}const T=await(await fetch(`/api/stash-files?stashId=${encodeURIComponent(r.id)}`)).json();T.success&&Array.isArray(T.files)?(h.value=T.files,h.value.length>0?await ke(r.id,h.value[0]):oe.value="è¯¥stashæ²¡æœ‰å˜æ›´æ–‡ä»¶"):oe.value=`è·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${T.error||"æœªçŸ¥é”™è¯¯"}`}catch(t){oe.value=`è·å–stashè¯¦æƒ…å¤±è´¥: ${t.message}`}finally{Ae.value=!1}}}async function ke(r,t){Ae.value=!0,Ue.value=t;try{const ae=await(await fetch(`/api/stash-file-diff?stashId=${encodeURIComponent(r)}&file=${encodeURIComponent(t)}`)).json();ae.success?oe.value=ae.diff||"æ²¡æœ‰å˜æ›´å†…å®¹":oe.value=`è·å–å·®å¼‚å¤±è´¥: ${ae.error||"æœªçŸ¥é”™è¯¯"}`}catch(T){oe.value=`è·å–å·®å¼‚å¤±è´¥: ${T.message}`}finally{Ae.value=!1}}function Re(r){if(!r)return"";const t=r.split(`
`);function T(ae){return ae.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}return t.map(ae=>{const fe=T(ae);return ae.startsWith("diff --git")?`<div class="diff-header">${fe}</div>`:ae.startsWith("---")?`<div class="diff-old-file">${fe}</div>`:ae.startsWith("+++")?`<div class="diff-new-file">${fe}</div>`:ae.startsWith("@@")?`<div class="diff-hunk-header">${fe}</div>`:ae.startsWith("+")?`<div class="diff-added">${fe}</div>`:ae.startsWith("-")?`<div class="diff-removed">${fe}</div>`:`<div class="diff-context">${fe}</div>`}).join("")}const ue=u([]),me=u(!1),Ye=u(""),Pe=u(-1);Ke(P,r=>{localStorage.setItem("zen-gitsync-standard-commit",r.toString())}),Ke(b,r=>{localStorage.setItem("zen-gitsync-skip-hooks",r.toString())});const A=Be(()=>{if(!P.value)return p.value||E.value;let r=`${ge.value||""}`;return U.value&&(r+=`(${U.value})`),r+=`: ${Z.value}`,Q.value&&(r+=`

${Q.value}`),ie.value&&(r+=`

${ie.value}`),r}),ot=Be(()=>{let r=`git commit -m "${A.value}"`;return b.value&&(r+=" --no-verify"),r});function nt(){const r=k.config;r&&(R.value=`è¾“å…¥æäº¤ä¿¡æ¯ (é»˜è®¤: ${r.defaultCommitMessage})`,E.value=r.defaultCommitMessage||"",r.descriptionTemplates&&Array.isArray(r.descriptionTemplates)&&(S.value=r.descriptionTemplates),r.scopeTemplates&&Array.isArray(r.scopeTemplates)&&(x.value=r.scopeTemplates),r.messageTemplates&&Array.isArray(r.messageTemplates)&&(ue.value=r.messageTemplates))}async function Ze(){if(!B.value.trim()){n({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(W.value)await _t();else{if(S.value.includes(B.value)){n({message:"è¯¥æ¨¡æ¿å·²å­˜åœ¨",type:"warning"});return}await k.saveTemplate(B.value,"description")&&(S.value.includes(B.value)||S.value.push(B.value),S.value=[...S.value],B.value="")}}catch(r){n({message:`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${r.message}`,type:"error"})}}async function _t(){if(!B.value.trim()){n({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(await k.updateTemplate(F.value,B.value,"description")){const t=S.value.indexOf(F.value);t!==-1&&(S.value[t]=B.value),S.value=[...S.value],W.value=!1,F.value="",N.value=-1,B.value=""}}catch(r){n({message:`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${r.message}`,type:"error"})}}function it(r,t){W.value=!0,F.value=r,N.value=t,B.value=r}function He(){W.value=!1,F.value="",N.value=-1,B.value=""}async function wt(){if(!se.value.trim()){n({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(Y.value)await i();else{if(x.value.includes(se.value)){n({message:"è¯¥æ¨¡æ¿å·²å­˜åœ¨",type:"warning"});return}await k.saveTemplate(se.value,"scope")&&(x.value.includes(se.value)||x.value.push(se.value),x.value=[...x.value],se.value="")}}catch(r){n({message:`ä¿å­˜æ¨¡æ¿å¤±è´¥: ${r.message}`,type:"error"})}}async function i(){if(!se.value.trim()){n({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(await k.updateTemplate(ne.value,se.value,"scope")){const t=x.value.indexOf(ne.value);t!==-1&&(x.value[t]=se.value),x.value=[...x.value],Y.value=!1,ne.value="",ee.value=-1,se.value=""}}catch(r){n({message:`æ›´æ–°æ¨¡æ¿å¤±è´¥: ${r.message}`,type:"error"})}}function l(r,t){Y.value=!0,ne.value=r,ee.value=t,se.value=r}function m(){Y.value=!1,ne.value="",ee.value=-1,se.value=""}async function $(r){try{if(await Oe.confirm(`ç¡®å®šè¦åˆ é™¤æè¿°æ¨¡æ¿ "${r}" å—ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await k.deleteTemplate(r,"description")){const T=S.value.indexOf(r);T!==-1&&S.value.splice(T,1),S.value=[...S.value]}}catch(t){if(t==="cancel")return;n({message:`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${t.message}`,type:"error"})}}async function le(r){try{if(await Oe.confirm(`ç¡®å®šè¦åˆ é™¤ä½œç”¨åŸŸæ¨¡æ¿ "${r}" å—ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await k.deleteTemplate(r,"scope")){const T=x.value.indexOf(r);T!==-1&&x.value.splice(T,1),x.value=[...x.value]}}catch(t){if(t==="cancel")return;n({message:`åˆ é™¤æ¨¡æ¿å¤±è´¥: ${t.message}`,type:"error"})}}function de(r){Z.value=r,z.value=!1}function Te(r){U.value=r,q.value=!1}function j(){z.value=!0}function Xe(){q.value=!0}async function kt(){try{await d.addToStage()&&d.fetchStatus()}catch(r){n({message:`æ·»åŠ æ–‡ä»¶å¤±è´¥: ${r.message}`,type:"error"})}}async function Ht(){if(!A.value.trim()){n({message:"æäº¤ä¿¡æ¯ä¸èƒ½ä¸ºç©º",type:"warning"});return}try{await d.commitChanges(A.value,b.value)&&(Jt(),d.fetchStatus(),d.fetchLog(),d.getBranchStatus(!0))}catch(r){n({message:`æäº¤å¤±è´¥: ${r.message}`,type:"error"})}}function Gt(){g.value=!0,setTimeout(()=>{g.value=!1},2e3)}async function It(){try{await d.pushToRemote(),M.value=!0;try{await new Promise(r=>setTimeout(r,200)),Gt()}catch(r){console.error("æ¨é€åå¤„ç†å¤±è´¥:",r),Gt()}finally{M.value=!1}}catch(r){M.value=!1,n({message:`æ¨é€å¤±è´¥: ${r.message}`,type:"error"})}}async function js(){try{await d.gitPull(),await d.fetchStatus(),await d.fetchLog(!1)}catch(r){console.error("æ‹‰å–æ“ä½œå‘ç”Ÿé”™è¯¯:",r)}}async function As(){try{await d.gitFetchAll(),await d.fetchStatus(),await d.fetchLog(!1)}catch(r){console.error("è·å–è¿œç¨‹åˆ†æ”¯ä¿¡æ¯æ“ä½œå‘ç”Ÿé”™è¯¯:",r)}}async function Us(){if(!A.value.trim()){n({message:"æäº¤ä¿¡æ¯ä¸èƒ½ä¸ºç©º",type:"warning"});return}try{await d.addAndCommit(A.value,b.value),Jt(),d.fetchStatus(),d.fetchLog()}catch(r){n({message:`æš‚å­˜å¹¶æäº¤å¤±è´¥: ${r.message}`,type:"error"})}}async function Nt(){if(!A.value.trim()){n({message:"æäº¤ä¿¡æ¯ä¸èƒ½ä¸ºç©º",type:"warning"});return}try{if(await d.addCommitAndPush(A.value,b.value)){Jt(),M.value=!0;try{await new Promise(t=>setTimeout(t,1e3)),console.log("ä¸€é”®æ¨é€å®Œæˆï¼ŒçŠ¶æ€å·²åœ¨pushToRemoteä¸­åˆ·æ–°"),Gt()}catch(t){console.error("ä¸€é”®æ¨é€åå¤„ç†å¤±è´¥:",t),Gt()}finally{M.value=!1}}}catch(r){n({message:`æš‚å­˜ã€æäº¤å¹¶æ¨é€å¤±è´¥: ${r.message}`,type:"error"})}}async function Os(){try{await Oe.confirm(`ç¡®å®šè¦é‡ç½®å½“å‰åˆ†æ”¯ "${d.currentBranch}" åˆ°è¿œç¨‹çŠ¶æ€å—ï¼Ÿè¿™å°†ä¸¢å¤±æ‰€æœ‰æœªæ¨é€çš„æäº¤å’Œæœ¬åœ°æ›´æ”¹ã€‚`,"é‡ç½®åˆ°è¿œç¨‹åˆ†æ”¯",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),await d.resetToRemote(d.currentBranch)&&(d.fetchStatus(),d.fetchLog())}catch(r){r!=="cancel"&&n({message:`é‡ç½®åˆ°è¿œç¨‹åˆ†æ”¯å¤±è´¥: ${r.message}`,type:"error"})}}function Jt(){p.value="",Z.value="",Q.value="",ie.value=""}function Es(){G.value=E.value,Ce.value=!0}async function Ms(){if(!G.value.trim()){n({message:"è¯·è¾“å…¥é»˜è®¤æäº¤ä¿¡æ¯",type:"warning"});return}try{await k.saveDefaultMessage(G.value)&&(E.value=G.value,R.value=`è¾“å…¥æäº¤ä¿¡æ¯ (é»˜è®¤: ${G.value})`,Ce.value=!1)}catch(r){n({message:`ä¿å­˜é»˜è®¤æäº¤ä¿¡æ¯å¤±è´¥: ${r.message}`,type:"error"})}}function jt(r){const t=r.replace(/\\/g,"/");return k.lockedFiles.some(T=>{const ae=T.replace(/\\/g,"/");return t===ae})}const $t=Be(()=>d.fileList.some(r=>["modified","deleted","untracked"].includes(r.type)&&!jt(r.path))),rt=Be(()=>d.fileList.filter(r=>["modified","deleted","untracked"].includes(r.type)&&!jt(r.path)).length),Je=Be(()=>d.fileList.filter(r=>r.type==="added"&&!jt(r.path)).length),pt=Be(()=>Je.value>0),ct=Be(()=>d.fileList.some(r=>!jt(r.path))),Qe=Be(()=>d.branchAhead>0),Wt=Be(()=>d.branchBehind>0),et=Be(()=>d.hasUpstream&&Qe.value&&!pt.value),us=Be(()=>pt.value),Ps=Be(()=>d.hasUpstream&&(Qe.value||Wt.value||ct.value));async function Hs(){if(!G.value.trim()){n({message:"è¯·è¾“å…¥æ¨¡æ¿å†…å®¹",type:"warning"});return}try{if(me.value)await Is();else{if(ue.value.includes(G.value)){n({message:"è¯¥æ¨¡æ¿å·²å­˜åœ¨",type:"warning"});return}ue.value.push(G.value);const t=await(await fetch("/api/config/save-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:G.value,type:"message"})})).json();t.success?(n({message:"æäº¤ä¿¡æ¯æ¨¡æ¿ä¿å­˜æˆåŠŸ!",type:"success"}),G.value=""):n({message:"æ¨¡æ¿ä¿å­˜å¤±è´¥: "+t.error,type:"error"})}}catch(r){n({message:"æ¨¡æ¿ä¿å­˜å¤±è´¥: "+r.message,type:"error"})}}async function Is(){try{if(Pe.value>=0){const r=Ye.value,t=G.value;ue.value[Pe.value]=t;const ae=await(await fetch("/api/config/update-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldTemplate:r,newTemplate:t,type:"message"})})).json();ae.success?(n({message:"æäº¤ä¿¡æ¯æ¨¡æ¿æ›´æ–°æˆåŠŸ!",type:"success"}),me.value=!1,Ye.value="",Pe.value=-1,G.value=""):n({message:"æ¨¡æ¿æ›´æ–°å¤±è´¥: "+ae.error,type:"error"})}}catch(r){n({message:"æ¨¡æ¿æ›´æ–°å¤±è´¥: "+r.message,type:"error"})}}function Ns(r,t){me.value=!0,Ye.value=r,Pe.value=t,G.value=r}function Js(){me.value=!1,Ye.value="",Pe.value=-1,G.value=""}async function Ws(r){try{const t=ue.value.indexOf(r);t!==-1&&ue.value.splice(t,1);const ae=await(await fetch("/api/config/delete-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:r,type:"message"})})).json();ae.success?n({message:"æäº¤ä¿¡æ¯æ¨¡æ¿åˆ é™¤æˆåŠŸ!",type:"success"}):n({message:"æ¨¡æ¿åˆ é™¤å¤±è´¥: "+ae.error,type:"error"})}catch(t){n({message:"æ¨¡æ¿åˆ é™¤å¤±è´¥: "+t.message,type:"error"})}}function qs(r){p.value=r,G.value=r}yt(async()=>{const r=localStorage.getItem("zen-gitsync-standard-commit");r!==null&&(P.value=r==="true");const t=localStorage.getItem("zen-gitsync-skip-hooks");t!==null&&(b.value=t==="true"),Ke(()=>k.config,nt,{immediate:!0}),k.config||await k.loadConfig()});function Ys(){ce.value="",V.value={noFf:!1,squash:!1,noCommit:!1,message:""},vt.value="all",we.value=!0,d.allBranches.length===0&&d.getAllBranches()}const vt=u("all"),Xs=Be(()=>{const r=d.allBranches.filter(t=>t!==d.currentBranch);if(console.log("ç­›é€‰åˆ†æ”¯åˆ—è¡¨:",{allBranches:d.allBranches,currentBranch:d.currentBranch,branchTypeFilter:vt.value,filteredBranches:r}),vt.value==="local"){const t=r.filter(T=>!T.includes("origin/"));return console.log("æœ¬åœ°åˆ†æ”¯:",t),t}else if(vt.value==="remote"){const t=r.filter(T=>T.includes("origin/"));return console.log("è¿œç¨‹åˆ†æ”¯:",t),t}else return console.log("æ‰€æœ‰åˆ†æ”¯:",r),r});async function Ks(){if(!ce.value){n({message:"è¯·é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯",type:"warning"});return}try{await d.mergeBranch(ce.value,V.value)&&(we.value=!1,await d.fetchStatus(),await d.fetchLog(!1))}catch(r){console.error("åˆå¹¶åˆ†æ”¯æ“ä½œå‘ç”Ÿé”™è¯¯:",r)}}const At=u(!1);function Zs(){At.value=!At.value}function Qs(r,t){const ae=[...r?S.value.filter(fe=>fe.toLowerCase().includes(r.toLowerCase())).map(fe=>({value:fe})):S.value.map(fe=>({value:fe})),{value:"âš™ï¸ ç®¡ç†æ¨¡æ¿...",isSettings:!0}];t(ae)}function ea(r,t){const ae=[...r?x.value.filter(fe=>fe.toLowerCase().includes(r.toLowerCase())).map(fe=>({value:fe})):x.value.map(fe=>({value:fe})),{value:"âš™ï¸ ç®¡ç†æ¨¡æ¿...",isSettings:!0}];t(ae)}function ta(r){r.isSettings?(j(),Z.value=""):Z.value=r.value}function sa(r){r.isSettings?(Xe(),U.value=""):U.value=r.value}function aa(r,t){const ae=[...r?ue.value.filter(fe=>fe.toLowerCase().includes(r.toLowerCase())).map(fe=>({value:fe})):ue.value.map(fe=>({value:fe})),{value:"âš™ï¸ ç®¡ç†æ¨¡æ¿...",isSettings:!0}];t(ae)}function la(r){r.isSettings?(Es(),p.value=""):p.value=r.value}return(r,t)=>{const T=je,ae=Bt,fe=ns,ds=Cs,qt=va,xe=as,fs=Mt,ps=Pt,tt=is,oa=ga,st=Ft,bt=rs,Yt=ha,Ut=Bs,vs=Dt,ut=Fs,Ct=ya,ms=Ds,Xt=wa,na=_a,Kt=Vt,ia=Rs,ra=ka,gs=ls;return f(),_($e,null,[e("div",{class:he(["card",{"is-pushing":o(d).isPushing}])},[e("div",Jl,[t[36]||(t[36]=e("h2",null,"æäº¤æ›´æ”¹",-1)),e("div",Wl,[s(T,{size:"small",type:"primary",icon:o(St),onClick:qe},{default:a(()=>t[35]||(t[35]=[y("é…ç½®")])),_:1},8,["icon"]),s(T,{type:"primary",icon:o(pa),size:"small",circle:"",onClick:Zs,class:"git-tools-button"},null,8,["icon"])])]),s(_s,{name:"el-fade-in-linear"},{default:a(()=>[o(d).isPushing||M.value?(f(),_("div",ql,[t[37]||(t[37]=e("div",{class:"pushing-spinner"},[e("svg",{viewBox:"0 0 50 50",class:"circular"},[e("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})])],-1)),e("div",Yl,L(o(d).isPushing?"æ­£åœ¨æ¨é€...":"æ›´æ–°çŠ¶æ€ä¸­..."),1)])):O("",!0)]),_:1}),s(_s,{name:"el-fade-in-linear"},{default:a(()=>[g.value?(f(),_("div",Xl,[s(ae,{class:"push-success-icon"},{default:a(()=>[s(o(Ss))]),_:1}),t[38]||(t[38]=e("div",{class:"push-success-text"},"å·²å®Œæˆ!",-1))])):O("",!0)]),_:1}),e("div",Kl,[e("div",Zl,[o(d).userName===""||o(d).userEmail===""?(f(),_("div",Ql,[s(fe,{title:"Gitç”¨æˆ·ä¿¡æ¯æœªé…ç½®",type:"warning",closable:!1,"show-icon":""},{default:a(()=>t[39]||(t[39]=[e("p",null,"æ‚¨éœ€è¦é…ç½®Gitç”¨æˆ·åå’Œé‚®ç®±æ‰èƒ½æäº¤ä»£ç ã€‚è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é…ç½®ï¼š",-1),e("pre",{class:"config-command"},`git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"`,-1)])),_:1})])):(f(),_("div",eo,[e("div",to,[e("div",so,[e("div",ao,[s(ds,{modelValue:P.value,"onUpdate:modelValue":t[0]||(t[0]=w=>P.value=w),"active-text":"æ ‡å‡†åŒ–æäº¤","inactive-text":"æ™®é€šæäº¤"},null,8,["modelValue"])]),e("div",lo,[s(ds,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=w=>b.value=w),"active-text":"è·³è¿‡ Git é’©å­æ£€æŸ¥ (--no-verify)"},null,8,["modelValue"])])])]),P.value?(f(),_("div",_o,[e("div",wo,[e("div",ko,[s(ps,{modelValue:ge.value,"onUpdate:modelValue":t[3]||(t[3]=w=>ge.value=w),placeholder:"æäº¤ç±»å‹",class:"type-select",clearable:""},{default:a(()=>[(f(),_($e,null,Le(K,w=>s(fs,{key:w.value,label:w.label,value:w.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e("div",$o,[s(qt,{modelValue:U.value,"onUpdate:modelValue":t[4]||(t[4]=w=>U.value=w),"fetch-suggestions":ea,placeholder:"ä½œç”¨åŸŸï¼ˆå¯é€‰ï¼‰",class:"scope-input",clearable:"",onSelect:sa},null,8,["modelValue"])])]),e("div",bo,[s(qt,{modelValue:Z.value,"onUpdate:modelValue":t[5]||(t[5]=w=>Z.value=w),"fetch-suggestions":Qs,placeholder:"ç®€çŸ­æè¿°ï¼ˆå¿…å¡«ï¼‰",class:"description-input",clearable:"",onSelect:ta},null,8,["modelValue"])])]),e("div",{class:"advanced-options-toggle",onClick:t[6]||(t[6]=w=>v.value=!v.value)},[e("span",null,L(v.value?"æ”¶èµ·":"æ­£æ–‡åŠé¡µè„š"),1),s(ae,{class:he(["toggle-icon",{"is-active":v.value}])},{default:a(()=>[s(o(mt))]),_:1},8,["class"])]),Me(e("div",Co,[s(tt,{modelValue:Q.value,"onUpdate:modelValue":t[7]||(t[7]=w=>Q.value=w),type:"textarea",rows:4,placeholder:"æ­£æ–‡ï¼ˆå¯é€‰ï¼‰ï¼šè¯¦ç»†æè¿°æœ¬æ¬¡æäº¤çš„å†…å®¹å’ŒåŸå› ",class:"body-input",clearable:""},null,8,["modelValue"]),s(tt,{modelValue:ie.value,"onUpdate:modelValue":t[8]||(t[8]=w=>ie.value=w),placeholder:"é¡µè„šï¼ˆå¯é€‰ï¼‰ï¼šå¦‚ Closes #123",class:"footer-input",clearable:""},null,8,["modelValue"])],512),[[ft,v.value]]),e("div",So,[t[45]||(t[45]=e("div",{class:"preview-title"},"Gitæäº¤å‘½ä»¤é¢„è§ˆï¼š",-1)),e("pre",To,L(ot.value),1)]),e("div",xo,[e("div",Vo,[e("div",Lo,[e("div",zo,[s(T,{type:"primary",onClick:kt,loading:o(d).isAddingFiles,disabled:!$t.value,class:"stage-button"},{default:a(()=>[t[46]||(t[46]=y(" æš‚å­˜æ›´æ”¹ ")),rt.value>0?(f(),_("span",Bo,"("+L(rt.value)+")",1)):O("",!0)]),_:1},8,["loading","disabled"]),s(T,{type:"primary",onClick:Ht,loading:o(d).isLoadingStatus,disabled:!pt.value||!A.value.trim()},{default:a(()=>[t[47]||(t[47]=y(" æäº¤ ")),Je.value>0?(f(),_("span",Do,"("+L(Je.value)+")",1)):O("",!0)]),_:1},8,["loading","disabled"]),s(xe,{content:et.value?"æ¨é€å·²æäº¤çš„æ›´æ”¹åˆ°è¿œç¨‹ä»“åº“":o(d).hasUpstream?Qe.value?"æœ‰æœªæäº¤çš„æš‚å­˜æ›´æ”¹ï¼Œè¯·å…ˆæäº¤":"æ²¡æœ‰éœ€è¦æ¨é€çš„æäº¤":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯",placement:"top"},{default:a(()=>[s(T,{type:"primary",icon:o(Zt),onClick:It,loading:o(d).isPushing,disabled:!et.value,style:xt(et.value?{backgroundColor:"#67c23a",borderColor:"#67c23a"}:{})},{default:a(()=>[t[48]||(t[48]=y(" æ¨é€ ")),Qe.value?(f(),_("span",Fo,"("+L(o(d).branchAhead)+")",1)):O("",!0)]),_:1},8,["icon","loading","disabled","style"])]),_:1},8,["content"])])]),e("div",Ro,[s(xe,{content:ct.value?A.value.trim()?o(d).hasUpstream?"ä¸€é”®å®Œæˆï¼šæš‚å­˜æ‰€æœ‰æ›´æ”¹ â†’ æäº¤ â†’ æ¨é€åˆ°è¿œç¨‹ä»“åº“":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯":"è¯·è¾“å…¥æäº¤ä¿¡æ¯":"æ²¡æœ‰éœ€è¦æäº¤çš„æ›´æ”¹",placement:"top"},{default:a(()=>[s(T,{type:"success",onClick:Nt,loading:o(d).isAddingFiles||o(d).isCommiting||o(d).isPushing,disabled:!ct.value||!A.value.trim()||!o(d).hasUpstream,class:"one-push-button"},{default:a(()=>[e("div",Go,[s(ae,{class:"one-push-icon"},{default:a(()=>[s(o(Qt))]),_:1}),t[49]||(t[49]=e("div",{class:"one-push-text"},[e("span",{class:"one-push-title"},"ä¸€é”®æ¨é€æ‰€æœ‰"),e("span",{class:"one-push-desc"},"æš‚å­˜ + æäº¤ + æ¨é€")],-1))])]),_:1},8,["loading","disabled"])]),_:1},8,["content"])])])])])):(f(),_("div",oo,[e("div",no,[s(qt,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=w=>p.value=w),"fetch-suggestions":aa,placeholder:R.value,type:"textarea",rows:6,resize:"none",class:"commit-message-input",onSelect:la},null,8,["modelValue","placeholder"])]),e("div",io,[t[40]||(t[40]=e("div",{class:"preview-title"},"Gitæäº¤å‘½ä»¤é¢„è§ˆï¼š",-1)),e("pre",ro,'git commit -m "'+L(A.value||"<æäº¤ä¿¡æ¯>")+'"'+L(b.value?" --no-verify":""),1)]),e("div",co,[e("div",uo,[e("div",fo,[e("div",po,[s(T,{type:"primary",onClick:kt,loading:o(d).isAddingFiles,disabled:!$t.value,class:"stage-button"},{default:a(()=>[t[41]||(t[41]=y(" æš‚å­˜æ›´æ”¹ ")),rt.value>0?(f(),_("span",vo,"("+L(rt.value)+")",1)):O("",!0)]),_:1},8,["loading","disabled"]),s(T,{type:"primary",onClick:Ht,loading:o(d).isLoadingStatus,disabled:!pt.value||!A.value.trim()},{default:a(()=>[t[42]||(t[42]=y(" æäº¤ ")),Je.value>0?(f(),_("span",mo,"("+L(Je.value)+")",1)):O("",!0)]),_:1},8,["loading","disabled"]),s(xe,{content:et.value?"æ¨é€å·²æäº¤çš„æ›´æ”¹åˆ°è¿œç¨‹ä»“åº“":o(d).hasUpstream?Qe.value?"æœ‰æœªæäº¤çš„æš‚å­˜æ›´æ”¹ï¼Œè¯·å…ˆæäº¤":"æ²¡æœ‰éœ€è¦æ¨é€çš„æäº¤":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯",placement:"top"},{default:a(()=>[s(T,{type:"primary",icon:o(Zt),onClick:It,loading:o(d).isPushing,disabled:!et.value,style:xt(et.value?{backgroundColor:"#67c23a",borderColor:"#67c23a"}:{})},{default:a(()=>[t[43]||(t[43]=y(" æ¨é€ ")),Qe.value?(f(),_("span",go,"("+L(o(d).branchAhead)+")",1)):O("",!0)]),_:1},8,["icon","loading","disabled","style"])]),_:1},8,["content"])])]),e("div",ho,[s(xe,{content:ct.value?A.value.trim()?o(d).hasUpstream?"ä¸€é”®å®Œæˆï¼šæš‚å­˜æ‰€æœ‰æ›´æ”¹ â†’ æäº¤ â†’ æ¨é€åˆ°è¿œç¨‹ä»“åº“":"å½“å‰åˆ†æ”¯æ²¡æœ‰ä¸Šæ¸¸åˆ†æ”¯":"è¯·è¾“å…¥æäº¤ä¿¡æ¯":"æ²¡æœ‰éœ€è¦æäº¤çš„æ›´æ”¹",placement:"top"},{default:a(()=>[s(T,{type:"success",onClick:Nt,loading:o(d).isAddingFiles||o(d).isCommiting||o(d).isPushing,disabled:!ct.value||!A.value.trim()||!o(d).hasUpstream,class:"one-push-button"},{default:a(()=>[e("div",yo,[s(ae,{class:"one-push-icon"},{default:a(()=>[s(o(Qt))]),_:1}),t[44]||(t[44]=e("div",{class:"one-push-text"},[e("span",{class:"one-push-title"},"ä¸€é”®æ¨é€æ‰€æœ‰"),e("span",{class:"one-push-desc"},"æš‚å­˜ + æäº¤ + æ¨é€")],-1))])]),_:1},8,["loading","disabled"])]),_:1},8,["content"])])])])]))]))])])],2),s(oa,{modelValue:At.value,"onUpdate:modelValue":t[9]||(t[9]=w=>At.value=w),title:"Git æ“ä½œ",direction:"rtl",size:"340px","with-header":!0,"show-close":!0,"destroy-on-close":!1,class:"git-operations-drawer"},{default:a(()=>[e("div",jo,[e("div",Ao,[e("div",Uo,[e("div",Oo,[t[55]||(t[55]=e("div",{class:"group-title"},"åŸºç¡€æ“ä½œ",-1)),e("div",Eo,[s(xe,{content:$t.value?`æš‚å­˜${rt.value}ä¸ªå¾…æ›´æ”¹æ–‡ä»¶`:"git add .",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"primary",onClick:kt,loading:o(d).isAddingFiles,disabled:!$t.value,class:"action-button"},{default:a(()=>[t[50]||(t[50]=y(" æš‚å­˜æ›´æ”¹ ")),rt.value>0?(f(),_("span",Mo,"("+L(rt.value)+")",1)):O("",!0)]),_:1},8,["loading","disabled"])]),_:1},8,["content"]),s(xe,{content:pt.value?`æäº¤${Je.value}ä¸ªå·²æš‚å­˜æ–‡ä»¶`:"git commit",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"primary",onClick:Ht,loading:o(d).isLoadingStatus,disabled:!pt.value||!A.value.trim(),class:"action-button"},{default:a(()=>[t[51]||(t[51]=y(" æäº¤ ")),Je.value>0?(f(),_("span",Po,"("+L(Je.value)+")",1)):O("",!0)]),_:1},8,["loading","disabled"])]),_:1},8,["content"]),s(xe,{content:Qe.value?`æ¨é€${o(d).branchAhead}ä¸ªæœ¬åœ°æäº¤`:"git push",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"primary",icon:o(Zt),onClick:It,loading:o(d).isPushing,disabled:!et.value,class:he(["action-button","push-button",{"is-loading":o(d).isPushing}]),style:xt(et.value?{backgroundColor:"#67c23a",borderColor:"#67c23a"}:{})},{default:a(()=>[t[52]||(t[52]=y(" æ¨é€ ")),Qe.value?(f(),_("span",Ho,"("+L(o(d).branchAhead)+")",1)):O("",!0)]),_:1},8,["icon","loading","disabled","class","style"])]),_:1},8,["content"]),s(xe,{content:Wt.value?`æ‹‰å–${o(d).branchBehind}ä¸ªè¿œç¨‹æäº¤`:"git pull",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"primary",icon:o(Ts),onClick:js,loading:o(d).isGitPulling,disabled:!o(d).hasUpstream,class:"action-button",style:xt(o(d).hasUpstream?{color:"white",backgroundColor:"#1e90ff",borderColor:"#1e90ff"}:{})},{default:a(()=>[t[53]||(t[53]=y(" æ‹‰å– ")),Wt.value?(f(),_("span",Io,"("+L(o(d).branchBehind)+")",1)):O("",!0)]),_:1},8,["icon","loading","disabled","style"])]),_:1},8,["content"]),s(xe,{content:"git fetch --all",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"info",icon:o(xs),onClick:As,loading:o(d).isGitFetching,class:"action-button",style:{color:"white","background-color":"#1e90ff","border-color":"#1e90ff"}},{default:a(()=>t[54]||(t[54]=[y(" è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯ ")])),_:1},8,["icon","loading"])]),_:1})])]),e("div",No,[t[58]||(t[58]=e("div",{class:"group-title"},"ç»„åˆæ“ä½œ",-1)),e("div",Jo,[s(xe,{content:"git add + git commit",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"primary",icon:o(St),onClick:Us,loading:o(d).isAddingFiles||o(d).isCommiting,disabled:!$t.value||!A.value.trim(),class:"action-button"},{default:a(()=>t[56]||(t[56]=[y(" æš‚å­˜å¹¶æäº¤ ")])),_:1},8,["icon","loading","disabled"])]),_:1}),s(xe,{content:"git add + git commit + git push",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"success",icon:o(Qt),onClick:Nt,loading:o(d).isAddingFiles||o(d).isCommiting||o(d).isPushing,disabled:!ct.value||!A.value.trim()||!o(d).hasUpstream,class:he(["action-button","one-click-push",{"is-loading":o(d).isAddingFiles||o(d).isCommiting||o(d).isPushing}])},{default:a(()=>t[57]||(t[57]=[y(" ä¸€é”®æ¨é€æ‰€æœ‰ ")])),_:1},8,["icon","loading","disabled","class"])]),_:1})])])]),e("div",Wo,[t[61]||(t[61]=e("div",{class:"group-title"},"é‡ç½®æ“ä½œ",-1)),e("div",qo,[s(xe,{content:us.value?`æ’¤é”€${Je.value}ä¸ªå·²æš‚å­˜æ–‡ä»¶`:"git reset HEAD",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"warning",icon:o(os),onClick:o(d).resetHead,loading:o(d).isResetting,disabled:!us.value,class:"action-button reset-button"},{default:a(()=>[t[59]||(t[59]=y(" é‡ç½®æš‚å­˜åŒº ")),Je.value>0?(f(),_("span",Yo,"("+L(Je.value)+")",1)):O("",!0)]),_:1},8,["icon","onClick","loading","disabled"])]),_:1},8,["content"]),s(xe,{content:"git reset --hard origin/branch",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"danger",icon:o(zs),onClick:Os,loading:o(d).isResetting,disabled:!Ps.value,class:"action-button danger-button"},{default:a(()=>t[60]||(t[60]=[y(" é‡ç½®åˆ°è¿œç¨‹ ")])),_:1},8,["icon","loading","disabled"])]),_:1})])]),e("div",Xo,[t[63]||(t[63]=e("div",{class:"group-title"},"åˆ†æ”¯æ“ä½œ",-1)),e("div",Ko,[s(xe,{content:"åˆå¹¶å…¶ä»–åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"primary",icon:o(ma),onClick:Ys,loading:o(d).isGitMerging,class:"action-button merge-button"},{default:a(()=>t[62]||(t[62]=[y(" åˆå¹¶åˆ†æ”¯ ")])),_:1},8,["icon","loading"])]),_:1})])]),e("div",Zo,[t[66]||(t[66]=e("div",{class:"group-title"},"å‚¨è—æ“ä½œ",-1)),e("div",Qo,[s(xe,{content:"å°†å·¥ä½œåŒºæ›´æ”¹å‚¨è—èµ·æ¥",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"warning",onClick:Ie,loading:o(d).isSavingStash,disabled:!ct.value,class:"action-button"},{default:a(()=>t[64]||(t[64]=[y(" å‚¨è—æ›´æ”¹ ")])),_:1},8,["loading","disabled"])]),_:1}),s(xe,{content:"æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰å‚¨è—è®°å½•",placement:"top",effect:"light","popper-class":"git-cmd-tooltip"},{default:a(()=>[s(T,{type:"info",onClick:c,class:"action-button"},{default:a(()=>t[65]||(t[65]=[y(" å‚¨è—åˆ—è¡¨ ")])),_:1})]),_:1})])])])])]),_:1},8,["modelValue"]),s(st,{class:"config-editor-dialog",title:"ç¼–è¾‘é…ç½® JSON",modelValue:re.value,"onUpdate:modelValue":t[12]||(t[12]=w=>re.value=w),width:"60%"},{footer:a(()=>[e("span",en,[s(T,{onClick:C},{default:a(()=>t[67]||(t[67]=[y("æ‰“å¼€ç³»ç»Ÿé…ç½®æ–‡ä»¶")])),_:1}),s(T,{onClick:t[11]||(t[11]=w=>re.value=!1)},{default:a(()=>t[68]||(t[68]=[y("å–æ¶ˆ")])),_:1}),s(T,{type:"primary",loading:pe.value,onClick:Ne},{default:a(()=>t[69]||(t[69]=[y("ä¿å­˜")])),_:1},8,["loading"])])]),default:a(()=>[s(tt,{modelValue:_e.value,"onUpdate:modelValue":t[10]||(t[10]=w=>_e.value=w),type:"textarea",rows:18,spellcheck:"false",autocomplete:"off",placeholder:"åœ¨æ­¤ç¼–è¾‘å½“å‰é¡¹ç›®é…ç½®çš„ JSON"},null,8,["modelValue"])]),_:1},8,["modelValue"]),s(st,{title:"ç®€çŸ­æè¿°æ¨¡æ¿è®¾ç½®",modelValue:z.value,"onUpdate:modelValue":t[14]||(t[14]=w=>z.value=w),width:"80vw",top:"70px",style:{height:"calc(100vh - 140px)"},"close-on-click-modal":!1,class:"template-dialog"},{default:a(()=>[e("div",tn,[e("div",sn,[s(tt,{modelValue:B.value,"onUpdate:modelValue":t[13]||(t[13]=w=>B.value=w),placeholder:W.value?"ç¼–è¾‘æ¨¡æ¿å†…å®¹":"è¾“å…¥æ–°æ¨¡æ¿å†…å®¹",class:"template-input",clearable:""},null,8,["modelValue","placeholder"]),e("div",an,[W.value?(f(),J(T,{key:0,onClick:He},{default:a(()=>t[70]||(t[70]=[y("å–æ¶ˆ")])),_:1})):O("",!0),s(T,{type:"primary",onClick:Ze,disabled:!B.value.trim()},{default:a(()=>[y(L(W.value?"æ›´æ–°æ¨¡æ¿":"æ·»åŠ æ¨¡æ¿"),1)]),_:1},8,["disabled"])])]),e("div",ln,[t[74]||(t[74]=e("h3",null,"å·²ä¿å­˜æ¨¡æ¿",-1)),S.value.length===0?(f(),J(bt,{key:0,description:"æš‚æ— ä¿å­˜çš„æ¨¡æ¿"})):O("",!0),(f(!0),_($e,null,Le(S.value,(w,Ee)=>(f(),J(Ut,{key:Ee,class:"template-item"},{default:a(()=>[s(Yt,{justify:"space-between",align:"middle",style:{width:"100%"}},{default:a(()=>[e("div",on,L(w),1),e("div",nn,[s(T,{type:"primary",size:"small",onClick:at=>de(w)},{default:a(()=>t[71]||(t[71]=[y("ä½¿ç”¨")])),_:2},1032,["onClick"]),s(T,{type:"warning",size:"small",icon:o(St),onClick:at=>it(w,Ee)},{default:a(()=>t[72]||(t[72]=[y("ç¼–è¾‘")])),_:2},1032,["icon","onClick"]),s(T,{type:"danger",size:"small",onClick:at=>$(w)},{default:a(()=>t[73]||(t[73]=[y("åˆ é™¤")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])])]),_:1},8,["modelValue"]),s(st,{title:"ä½œç”¨åŸŸæ¨¡æ¿è®¾ç½®",modelValue:q.value,"onUpdate:modelValue":t[16]||(t[16]=w=>q.value=w),width:"80vw",top:"70px",style:{height:"calc(100vh - 140px)"},"close-on-click-modal":!1,class:"template-dialog"},{default:a(()=>[e("div",rn,[e("div",cn,[s(tt,{modelValue:se.value,"onUpdate:modelValue":t[15]||(t[15]=w=>se.value=w),placeholder:Y.value?"ç¼–è¾‘ä½œç”¨åŸŸæ¨¡æ¿å†…å®¹":"è¾“å…¥æ–°ä½œç”¨åŸŸæ¨¡æ¿",class:"template-input",clearable:""},null,8,["modelValue","placeholder"]),e("div",un,[Y.value?(f(),J(T,{key:0,onClick:m},{default:a(()=>t[75]||(t[75]=[y("å–æ¶ˆ")])),_:1})):O("",!0),s(T,{type:"primary",onClick:wt,disabled:!se.value.trim()},{default:a(()=>[y(L(Y.value?"æ›´æ–°æ¨¡æ¿":"æ·»åŠ æ¨¡æ¿"),1)]),_:1},8,["disabled"])])]),e("div",dn,[t[79]||(t[79]=e("h3",null,"å·²ä¿å­˜ä½œç”¨åŸŸ",-1)),x.value.length===0?(f(),J(bt,{key:0,description:"æš‚æ— ä¿å­˜çš„ä½œç”¨åŸŸ"})):O("",!0),(f(!0),_($e,null,Le(x.value,(w,Ee)=>(f(),J(Ut,{key:Ee,class:"template-item"},{default:a(()=>[s(Yt,{justify:"space-between",align:"middle",style:{width:"100%"}},{default:a(()=>[e("div",fn,L(w),1),e("div",pn,[s(T,{type:"primary",size:"small",onClick:at=>Te(w)},{default:a(()=>t[76]||(t[76]=[y("ä½¿ç”¨")])),_:2},1032,["onClick"]),s(T,{type:"warning",size:"small",icon:o(St),onClick:at=>l(w,Ee)},{default:a(()=>t[77]||(t[77]=[y("ç¼–è¾‘")])),_:2},1032,["icon","onClick"]),s(T,{type:"danger",size:"small",onClick:at=>le(w)},{default:a(()=>t[78]||(t[78]=[y("åˆ é™¤")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])])]),_:1},8,["modelValue"]),s(st,{title:"é»˜è®¤æäº¤ä¿¡æ¯è®¾ç½®",modelValue:Ce.value,"onUpdate:modelValue":t[18]||(t[18]=w=>Ce.value=w),width:"80vw",top:"70px",style:{height:"calc(100vh - 140px)"},"close-on-click-modal":!1,class:"message-template-dialog"},{default:a(()=>[e("div",vn,[e("div",mn,[s(tt,{modelValue:G.value,"onUpdate:modelValue":t[17]||(t[17]=w=>G.value=w),placeholder:me.value?"ç¼–è¾‘æ¨¡æ¿å†…å®¹":"è¾“å…¥æ–°æ¨¡æ¿å†…å®¹",class:"template-input",clearable:""},null,8,["modelValue","placeholder"]),e("div",gn,[me.value?(f(),J(T,{key:0,onClick:Js},{default:a(()=>t[80]||(t[80]=[y("å–æ¶ˆ")])),_:1})):O("",!0),s(T,{type:"primary",onClick:Hs,disabled:!G.value.trim()},{default:a(()=>[y(L(me.value?"æ›´æ–°æ¨¡æ¿":"æ·»åŠ æ¨¡æ¿"),1)]),_:1},8,["disabled"]),s(T,{type:"success",onClick:Ms,disabled:!G.value.trim()},{default:a(()=>t[81]||(t[81]=[y(" è®¾ä¸ºé»˜è®¤æäº¤ä¿¡æ¯ ")])),_:1},8,["disabled"])])]),e("div",hn,[e("div",yn,[t[85]||(t[85]=e("h3",null,"å·²ä¿å­˜æ¨¡æ¿",-1)),e("div",_n,[ue.value.length===0?(f(),J(bt,{key:0,description:"æš‚æ— ä¿å­˜çš„æ¨¡æ¿"})):O("",!0),(f(!0),_($e,null,Le(ue.value,(w,Ee)=>(f(),J(Ut,{key:Ee,class:"template-item"},{default:a(()=>[s(Yt,{justify:"space-between",align:"middle",style:{width:"100%"}},{default:a(()=>[e("div",wn,L(w),1),e("div",kn,[s(T,{type:"primary",size:"small",onClick:at=>qs(w)},{default:a(()=>t[82]||(t[82]=[y("ä½¿ç”¨")])),_:2},1032,["onClick"]),s(T,{type:"warning",size:"small",icon:o(St),onClick:at=>Ns(w,Ee)},{default:a(()=>t[83]||(t[83]=[y("ç¼–è¾‘")])),_:2},1032,["icon","onClick"]),s(T,{type:"danger",size:"small",onClick:at=>Ws(w)},{default:a(()=>t[84]||(t[84]=[y("åˆ é™¤")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))])]),e("div",$n,[t[93]||(t[93]=e("h3",null,"å½“å‰é»˜è®¤æäº¤ä¿¡æ¯",-1)),E.value?(f(),J(Ut,{key:0,class:"default-message-card"},{default:a(()=>[e("div",bn,L(E.value),1)]),_:1})):(f(),J(bt,{key:1,description:"å°šæœªè®¾ç½®é»˜è®¤æäº¤ä¿¡æ¯","image-size":100})),e("div",Cn,[t[91]||(t[91]=e("h4",null,"å…³äºé»˜è®¤æäº¤ä¿¡æ¯",-1)),t[92]||(t[92]=e("p",null,"é»˜è®¤æäº¤ä¿¡æ¯å°†åœ¨æœªè¾“å…¥æäº¤ä¿¡æ¯æ—¶è‡ªåŠ¨ä½¿ç”¨ã€‚",-1)),e("p",null,[t[88]||(t[88]=y("ä½ å¯ä»¥é€šè¿‡ç‚¹å‡»å·¦ä¾§æ¨¡æ¿çš„")),s(vs,{size:"small",type:"primary"},{default:a(()=>t[86]||(t[86]=[y("ä½¿ç”¨")])),_:1}),t[89]||(t[89]=y("æŒ‰é’®å…ˆé€‰æ‹©å–œæ¬¢çš„æ¨¡æ¿ï¼Œç„¶åç‚¹å‡»ä¸Šæ–¹")),s(vs,{size:"small",type:"success"},{default:a(()=>t[87]||(t[87]=[y("è®¾ä¸ºé»˜è®¤æäº¤ä¿¡æ¯")])),_:1}),t[90]||(t[90]=y("æŒ‰é’®ä¿å­˜ã€‚"))])])])])])]),_:1},8,["modelValue"]),s(st,{title:"å‚¨è—æ›´æ”¹ (Git Stash)",modelValue:D.value,"onUpdate:modelValue":t[23]||(t[23]=w=>D.value=w),width:"500px","close-on-click-modal":!1},{footer:a(()=>[e("div",Tn,[s(T,{onClick:t[22]||(t[22]=w=>D.value=!1)},{default:a(()=>t[97]||(t[97]=[y("å–æ¶ˆ")])),_:1}),s(T,{type:"primary",onClick:X,loading:o(d).isSavingStash},{default:a(()=>t[98]||(t[98]=[y(" å‚¨è— ")])),_:1},8,["loading"])])]),default:a(()=>[e("div",Sn,[t[96]||(t[96]=e("p",null,"å°†å½“å‰å·¥ä½œåŒºçš„æ›´æ”¹å‚¨è—èµ·æ¥ï¼Œç¨åå¯ä»¥å†æ¬¡åº”ç”¨ã€‚",-1)),s(ms,{"label-position":"top"},{default:a(()=>[s(ut,{label:"å‚¨è—è¯´æ˜ (å¯é€‰)"},{default:a(()=>[s(tt,{modelValue:te.value,"onUpdate:modelValue":t[19]||(t[19]=w=>te.value=w),placeholder:"è¾“å…¥å‚¨è—è¯´æ˜ï¼ˆå¯é€‰ï¼‰",clearable:""},null,8,["modelValue"])]),_:1}),s(ut,null,{default:a(()=>[s(Ct,{modelValue:ze.value,"onUpdate:modelValue":t[20]||(t[20]=w=>ze.value=w)},{default:a(()=>t[94]||(t[94]=[y(" åŒ…å«æœªè·Ÿè¸ªæ–‡ä»¶ (--include-untracked) ")])),_:1},8,["modelValue"])]),_:1}),s(ut,null,{default:a(()=>[s(Ct,{modelValue:De.value,"onUpdate:modelValue":t[21]||(t[21]=w=>De.value=w)},{default:a(()=>t[95]||(t[95]=[y(" æ’é™¤é”å®šæ–‡ä»¶ ")])),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"]),s(st,{title:"åˆå¹¶åˆ†æ”¯",modelValue:we.value,"onUpdate:modelValue":t[31]||(t[31]=w=>we.value=w),width:"500px","close-on-click-modal":!1,class:"merge-dialog"},{footer:a(()=>[e("div",zn,[s(T,{onClick:t[30]||(t[30]=w=>we.value=!1)},{default:a(()=>t[105]||(t[105]=[y("å–æ¶ˆ")])),_:1}),s(T,{type:"primary",onClick:Ks,loading:o(d).isGitMerging,disabled:!ce.value,class:"merge-confirm-btn"},{default:a(()=>t[106]||(t[106]=[y(" åˆå¹¶ ")])),_:1},8,["loading","disabled"])])]),default:a(()=>[e("div",xn,[e("p",Vn,"é€‰æ‹©è¦åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ ("+L(o(d).currentBranch)+") çš„åˆ†æ”¯:",1),s(ms,{"label-position":"top"},{default:a(()=>[s(ut,{label:"åˆ†æ”¯ç±»å‹"},{default:a(()=>[s(na,{modelValue:vt.value,"onUpdate:modelValue":t[24]||(t[24]=w=>vt.value=w),size:"small"},{default:a(()=>[s(Xt,{label:"all"},{default:a(()=>t[99]||(t[99]=[y("æ‰€æœ‰åˆ†æ”¯")])),_:1}),s(Xt,{label:"local"},{default:a(()=>t[100]||(t[100]=[y("æœ¬åœ°åˆ†æ”¯")])),_:1}),s(Xt,{label:"remote"},{default:a(()=>t[101]||(t[101]=[y("è¿œç¨‹åˆ†æ”¯")])),_:1})]),_:1},8,["modelValue"])]),_:1}),s(ut,{label:"é€‰æ‹©åˆ†æ”¯"},{default:a(()=>[s(ps,{modelValue:ce.value,"onUpdate:modelValue":t[25]||(t[25]=w=>ce.value=w),placeholder:"é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯",style:{width:"100%"},filterable:""},{default:a(()=>[(f(!0),_($e,null,Le(Xs.value,w=>(f(),J(fs,{key:w,label:w,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(ut,{label:"åˆå¹¶é€‰é¡¹"},{default:a(()=>[e("div",Ln,[s(Ct,{modelValue:V.value.noFf,"onUpdate:modelValue":t[26]||(t[26]=w=>V.value.noFf=w)},{default:a(()=>[s(xe,{content:"åˆ›å»ºåˆå¹¶æäº¤ï¼Œå³ä½¿å¯ä»¥ä½¿ç”¨å¿«è¿›åˆå¹¶",placement:"top"},{default:a(()=>t[102]||(t[102]=[e("span",null,"ç¦ç”¨å¿«è¿›åˆå¹¶ (--no-ff)",-1)])),_:1})]),_:1},8,["modelValue"]),s(Ct,{modelValue:V.value.squash,"onUpdate:modelValue":t[27]||(t[27]=w=>V.value.squash=w)},{default:a(()=>[s(xe,{content:"å°†å¤šä¸ªæäº¤å‹ç¼©ä¸ºä¸€ä¸ªæäº¤",placement:"top"},{default:a(()=>t[103]||(t[103]=[e("span",null,"å‹ç¼©æäº¤ (--squash)",-1)])),_:1})]),_:1},8,["modelValue"]),s(Ct,{modelValue:V.value.noCommit,"onUpdate:modelValue":t[28]||(t[28]=w=>V.value.noCommit=w)},{default:a(()=>[s(xe,{content:"æ‰§è¡Œåˆå¹¶ä½†ä¸è‡ªåŠ¨åˆ›å»ºæäº¤",placement:"top"},{default:a(()=>t[104]||(t[104]=[e("span",null,"ä¸è‡ªåŠ¨æäº¤ (--no-commit)",-1)])),_:1})]),_:1},8,["modelValue"])])]),_:1}),V.value.noFf&&!V.value.noCommit?(f(),J(ut,{key:0,label:"åˆå¹¶æäº¤ä¿¡æ¯ (å¯é€‰)"},{default:a(()=>[s(tt,{modelValue:V.value.message,"onUpdate:modelValue":t[29]||(t[29]=w=>V.value.message=w),type:"textarea",rows:3,placeholder:"è¾“å…¥è‡ªå®šä¹‰åˆå¹¶æäº¤ä¿¡æ¯"},null,8,["modelValue"])]),_:1})):O("",!0)]),_:1})])]),_:1},8,["modelValue"]),s(st,{title:"å‚¨è—åˆ—è¡¨ (Git Stash)",modelValue:I.value,"onUpdate:modelValue":t[32]||(t[32]=w=>I.value=w),width:"600px","close-on-click-modal":!1},{default:a(()=>[e("div",Bn,[Me((f(),J(ia,{data:o(d).stashes,stripe:"",style:{width:"100%"},"empty-text":"æš‚æ— å‚¨è—è®°å½•"},{default:a(()=>[s(Kt,{prop:"id",label:"ID",width:"100"}),s(Kt,{prop:"description",label:"æè¿°"}),s(Kt,{label:"æ“ä½œ",width:"280"},{default:a(w=>[e("div",Dn,[s(T,{size:"small",type:"info",onClick:Ee=>ve(w.row),loading:Ae.value},{default:a(()=>t[107]||(t[107]=[y(" æŸ¥çœ‹ ")])),_:2},1032,["onClick","loading"]),s(T,{size:"small",onClick:Ee=>H(w.row.id,!1),loading:o(d).isApplyingStash},{default:a(()=>t[108]||(t[108]=[y(" åº”ç”¨ ")])),_:2},1032,["onClick","loading"]),s(T,{size:"small",type:"primary",onClick:Ee=>H(w.row.id,!0),loading:o(d).isApplyingStash},{default:a(()=>t[109]||(t[109]=[y(" åº”ç”¨å¹¶åˆ é™¤ ")])),_:2},1032,["onClick","loading"]),s(T,{size:"small",type:"danger",onClick:Ee=>Se(w.row.id),loading:o(d).isDroppingStash},{default:a(()=>t[110]||(t[110]=[y(" åˆ é™¤ ")])),_:2},1032,["onClick","loading"])])]),_:1})]),_:1},8,["data"])),[[gs,o(d).isLoadingStashes]]),o(d).stashes.length>0?(f(),_("div",Fn,[s(T,{type:"danger",onClick:Ve,loading:o(d).isDroppingStash},{default:a(()=>t[111]||(t[111]=[y(" æ¸…ç©ºæ‰€æœ‰å‚¨è— ")])),_:1},8,["loading"])])):O("",!0)])]),_:1},8,["modelValue"]),s(st,{title:"å‚¨è—è¯¦æƒ…",modelValue:Fe.value,"onUpdate:modelValue":t[34]||(t[34]=w=>Fe.value=w),width:"90%",top:"50px",style:{height:"calc(100vh - 100px)"},"close-on-click-modal":!1,class:"stash-detail-dialog use-flex-body"},{footer:a(()=>[e("div",Wn,[s(T,{onClick:t[33]||(t[33]=w=>Fe.value=!1)},{default:a(()=>t[114]||(t[114]=[y("å…³é—­")])),_:1})])]),default:a(()=>[be.value?(f(),_("div",Rn,[e("div",Gn,[e("h3",null,L(be.value.id),1),e("p",jn,L(be.value.description),1)])])):O("",!0),e("div",An,[e("div",Un,[t[112]||(t[112]=e("div",{class:"panel-header"},[e("h4",null,"æ–‡ä»¶åˆ—è¡¨")],-1)),e("div",On,[s(ra,{height:"100%"},{default:a(()=>[(f(!0),_($e,null,Le(h.value,w=>(f(),_("div",{key:w,class:he(["file-item",{active:Ue.value===w}]),onClick:Ee=>ke(be.value.id,w)},[e("span",Mn,L(w),1)],10,En))),128))]),_:1})])]),e("div",Pn,[e("div",Hn,[t[113]||(t[113]=e("h4",null,"æ–‡ä»¶å·®å¼‚",-1)),Ue.value?(f(),_("span",In,L(Ue.value),1)):O("",!0)]),Me((f(),_("div",Nn,[oe.value?(f(),_("div",{key:0,class:"diff-text",innerHTML:Re(oe.value)},null,8,Jn)):Ae.value?O("",!0):(f(),J(bt,{key:1,description:"è¯·é€‰æ‹©æ–‡ä»¶æŸ¥çœ‹å·®å¼‚","image-size":80}))])),[[gs,Ae.value]])])])]),_:1},8,["modelValue"])],64)}}}),Yn=Rt(qn,[["__scopeId","data-v-ef9ad372"]]),Xn={class:"log-header"},Kn={class:"log-actions"},Zn={key:0,class:"filter-panel-header"},Qn={class:"filter-form"},ei={class:"filter-item"},ti={class:"filter-item"},si={class:"filter-item"},ai={class:"filter-item"},li={class:"filter-actions"},oi={key:0},ni={key:1,class:"content-area-content"},ii={key:0,class:"graph-view"},ri={key:0,class:"commit-count"},ci={class:"graph-controls"},ui={class:"zoom-controls"},di={class:"scale-info"},fi={key:1,class:"table-view-container"},pi=["onClick"],vi={class:"commit-message-cell"},mi={class:"message-content"},gi={key:0,class:"branch-container"},hi={class:"message-text"},yi={class:"author-name"};const _i={class:"commit-detail-container"},wi={key:0,class:"commit-info"},ki={class:"commit-info-header"},$i={class:"info-item"},bi={class:"item-value"},Ci={class:"info-item"},Si={class:"item-value"},Ti={class:"info-item"},xi={class:"item-value"},Vi={class:"commit-message-container"},Li=["innerHTML"],zi={class:"commit-files-diff"},Bi={class:"files-list"},Di={key:1},Fi=["onClick"],Ri={class:"file-diff"},Gi={key:0},ji={key:1},Ai=["innerHTML"],Tt=.5,Et=1.5,ts=.1,Ui=zt({__name:"LogList",setup(ye,{expose:d}){const k=ht();let p=[];const g=u(p),M=u(""),R=u(!1),E=Be(()=>k.isLoadingLog||R.value),P=u(!1),ge=u(0),U=u(!1),Z=u(null),Q=u(1),ie=u(!0),re=u(!1),_e=u(null),pe=u(!1),S=u(null),z=u([]),B=u(""),W=u(!1),F=u(""),N=u(1),we=u(!1),ce=u(!1),V=u([]),x=u(""),q=u(null),se=u([]),Y=u([]),ne=u([]),ee=u(!1),Ce=u(0),G=u(0),b=u(null),v=Be(()=>g.value);async function K(i=!1,l=1){if(!ht().isGitRepo){M.value="å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“";return}try{l>1?re.value=!0:R.value=!0;const $=new URLSearchParams;$.append("page",l.toString()),$.append("all",i.toString()),$.append("with_parents","true"),V.value.length>0&&$.append("author",V.value.join(",")),Y.value.length>0&&$.append("branch",Y.value.join(",")),x.value&&$.append("message",x.value),q.value&&Array.isArray(q.value)&&q.value.length===2&&($.append("dateFrom",q.value[0]),$.append("dateTo",q.value[1])),$.append("_t",Date.now().toString());const de=await(await fetch(`/api/log?${$.toString()}`)).json();if(!de||!de.data||!Array.isArray(de.data)){M.value="åŠ è½½æäº¤å†å²å¤±è´¥: æœåŠ¡å™¨è¿”å›æ•°æ®æ ¼å¼ä¸æ­£ç¡®";return}const Te=l>1;Te?de.data.forEach(j=>p.push(j)):(p.length=0,de.data.forEach(j=>p.push(j))),g.value=[...p],Q.value=l,ge.value=de.total||p.length,ie.value=de.hasMore===!0,Te||(we.value=!0,setTimeout(()=>{we.value=!1},2e3)),!Te&&U.value?setTimeout(D,0):!Te&&!U.value&&!i&&dt(()=>{oe(),setTimeout(it,200)}),M.value=""}catch($){M.value="åŠ è½½æäº¤å†å²å¤±è´¥: "+($ instanceof Error?$.message:String($)),l>1&&(ie.value=!1)}finally{l>1?re.value=!1:R.value=!1}}async function D(){if(Z.value&&p.length!==0)try{Z.value.innerHTML="";const i=Fa(Z.value,{orientation:"vertical-reverse",template:"metro",author:"æäº¤è€… <committer@example.com>"}),l={},m=i.branch(k.currentBranch||"main");l[k.currentBranch||"main"]=m,p.forEach($=>{let le=m;if($.branch){const de=ze($.branch.split(",")[0]);l[de]||(l[de]=i.branch(de)),le=l[de]}le.commit({hash:$.hash,subject:$.message,author:`${$.author} <${$.email}>`})}),setTimeout(()=>{c()},100)}catch(i){M.value="æ¸²æŸ“å›¾è¡¨å¤±è´¥: "+(i instanceof Error?i.message:String(i))}}function I(){U.value=!U.value,U.value&&p.length>0&&setTimeout(D,0)}function te(){P.value=!P.value,P.value||(ie.value=!0),Q.value=1,K(P.value),dt(()=>{setTimeout(()=>{!U.value&&!P.value&&(oe(),it())},300)})}function ze(i){return i.includes("HEAD -> ")?i.replace("HEAD -> ",""):i.includes("origin/")?i:i.trim()}function De(i){return i.includes("HEAD")?"success":i.includes("origin/")?"warning":"info"}const Fe=u(null),be=u(null);function h(i){if(U.value||!ie.value||re.value||E.value)return;const l=i.target,{scrollTop:m,scrollHeight:$,clientHeight:le}=l;$-m-le<=20&&Re()}function oe(){if(!Fe.value)return;const i=Fe.value.$el.querySelector(".el-table__body-wrapper");i&&(be.value=i,be.value&&(be.value.removeEventListener("scroll",h,!0),be.value.addEventListener("scroll",h,!0)))}function Ae(){be.value&&(be.value.removeEventListener("scroll",h,!0),be.value=null)}function Ue(i){i.key==="Escape"&&He.value&&(He.value=!1)}yt(()=>{k.isGitRepo?(k.log.length>0?(p.length=0,k.log.forEach(i=>p.push(i)),ge.value=k.log.length,U.value&&setTimeout(()=>{D()},100)):K(),Ye()):M.value="å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“",dt(()=>{setTimeout(()=>{oe()},500)}),Ke(()=>Fe.value,i=>{i&&!U.value&&!P.value&&dt(()=>{oe()})}),window.addEventListener("keydown",Ue)}),Ke(()=>k.allBranches,i=>{i&&i.length>0?ne.value=[...i].sort():ne.value=[]},{immediate:!0}),$a(()=>{Ae(),_e.value!==null&&(window.clearInterval(_e.value),_e.value=null),window.removeEventListener("keydown",Ue)});async function Ie(){await k.fetchLog(!0),p.length=0,k.log.forEach(i=>p.push(i)),g.value=[...p],ge.value=k.log.length,Q.value=1,ie.value=!1,we.value=!0,setTimeout(()=>{we.value=!1},2e3),U.value&&(await dt(),D())}Ke(()=>k.log,i=>{try{p.length=0,Array.isArray(i)&&i.forEach(l=>l&&p.push(l)),ge.value=p.length,Q.value=1,g.value=[...p],we.value=!0,setTimeout(()=>{we.value=!1},2e3),U.value&&p.length>0&&setTimeout(D,0)}catch{}},{immediate:!0}),d({refreshLog:Ie});function qe(){N.value<Et&&(N.value=Math.min(Et,N.value+ts),C())}function Ne(){N.value>Tt&&(N.value=Math.max(Tt,N.value-ts),C())}function C(){if(!Z.value)return;const i=Z.value.querySelector("svg");i&&(i.style.transform=`scale(${N.value})`,i.style.transformOrigin="top left")}function c(){if(!Z.value)return;const i=Z.value.querySelector("svg");if(!i)return;const l=i.getBoundingClientRect().width/N.value,m=Z.value.clientWidth;l>m?N.value=Math.max(Tt,m/l):N.value=1,C()}async function X(i){if(i){S.value=i,pe.value=!0,W.value=!0,z.value=[],B.value="",F.value="";try{if(!i.hash||i.hash.length<7){B.value="æ— æ•ˆçš„æäº¤å“ˆå¸Œå€¼",W.value=!1;return}const m=await(await fetch(`/api/commit-files?hash=${i.hash}`)).json();m.success&&Array.isArray(m.files)?(z.value=m.files,z.value.length>0?await H(i.hash,z.value[0]):B.value="è¯¥æäº¤æ²¡æœ‰å˜æ›´æ–‡ä»¶"):B.value=`è·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥: ${m.error||"æœªçŸ¥é”™è¯¯"}`}catch(l){B.value=`è·å–æäº¤è¯¦æƒ…å¤±è´¥: ${l.message}`}finally{W.value=!1}}}async function H(i,l){W.value=!0,F.value=l;try{const $=await(await fetch(`/api/commit-file-diff?hash=${i}&file=${encodeURIComponent(l)}`)).json();$.success?B.value=$.diff||"æ²¡æœ‰å˜æ›´å†…å®¹":B.value=`è·å–å·®å¼‚å¤±è´¥: ${$.error||"æœªçŸ¥é”™è¯¯"}`}catch(m){B.value=`è·å–å·®å¼‚å¤±è´¥: ${m.message}`}finally{W.value=!1}}function Se(i){if(!i)return"";const l=i.split(`
`);function m($){return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}return l.map($=>{const le=m($);return $.startsWith("diff --git")?`<div class="diff-header">${le}</div>`:$.startsWith("---")?`<div class="diff-old-file">${le}</div>`:$.startsWith("+++")?`<div class="diff-new-file">${le}</div>`:$.startsWith("@@")?`<div class="diff-hunk-header">${le}</div>`:$.startsWith("+")?`<div class="diff-added">${le}</div>`:$.startsWith("-")?`<div class="diff-removed">${le}</div>`:`<div class="diff-context">${le}</div>`}).join("")}function Ve(i){return i?i.trim():"(æ— æäº¤ä¿¡æ¯)"}function ve(i){if(!i)return"";const l=/^(feat|fix|docs|style|refactor|perf|test|chore|build|ci|revert)(\([^)]+\))?\s*:\s*(.+)$/s,m=i.match(l);return m?m[3].trim():i.trim()}async function ke(i){try{const l=ve(i);await navigator.clipboard.writeText(l),n.success("æäº¤ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{n.error("å¤åˆ¶å¤±è´¥")}}function Re(){!ie.value||re.value||E.value||K(P.value,Q.value+1)}function ue(){V.value=[],Y.value=[],x.value="",q.value=null,Q.value=1,K(P.value,1)}function me(){Q.value=1,K(P.value,1)}async function Ye(){try{const l=await(await fetch("/api/authors")).json();l.success&&Array.isArray(l.authors)?se.value=l.authors.sort():Pe()}catch{Pe()}}function Pe(){const i=new Set;g.value.forEach(l=>{l.author&&i.add(l.author)}),se.value=Array.from(i).sort()}Ke(()=>g.value,()=>{},{deep:!0});function A(i,l,m){m.preventDefault(),Ce.value=m.clientY,G.value=m.clientX,b.value=i,ee.value=!0;const $=()=>{ee.value=!1,document.removeEventListener("click",$)};setTimeout(()=>{document.addEventListener("click",$)},0)}async function ot(i){if(i)try{await Oe.confirm(`ç¡®å®šè¦æ’¤é”€æäº¤ ${i.hash.substring(0,7)} å—ï¼Ÿè¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤æ¥æ’¤é”€è¿™æ¬¡æäº¤çš„æ›´æ”¹ã€‚`,"æ’¤é”€æäº¤ç¡®è®¤",{confirmButtonText:"ç¡®è®¤",cancelButtonText:"å–æ¶ˆ",type:"warning"});const m=await(await fetch("/api/revert-commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:i.hash})})).json();m.success?(n.success(m.message||"å·²æˆåŠŸæ’¤é”€æäº¤"),Ie(),k.fetchStatus(),k.getBranchStatus()):n.error(m.error||"æ’¤é”€æäº¤å¤±è´¥")}catch(l){l!=="cancel"&&n.error("æ’¤é”€æäº¤å¤±è´¥: "+(l.message||l))}}async function nt(i){if(i)try{await Oe.confirm(`ç¡®å®šè¦å°†æäº¤ ${i.hash.substring(0,7)} Cherry-Pick åˆ°å½“å‰åˆ†æ”¯å—ï¼Ÿ`,"Cherry-Pickç¡®è®¤",{confirmButtonText:"ç¡®è®¤",cancelButtonText:"å–æ¶ˆ",type:"warning"});const m=await(await fetch("/api/cherry-pick-commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:i.hash})})).json();m.success?(n.success(m.message||"å·²æˆåŠŸCherry-Pickæäº¤"),Ie(),k.fetchStatus(),k.getBranchStatus()):n.error(m.error||"Cherry-Pickæäº¤å¤±è´¥")}catch(l){l!=="cancel"&&n.error("Cherry-Pickæäº¤å¤±è´¥: "+(l.message||l))}}async function Ze(i){if(i)try{await navigator.clipboard.writeText(i.hash),n.success(`å·²å¤åˆ¶æäº¤å“ˆå¸Œ: ${i.hash.substring(0,7)}`)}catch(l){n.error(`å¤åˆ¶æäº¤å“ˆå¸Œå¤±è´¥: ${l.message}`)}}async function _t(i){if(i)try{await Oe.confirm(`ç¡®å®šè¦å°†å½“å‰åˆ†æ”¯é‡ç½®(hard)åˆ°æäº¤ ${i.hash.substring(0,7)} å—ï¼Ÿ
      
      è­¦å‘Šï¼šè¿™å°†ä¸¢å¤±è¯¥æäº¤ä¹‹åçš„æ‰€æœ‰æ›´æ”¹ï¼`,"é‡ç½®ç¡®è®¤",{confirmButtonText:"ç¡®è®¤é‡ç½®",cancelButtonText:"å–æ¶ˆ",type:"warning",dangerouslyUseHTMLString:!0});const m=await(await fetch("/api/reset-to-commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hash:i.hash})})).json();m.success?(n.success(m.message||"å·²æˆåŠŸé‡ç½®åˆ°æŒ‡å®šæäº¤"),Ie(),k.fetchStatus(),k.getBranchStatus()):n.error(m.error||"é‡ç½®åˆ°æŒ‡å®šæäº¤å¤±è´¥")}catch(l){l!=="cancel"&&n.error("é‡ç½®åˆ°æŒ‡å®šæäº¤å¤±è´¥: "+(l.message||l))}}function it(){if(U.value||!ie.value||re.value||E.value||P.value)return;if(!be.value){oe();return}const{scrollTop:i,scrollHeight:l,clientHeight:m}=be.value;l-i-m<=50&&Re()}Ke(()=>U.value,i=>{!i&&!P.value&&dt(()=>{oe(),setTimeout(it,200)})});const He=u(!1);function wt(){He.value=!He.value,dt(()=>{U.value&&Z.value&&D()})}return(i,l)=>{var Te;const m=Bt,$=as,le=rs,de=ls;return f(),_($e,null,[e("div",{class:he(["card",{"fullscreen-mode":He.value}])},[e("div",Xn,[l[13]||(l[13]=e("div",{class:"header-left"},[e("h2",null,"æäº¤å†å²")],-1)),e("div",Kn,[U.value?O("",!0):(f(),J(o(je),{key:0,type:ce.value?"primary":"default",size:"small",onClick:l[0]||(l[0]=j=>ce.value=!ce.value),class:he(["action-button filter-button icon-only-button",{"active-filter":ce.value}])},{icon:a(()=>[s(m,null,{default:a(()=>[s(o(ba))]),_:1})]),_:1},8,["type","class"])),s(o(je),{type:"primary",size:"small",onClick:I,class:he(["action-button view-mode-button icon-only-button",{"active-view":U.value}])},{icon:a(()=>[s(m,null,{default:a(()=>[(f(),J(gt(U.value?o(Ls):o(Ca))))]),_:1})]),_:1},8,["class"]),Me(s(o(je),{type:"success",size:"small",onClick:te,loading:E.value,class:he(["action-button commit-display-button",{"active-commits":P.value}])},{icon:a(()=>[s(m,null,{default:a(()=>[(f(),J(gt(P.value?o(Sa):o(Ta))))]),_:1})]),default:a(()=>[y(" "+L(P.value?"æ˜¾ç¤ºåˆ†é¡µåŠ è½½":"æ˜¾ç¤ºæ‰€æœ‰æäº¤"),1)]),_:1},8,["loading","class"]),[[ft,!1]]),s(o(je),{type:"info",size:"small",onClick:wt,class:he(["action-button fullscreen-button icon-only-button",{"active-fullscreen":He.value}])},{icon:a(()=>[s(m,null,{default:a(()=>[(f(),J(gt(He.value?o(ss):o(xa))))]),_:1})]),_:1},8,["class"]),s(o(je),{circle:"",size:"small",onClick:l[1]||(l[1]=j=>Ie()),class:he([{"refresh-button-animated":we.value},"action-button refresh-button"])},{default:a(()=>[E.value?(f(),J(m,{key:1},{default:a(()=>[s(o(Va))]),_:1})):(f(),J(m,{key:0},{default:a(()=>[s(o(os))]),_:1}))]),_:1},8,["class"])])]),ce.value&&!U.value?(f(),_("div",Zn,[e("div",Qn,[e("div",ei,[s(o(Pt),{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=j=>V.value=j),placeholder:"é€‰æ‹©ä½œè€…",multiple:"",clearable:"",filterable:"",class:"filter-input",size:"small"},{prefix:a(()=>l[14]||(l[14]=[e("span",{class:"compact-label"},"ä½œè€…",-1)])),default:a(()=>[(f(!0),_($e,null,Le(se.value,j=>(f(),J(o(Mt),{key:j,label:j,value:j},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",ti,[s(o(Pt),{modelValue:Y.value,"onUpdate:modelValue":l[3]||(l[3]=j=>Y.value=j),placeholder:"é€‰æ‹©åˆ†æ”¯",multiple:"",clearable:"",filterable:"",class:"filter-input",size:"small"},{prefix:a(()=>l[15]||(l[15]=[e("span",{class:"compact-label"},"åˆ†æ”¯",-1)])),default:a(()=>[(f(!0),_($e,null,Le(ne.value,j=>(f(),J(o(Mt),{key:j,label:j,value:j},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",si,[s(o(is),{modelValue:x.value,"onUpdate:modelValue":l[4]||(l[4]=j=>x.value=j),placeholder:"æäº¤ä¿¡æ¯å…³é”®è¯",clearable:"",class:"filter-input",size:"small"},{prefix:a(()=>l[16]||(l[16]=[e("span",{class:"compact-label"},"ä¿¡æ¯",-1)])),_:1},8,["modelValue"])]),e("div",ai,[s(o(La),{modelValue:q.value,"onUpdate:modelValue":l[5]||(l[5]=j=>q.value=j),type:"daterange","range-separator":"è‡³","start-placeholder":"å¼€å§‹æ—¥æœŸ","end-placeholder":"ç»“æŸæ—¥æœŸ",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",class:"filter-input date-range",size:"small"},{prefix:a(()=>l[17]||(l[17]=[e("span",{class:"compact-label"},"æ—¥æœŸ",-1)])),_:1},8,["modelValue"])]),e("div",li,[s(o(je),{type:"primary",size:"small",onClick:me,class:"filter-action-button"},{default:a(()=>l[18]||(l[18]=[y("åº”ç”¨")])),_:1}),s(o(je),{type:"info",size:"small",onClick:ue,class:"filter-action-button"},{default:a(()=>l[19]||(l[19]=[y("é‡ç½®")])),_:1})])])])):O("",!0),e("div",{class:he(["content-area",{"with-filter":ce.value&&!U.value}])},[M.value?(f(),_("div",oi,L(M.value),1)):(f(),_("div",ni,[U.value?(f(),_("div",ii,[o(p).length>0?(f(),_("div",ri," æ˜¾ç¤º "+L(o(p).length)+" æ¡æäº¤è®°å½• "+L(P.value?"(å…¨éƒ¨)":"(åˆ†é¡µåŠ è½½ï¼Œæ¯é¡µ20æ¡)"),1)):O("",!0),e("div",ci,[e("div",ui,[s(o(je),{type:"primary",circle:"",size:"small",onClick:Ne,disabled:N.value<=Tt},{default:a(()=>[s(m,null,{default:a(()=>[s(o(za))]),_:1})]),_:1},8,["disabled"]),s(o(Ba),{modelValue:N.value,"onUpdate:modelValue":l[6]||(l[6]=j=>N.value=j),min:Tt,max:Et,step:ts,onChange:C,class:"zoom-slider"},null,8,["modelValue"]),s(o(je),{type:"primary",circle:"",size:"small",onClick:qe,disabled:N.value>=Et},{default:a(()=>[s(m,null,{default:a(()=>[s(o(Da))]),_:1})]),_:1},8,["disabled"]),s(o(je),{type:"primary",size:"small",onClick:c},{default:a(()=>l[20]||(l[20]=[y(" è‡ªé€‚åº”å¤§å° ")])),_:1})]),e("div",di," ç¼©æ”¾: "+L(Math.round(N.value*100))+"% ",1)]),e("div",{ref_key:"graphContainer",ref:Z,class:"graph-container"},null,512)])):(f(),_("div",fi,[Me((f(),J(o(Rs),{ref_key:"tableRef",ref:Fe,data:v.value,stripe:"",border:"",class:"log-table","empty-text":E.value?"åŠ è½½ä¸­...":"æ²¡æœ‰åŒ¹é…çš„æäº¤è®°å½•",height:"450",onRowContextmenu:A},{default:a(()=>[s(o(Vt),{label:"å“ˆå¸Œ",width:"80",resizable:""},{default:a(j=>[e("span",{class:"commit-hash",onClick:Xe=>X(j.row)},L(j.row.hash.substring(0,6)),9,pi)]),_:1}),s(o(Vt),{label:"æäº¤ä¿¡æ¯","min-width":"300"},{default:a(j=>[e("div",vi,[e("div",mi,[j.row.branch?(f(),_("div",gi,[(f(!0),_($e,null,Le(j.row.branch.split(","),(Xe,kt)=>(f(),J(o(Dt),{key:kt,size:"small",type:De(Xe),class:"branch-tag"},{default:a(()=>[y(L(ze(Xe)),1)]),_:2},1032,["type"]))),128))])):O("",!0),e("span",hi,L(j.row.message),1),s(o(je),{type:"text",icon:o(Lt),size:"small",onClick:We(Xe=>ke(j.row.message),["stop"]),class:"copy-message-btn",title:"å¤åˆ¶çº¯å‡€æäº¤ä¿¡æ¯ï¼ˆä¸å«ç±»å‹å‰ç¼€ï¼‰"},null,8,["icon","onClick"])])])]),_:1}),s(o(Vt),{prop:"date",label:"æ—¥æœŸ",width:"150",resizable:""}),s(o(Vt),{label:"ä½œè€…",width:"100",resizable:""},{default:a(j=>[s($,{content:j.row.email,placement:"top","hide-after":1e3},{default:a(()=>[e("span",yi,L(j.row.author),1)]),_:2},1032,["content"])]),_:1})]),_:1},8,["data","empty-text"])),[[de,E.value]]),(P.value,O("",!0))]))]))],2),s(o(Ft),{modelValue:pe.value,"onUpdate:modelValue":l[7]||(l[7]=j=>pe.value=j),title:`æäº¤è¯¦æƒ…: ${(Te=S.value)!=null&&Te.hash?S.value.hash.substring(0,7):"æœªçŸ¥"}`,width:"80%","destroy-on-close":"",class:"commit-detail-dialog"},{default:a(()=>[Me((f(),_("div",_i,[S.value?(f(),_("div",wi,[e("div",ki,[e("div",$i,[l[24]||(l[24]=e("span",{class:"item-label"},"å“ˆå¸Œ:",-1)),e("span",bi,L(S.value.hash),1)]),e("div",Ci,[l[25]||(l[25]=e("span",{class:"item-label"},"ä½œè€…:",-1)),e("span",Si,L(S.value.author)+" <"+L(S.value.email)+">",1)]),e("div",Ti,[l[26]||(l[26]=e("span",{class:"item-label"},"æ—¥æœŸ:",-1)),e("span",xi,L(S.value.date),1)])]),e("div",Vi,[l[27]||(l[27]=e("div",{class:"message-label"},"æäº¤ä¿¡æ¯:",-1)),e("div",{class:"message-content",innerHTML:Ve(S.value.message).replace(/\n/g,"<br>")},null,8,Li)])])):O("",!0),e("div",zi,[e("div",Bi,[l[28]||(l[28]=e("h3",null,"å˜æ›´æ–‡ä»¶",-1)),z.value.length===0?(f(),J(le,{key:0,description:"æ²¡æœ‰æ‰¾åˆ°å˜æ›´æ–‡ä»¶"})):(f(),_("ul",Di,[(f(!0),_($e,null,Le(z.value,j=>(f(),_("li",{key:j,class:he({"active-file":j===F.value}),onClick:Xe=>H(S.value.hash,j)},[s($,{content:j,placement:"top",disabled:j.length<=35,"hide-after":1e3},{default:a(()=>[y(L(j),1)]),_:2},1032,["content","disabled"])],10,Fi))),128))]))]),e("div",Ri,[F.value?(f(),_("h3",Gi," æ–‡ä»¶å·®å¼‚: "+L(F.value),1)):(f(),_("h3",ji,"æ–‡ä»¶å·®å¼‚")),!B.value&&!W.value?(f(),J(le,{key:2,description:"é€‰æ‹©æ–‡ä»¶æŸ¥çœ‹å·®å¼‚"})):B.value?(f(),_("div",{key:3,innerHTML:Se(B.value),class:"diff-content"},null,8,Ai)):O("",!0)])])])),[[de,W.value]])]),_:1},8,["modelValue","title"])],2),Me(e("div",{class:he(["context-menu",{"fullscreen-context-menu":He.value}]),style:xt({top:Ce.value+"px",left:G.value+"px"})},[e("div",{class:"context-menu-item",onClick:l[8]||(l[8]=j=>X(b.value))},l[29]||(l[29]=[e("i",{class:"el-icon-view"},null,-1),y(" æŸ¥çœ‹è¯¦æƒ… ")])),e("div",{class:"context-menu-item",onClick:l[9]||(l[9]=j=>Ze(b.value))},l[30]||(l[30]=[e("i",{class:"el-icon-document-copy"},null,-1),y(" å¤åˆ¶æäº¤å“ˆå¸Œ ")])),e("div",{class:"context-menu-item",onClick:l[10]||(l[10]=j=>_t(b.value))},l[31]||(l[31]=[e("i",{class:"el-icon-refresh-right"},null,-1),y(" é‡ç½®åˆ°è¯¥æäº¤(hard) ")])),e("div",{class:"context-menu-item",onClick:l[11]||(l[11]=j=>ot(b.value))},l[32]||(l[32]=[e("i",{class:"el-icon-delete"},null,-1),y(" æ’¤é”€æäº¤ (Revert) ")])),e("div",{class:"context-menu-item",onClick:l[12]||(l[12]=j=>nt(b.value))},l[33]||(l[33]=[e("i",{class:"el-icon-edit"},null,-1),y(" Cherry-Pick åˆ°å½“å‰åˆ†æ”¯ ")]))],6),[[ft,ee.value]])],64)}}}),Oi=Rt(Ui,[["__scopeId","data-v-99dfdbfc"]]),Ei={class:"dialog-content"},Mi={class:"dialog-toolbar"},Pi={class:"history-scroll"},Hi={key:0,class:"loading-state"},Ii={key:2,class:"history-list"},Ni=["onClick"],Ji={class:"command-info"},Wi={class:"command-text"},qi={class:"command-meta"},Yi={class:"timestamp"},Xi={class:"duration"},Ki={class:"item-actions"},Zi={key:0,class:"item-details"},Qi={key:0,class:"output-section"},er={class:"output-header"},tr={class:"output-content"},sr={key:0,class:"truncation-notice"},ar={class:"output-header"},lr={class:"output-content"},or={key:0,class:"truncation-notice"},nr={key:2,class:"output-section error"},ir={class:"output-content"},rr=zt({__name:"CommandHistory",setup(ye){const d=ht(),k=u([]),p=u(!1),g=u(!1),M=u(!1),R=u(!1),E=u(new Set),P=u(!1),ge=u(!1);function U(){ge.value=!0,k.value.length===0&&Z()}async function Z(){try{if(p.value=!0,d.socket&&d.socket.connected)d.socket.emit("request_full_history");else{const x=await(await fetch("/api/command-history")).json();x.success?k.value=x.history:n.error(`åŠ è½½å‘½ä»¤å†å²å¤±è´¥: ${x.error}`)}}catch(V){n.error(`åŠ è½½å‘½ä»¤å†å²å¤±è´¥: ${V.message}`)}finally{p.value=!1}}async function Q(){if(k.value.length===0){n.warning("æ²¡æœ‰å¯å¤åˆ¶çš„å‘½ä»¤å†å²");return}try{M.value=!0;const V=k.value.map(x=>{let q=`# ${_e(x.timestamp)} (è€—æ—¶: ${pe(x.executionTime)}) - ${x.success?"æˆåŠŸ":"å¤±è´¥"}
`;if(q+=`${x.command}
`,x.stdout&&(q+=`
# è¾“å‡º:
${x.stdout}
`),x.stderr){const se=F(x.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º";q+=`
# ${se}:
${x.stderr}
`}return x.error&&(q+=`
# é”™è¯¯ä¿¡æ¯:
${x.error}
`),q}).join(`
---

`);await navigator.clipboard.writeText(V),n.success("å‘½ä»¤å†å²å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(V){n.error(`å¤åˆ¶å¤±è´¥: ${V.message}`)}finally{M.value=!1}}async function ie(){if(k.value.length===0){n.warning("æ²¡æœ‰å¯å¤åˆ¶çš„å‘½ä»¤");return}try{P.value=!0;const V=k.value.map(x=>x.command).join(`
`);await navigator.clipboard.writeText(V),n.success("å‘½ä»¤åˆ—è¡¨å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(V){n.error(`å¤åˆ¶å¤±è´¥: ${V.message}`)}finally{P.value=!1}}async function re(){try{if(await Oe.confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å‘½ä»¤å†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚","æ¸…ç©ºå‘½ä»¤å†å²",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),g.value=!0,d.socket&&d.socket.connected)d.socket.emit("clear_command_history");else{const x=await(await fetch("/api/clear-command-history",{method:"POST",headers:{"Content-Type":"application/json"}})).json();x.success?(k.value=[],n.success("å‘½ä»¤å†å²å·²æ¸…ç©º")):n.error(`æ¸…ç©ºå‘½ä»¤å†å²å¤±è´¥: ${x.error}`)}}catch(V){V!=="cancel"&&V.toString()!=="Error: cancel"&&n.error(`æ¸…ç©ºå‘½ä»¤å†å²å¤±è´¥: ${V.message}`)}finally{g.value=!1}}function _e(V){return new Date(V).toLocaleString()}function pe(V){return V<1e3?`${V}ms`:`${(V/1e3).toFixed(2)}s`}function S(V){E.value.has(V)?E.value.delete(V):E.value.add(V)}function z(V){return E.value.has(V)}async function B(V){try{await navigator.clipboard.writeText(V),n.success("å‘½ä»¤å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(x){n.error(`å¤åˆ¶å¤±è´¥: ${x.message}`)}}function W(V){return V.includes("git push")||V.includes("git-push")}function F(V){return!!W(V)}async function N(V){try{let x="";if(V.stdout&&(x+=`æ ‡å‡†è¾“å‡º:
${V.stdout}

`),V.stderr){const q=F(V.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º";x+=`${q}:
${V.stderr}

`}V.error&&(x+=`é”™è¯¯ä¿¡æ¯:
${V.error}`),await navigator.clipboard.writeText(x.trim()),n.success("è¾“å‡ºå·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(x){n.error(`å¤åˆ¶å¤±è´¥: ${x.message}`)}}function we(){if(!d.socket){console.error("Socketå®ä¾‹ä¸å¯ç”¨");return}d.socket.on("initial_command_history",V=>{k.value=V.history,R.value=!0}),d.socket.on("command_history_update",V=>{k.value.unshift(V.newCommand),k.value.length>100&&k.value.pop(),R.value=!0}),d.socket.on("full_command_history",V=>{k.value=V.history,p.value=!1,R.value=!0}),d.socket.on("command_history_cleared",V=>{V.success&&(k.value=[],n.success("å‘½ä»¤å†å²å·²æ¸…ç©º")),g.value=!1}),d.socket.on("connect",()=>{R.value=!0,n.success("å·²è¿æ¥åˆ°å®æ—¶å‘½ä»¤å†å²")}),d.socket.on("disconnect",()=>{R.value=!1,n.warning("å®æ—¶å‘½ä»¤å†å²è¿æ¥å·²æ–­å¼€")})}function ce(){d.socket&&(d.socket.off("initial_command_history"),d.socket.off("command_history_update"),d.socket.off("full_command_history"),d.socket.off("command_history_cleared"))}return yt(()=>{we(),d.socket||(console.log("å°è¯•åˆå§‹åŒ–Socketè¿æ¥"),d.initSocketConnection())}),bs(()=>{ce()}),(V,x)=>{const q=je,se=Dt,Y=Bt,ne=rs,ee=ns,Ce=Ft;return f(),_($e,null,[s(q,{type:"primary",icon:o(Ra),onClick:U,class:"command-history-button",title:"æŸ¥çœ‹Gitå‘½ä»¤å†å²"},{default:a(()=>x[1]||(x[1]=[y(" å‘½ä»¤å†å² ")])),_:1},8,["icon"]),(f(),J(Ga,{to:"body"},[s(Ce,{modelValue:ge.value,"onUpdate:modelValue":x[0]||(x[0]=G=>ge.value=G),title:"Git å‘½ä»¤å†å²",width:"80%",top:"5vh","destroy-on-close":"",class:"command-history-dialog","z-index":99999,"append-to-body":"",modal:""},{default:a(()=>[e("div",Ei,[e("div",Mi,[s(se,{type:R.value?"success":"danger",size:"small",effect:"dark",class:"socket-status"},{default:a(()=>[y(L(R.value?"å®æ—¶æ›´æ–°":"æœªè¿æ¥"),1)]),_:1},8,["type"]),s(q,{type:"success",icon:o(Lt),circle:"",size:"small",onClick:ie,loading:P.value,class:"copy-commands-button",title:"åªå¤åˆ¶å‘½ä»¤åˆ—è¡¨ï¼ˆä¸å«è¾“å‡ºï¼‰",disabled:k.value.length===0},null,8,["icon","loading","disabled"]),s(q,{type:"primary",icon:o(Lt),circle:"",size:"small",onClick:Q,loading:M.value,class:"copy-all-button",title:"å¤åˆ¶å®Œæ•´å‘½ä»¤å†å²ï¼ˆå«è¾“å‡ºï¼‰",disabled:k.value.length===0},null,8,["icon","loading","disabled"]),s(q,{type:"danger",icon:o(zs),circle:"",size:"small",onClick:re,loading:g.value,class:"clear-button",title:"æ¸…ç©ºå‘½ä»¤å†å²",disabled:k.value.length===0},null,8,["icon","loading","disabled"])]),e("div",Pi,[p.value&&k.value.length===0?(f(),_("div",Hi,[s(Y,{class:"loading-icon is-loading"},{default:a(()=>x[2]||(x[2]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})],-1)])),_:1}),x[3]||(x[3]=e("div",{class:"loading-text"},"åŠ è½½å‘½ä»¤å†å²...",-1))])):k.value.length===0?(f(),J(ne,{key:1,description:"æš‚æ— å‘½ä»¤å†å²"})):(f(),_("div",Ii,[(f(!0),_($e,null,Le(k.value,(G,b)=>(f(),_("div",{key:b,class:he(["history-item",{"is-error":!G.success}])},[e("div",{class:"item-header",onClick:v=>S(b)},[e("div",Ji,[e("div",Wi,[s(se,{size:"small",type:G.success?"success":"danger",effect:"dark",class:"status-tag"},{default:a(()=>[y(L(G.success?"æˆåŠŸ":"å¤±è´¥"),1)]),_:2},1032,["type"]),e("code",null,L(G.command),1)]),e("div",qi,[e("span",Yi,L(_e(G.timestamp)),1),e("span",Xi,"è€—æ—¶: "+L(pe(G.executionTime)),1)])]),e("div",Ki,[s(q,{type:"primary",icon:o(Lt),circle:"",size:"small",onClick:We(v=>B(G.command),["stop"]),title:"å¤åˆ¶å‘½ä»¤"},null,8,["icon","onClick"]),s(q,{type:z(b)?"primary":"default",icon:z(b)?o(Vs):o(mt),circle:"",size:"small",onClick:We(v=>S(b),["stop"]),title:"å±•å¼€/æ”¶èµ·"},null,8,["type","icon","onClick"])])],8,Ni),z(b)?(f(),_("div",Zi,[G.stdout?(f(),_("div",Qi,[e("div",er,[x[4]||(x[4]=e("h4",null,"æ ‡å‡†è¾“å‡º",-1)),s(q,{type:"primary",icon:o(Lt),circle:"",size:"small",onClick:v=>N(G),title:"å¤åˆ¶è¾“å‡º"},null,8,["icon","onClick"])]),e("pre",tr,L(G.stdout),1),G.isStdoutTruncated?(f(),_("div",sr,[s(ee,{type:"info",closable:!1,"show-icon":""},{default:a(()=>x[5]||(x[5]=[y(" è¾“å‡ºå†…å®¹è¿‡é•¿å·²è¢«æˆªæ–­ï¼Œè¯·ç›´æ¥æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹å®Œæ•´è¾“å‡º ")])),_:1})])):O("",!0)])):O("",!0),G.stderr?(f(),_("div",{key:1,class:he(["output-section",F(G.command)?"":"error"])},[e("div",ar,[e("h4",null,L(F(G.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º"),1)]),e("pre",lr,L(G.stderr),1),G.isStderrTruncated?(f(),_("div",or,[s(ee,{type:"info",closable:!1,"show-icon":""},{default:a(()=>[y(L(F(G.command)?"è¾“å‡ºä¿¡æ¯":"é”™è¯¯è¾“å‡º")+"å†…å®¹è¿‡é•¿å·²è¢«æˆªæ–­ï¼Œè¯·ç›´æ¥æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹å®Œæ•´è¾“å‡º ",1)]),_:2},1024)])):O("",!0)],2)):O("",!0),G.error?(f(),_("div",nr,[x[6]||(x[6]=e("div",{class:"output-header"},[e("h4",null,"é”™è¯¯ä¿¡æ¯")],-1)),e("pre",ir,L(G.error),1)])):O("",!0)])):O("",!0)],2))),128))]))])])]),_:1},8,["modelValue"])]))],64)}}}),cr=Rt(rr,[["__scopeId","data-v-234c209d"]]),ur="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20ä¸»åˆ†æ”¯%20--%3e%3cline%20x1='40'%20y1='40'%20x2='40'%20y2='160'%20stroke='%2334495e'%20stroke-width='8'%20stroke-linecap='round'%20/%3e%3c!--%20ç‰¹æ€§åˆ†æ”¯%20--%3e%3cpath%20d='M40,70%20C60,70%2080,90%2080,110%20L80,130'%20stroke='%233498db'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20å¼€å‘åˆ†æ”¯%20--%3e%3cpath%20d='M40,100%20C60,100%20100,110%20100,130%20L100,160'%20stroke='%232ecc71'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20ä¿®å¤åˆ†æ”¯%20--%3e%3cpath%20d='M40,130%20C60,130%20120,140%20120,160'%20stroke='%23e74c3c'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20åˆå¹¶ç‚¹%20--%3e%3cpath%20d='M80,130%20C80,145%2060,145%2040,145'%20stroke='%233498db'%20stroke-width='8'%20stroke-linecap='round'%20stroke-linejoin='round'%20fill='none'%20/%3e%3c!--%20èŠ‚ç‚¹%20--%3e%3ccircle%20cx='40'%20cy='40'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='70'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='100'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='130'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='145'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='40'%20cy='160'%20r='10'%20fill='%2334495e'%20/%3e%3ccircle%20cx='80'%20cy='130'%20r='10'%20fill='%233498db'%20/%3e%3ccircle%20cx='100'%20cy='160'%20r='10'%20fill='%232ecc71'%20/%3e%3ccircle%20cx='120'%20cy='160'%20r='10'%20fill='%23e74c3c'%20/%3e%3c/svg%3e",dr={class:"main-header"},fr={class:"header-left"},pr=["src"],vr={class:"header-info"},mr={key:0,id:"user-info"},gr={class:"user-name"},hr={class:"user-email"},yr={key:1,id:"user-info"},_r={class:"directory-selector"},wr={class:"directory-display"},kr={class:"directory-icon"},$r=["title"],br={class:"directory-actions"},Cr={key:2,class:"command-history-section"},Sr={class:"main-container"},Tr={key:0,class:"loading-container"},xr={class:"loading-spinner"},Vr={key:1,class:"grid-layout"},Lr={class:"git-status-panel"},zr={key:0,class:"commit-form-panel"},Br={key:0,class:"card"},Dr={class:"tips"},Fr={key:1,class:"commit-form-panel"},Rr={key:2,class:"log-list-panel"},Gr={class:"dialog-footer"},jr={class:"main-footer"},Ar={key:0,class:"branch-info"},Ur={class:"branch-wrapper"},Or={key:1,class:"footer-right"},Er={class:"repo-url"},Mr={class:"dialog-footer"},Pr={class:"directory-input-group"},Hr={class:"recent-directories"},Ir={class:"dialog-footer"},Nr=zt({__name:"App",setup(ye){const d=u(""),k=u(null),p=u(null),g=ht(),M=cs(),R=u(!1),E=u("");function P(){M.config&&(d.value=`é»˜è®¤æäº¤ä¿¡æ¯: ${M.config.defaultCommitMessage}`)}async function ge(){try{const c=await(await fetch("/api/current_directory")).json();return E.value=c.directory||"æœªçŸ¥ç›®å½•",c}catch(C){return console.error("è·å–å½“å‰ç›®å½•å¤±è´¥:",C),{directory:"æœªçŸ¥ç›®å½•",isGitRepo:!1}}}yt(async()=>{console.log("---------- é¡µé¢åˆå§‹åŒ–å¼€å§‹ ----------");try{const C=await ge();M.isLoaded||await M.loadConfig(),P(),g.isGitRepo=C.isGitRepo===!0,g.lastCheckedTime=Date.now(),g.isGitRepo?await Promise.all([g.getCurrentBranch(!0),g.getAllBranches(),g.getUserInfo(),g.getRemoteUrl(),g.getBranchStatus(!0)]):n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œéƒ¨åˆ†åŠŸèƒ½å°†ä¸å¯ç”¨")}catch(C){console.error("åˆå§‹åŒ–å¤±è´¥:",C)}finally{R.value=!0,console.log("---------- é¡µé¢åˆå§‹åŒ–å®Œæˆ ----------"),setTimeout(()=>{ee()},100)}});const U=u(!1),Z=u(""),Q=u("");async function ie(){await g.createBranch(Z.value,Q.value)&&(U.value=!1,Z.value="",p.value&&p.value.refreshStatus(),k.value&&k.value.refreshLog())}function re(){Q.value=g.currentBranch,U.value=!0}async function _e(C){await g.changeBranch(C)&&(p.value&&p.value.refreshStatus(),k.value&&k.value.refreshLog())}const pe=u(!1),S=u(""),z=u("");function B(){S.value=g.userName,z.value=g.userEmail,pe.value=!0}async function W(){if(!S.value||!z.value){n.warning("ç”¨æˆ·åå’Œé‚®ç®±ä¸èƒ½ä¸ºç©º");return}await g.restoreUserConfig(S.value,z.value)&&(pe.value=!1)}async function F(){await g.clearUserConfig()&&(S.value="",z.value="")}let N=!1,we=!1,ce=!1,V=0,x=0,q="",se="",Y=null;function ne(){const C=document.querySelector(".grid-layout");if(!C)return;const c=getComputedStyle(C).gridTemplateColumns.split(" "),X=getComputedStyle(C).gridTemplateRows.split(" ");if(c.length>=3&&X.length>=3){const H=parseFloat(c[0]),Se=parseFloat(c[2]),Ve=H+Se,ve=H/Ve,ke=parseFloat(X[0]),Re=parseFloat(X[2]),ue=ke+Re,me=ke/ue;localStorage.setItem("zen-gitsync-layout-left-ratio",ve.toString()),localStorage.setItem("zen-gitsync-layout-top-ratio",me.toString()),console.log(`å¸ƒå±€æ¯”ä¾‹å·²ä¿å­˜ - å·¦ä¾§: ${(ve*100).toFixed(0)}%, ä¸Šæ–¹: ${(me*100).toFixed(0)}%`),localStorage.setItem("zen-gitsync-layout-bottom-left-ratio",ve.toString()),console.log(`åº•éƒ¨å¸ƒå±€æ¯”ä¾‹å·²ä¿å­˜ - å·¦ä¾§: ${(ve*100).toFixed(0)}%`)}}function ee(){const C=document.querySelector(".grid-layout");if(!C)return;const c=localStorage.getItem("zen-gitsync-layout-left-ratio"),X=localStorage.getItem("zen-gitsync-layout-top-ratio");if(c){const H=parseFloat(c),Se=1-H;C.style.gridTemplateColumns=`${H}fr 8px ${Se}fr`,console.log(`å·²æ¢å¤å·¦ä¾§æ¯”ä¾‹: ${(H*100).toFixed(0)}%`)}else C.style.gridTemplateColumns="1fr 8px 3fr";if(X){const H=parseFloat(X),Se=1-H;C.style.gridTemplateRows=`${H}fr 8px ${Se}fr`,console.log(`å·²æ¢å¤ä¸Šæ–¹æ¯”ä¾‹: ${(H*100).toFixed(0)}%`)}}function Ce(C){var H;const c=C.currentTarget;if(!c||!c.id)return;Y=c.id,Y==="v-resizer"?N=!0:Y==="v-resizer-bottom"&&(we=!0),V=C.clientX;const X=document.querySelector(".grid-layout");q=getComputedStyle(X).gridTemplateColumns,(H=document.getElementById(Y))==null||H.classList.add("active"),document.addEventListener("mousemove",G),document.addEventListener("mouseup",b),C.preventDefault()}function G(C){if(!N&&!we)return;const c=document.querySelector(".grid-layout"),X=C.clientX-V,H=q.split(" ");if(H.length>=3){const Se=parseFloat(H[0]),Ve=parseFloat(H[2]),ve=Se+Ve,ke=(Se+X/c.clientWidth*ve)/ve,Re=1-ke,ue=.1,me=.5;ke<ue?c.style.gridTemplateColumns=`${ue}fr 8px ${1-ue}fr`:ke>me?c.style.gridTemplateColumns=`${me}fr 8px ${1-me}fr`:c.style.gridTemplateColumns=`${ke}fr 8px ${Re}fr`}}function b(){var C,c;N=!1,we=!1,(C=document.getElementById("v-resizer"))==null||C.classList.remove("active"),(c=document.getElementById("v-resizer-bottom"))==null||c.classList.remove("active"),document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",b),ne()}function v(C){var X;ce=!0,x=C.clientY;const c=document.querySelector(".grid-layout");se=getComputedStyle(c).gridTemplateRows,(X=document.getElementById("h-resizer"))==null||X.classList.add("active"),document.addEventListener("mousemove",K),document.addEventListener("mouseup",D),C.preventDefault()}function K(C){if(!ce)return;const c=document.querySelector(".grid-layout"),X=C.clientY-x,H=se.split(" ");if(H.length>=3){const Se=parseFloat(H[0]),Ve=parseFloat(H[2]),ve=Se+Ve,ke=(Se+X/c.clientHeight*ve)/ve,Re=1-ke,ue=.2,me=.8;ke<ue?c.style.gridTemplateRows=`${ue}fr 8px ${1-ue}fr`:ke>me?c.style.gridTemplateRows=`${me}fr 8px ${1-me}fr`:c.style.gridTemplateRows=`${ke}fr 8px ${Re}fr`}}function D(){var C;ce=!1,(C=document.getElementById("h-resizer"))==null||C.classList.remove("active"),document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",D),ne()}const I=u(!1),te=u(""),ze=u(!1),De=u([]);async function Fe(){if(!E.value){n.warning("å½“å‰ç›®å½•è·¯å¾„ä¸ºç©º");return}try{await navigator.clipboard.writeText(E.value),n.success("å·²å¤åˆ¶ç›®å½•è·¯å¾„")}catch(C){console.error("å¤åˆ¶ç›®å½•è·¯å¾„å¤±è´¥:",C),n.error(`å¤åˆ¶å¤±è´¥: ${C.message}`)}}function be(){te.value=E.value,I.value=!0,h()}async function h(){try{const c=await(await fetch("/api/recent_directories")).json();c.success&&Array.isArray(c.directories)&&(De.value=c.directories)}catch(C){console.error("è·å–æœ€è¿‘ç›®å½•å¤±è´¥:",C)}}async function oe(){if(!te.value){n.warning("ç›®å½•è·¯å¾„ä¸èƒ½ä¸ºç©º");return}try{ze.value=!0;const c=await(await fetch("/api/change_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:te.value})})).json();c.success?(n.success("å·²åˆ‡æ¢å·¥ä½œç›®å½•"),E.value=c.directory,I.value=!1,await Ae(c.directory),await h(),g.isGitRepo=c.isGitRepo,await M.loadConfig(!0),c.isGitRepo?(await Promise.all([g.getCurrentBranch(),g.getAllBranches(),g.getUserInfo(),g.getRemoteUrl()]),p.value&&p.value.refreshStatus(),k.value&&k.value.refreshLog()):(n.warning("å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œéƒ¨åˆ†åŠŸèƒ½å°†ä¸å¯ç”¨"),g.$reset())):n.error(c.error||"åˆ‡æ¢ç›®å½•å¤±è´¥")}catch(C){n.error(`åˆ‡æ¢ç›®å½•å¤±è´¥: ${C.message}`)}finally{ze.value=!1}}async function Ae(C){try{await fetch("/api/save_recent_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:C})})}catch(c){console.error("ä¿å­˜æœ€è¿‘ç›®å½•å¤±è´¥:",c)}}async function Ue(){try{if(!E.value){n.warning("å½“å‰ç›®å½•è·¯å¾„ä¸ºç©º");return}const c=await(await fetch("/api/open_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:E.value})})).json();c.success?n.success("å·²åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰“å¼€ç›®å½•"):c.error&&n.error(c.error)}catch(C){console.error("æ‰“å¼€ç›®å½•å¤±è´¥:",C),n.error(`æ‰“å¼€ç›®å½•å¤±è´¥: ${C.message}`)}}async function Ie(){try{const c=await(await fetch("/api/browse_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPath:te.value||E.value})})).json();c.success?qe(c):c.error&&n.error(c.error)}catch(C){console.error("æµè§ˆç›®å½•å¤±è´¥:",C),n.error(`æµè§ˆç›®å½•å¤±è´¥: ${C.message}`)}}function qe(C){!C||!C.items||Oe.alert(Ge("div",{class:"directory-browser"},[Ge("div",{class:"current-path"},[Ge("span",{class:"path-label"},"å½“å‰è·¯å¾„: "),Ge("span",{class:"path-value"},C.path)]),Ge("div",{class:"directory-list"},[C.parentPath?Ge("div",{class:"directory-item parent-dir",onClick:()=>{Ne(C.parentPath)}},[Ge("span",{class:"dir-icon"},Ge("svg",{class:"folder-icon",viewBox:"0 0 24 24",width:"20",height:"20",style:{fill:"#E6A23C"}},[Ge("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})])),Ge("span",{class:"dir-name"},"è¿”å›ä¸Šçº§ç›®å½•")]):null,...C.items.map(c=>Ge("div",{class:"directory-item",onClick:()=>{Ne(c.path)}},[Ge("span",{class:"dir-icon"},Ge("svg",{class:"folder-icon",viewBox:"0 0 24 24",width:"20",height:"20",style:{fill:"#409EFF"}},[Ge("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})])),Ge("span",{class:"dir-name"},c.name)]))])]),"æµè§ˆå¹¶é€‰æ‹©ç›®å½•",{confirmButtonText:"ä½¿ç”¨å½“å‰ç›®å½•",customClass:"directory-browser-dialog",callback:c=>{c==="confirm"&&(te.value=C.path)}})}async function Ne(C){try{Oe.close(),setTimeout(async()=>{try{const X=await(await fetch("/api/browse_directory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPath:C})})).json();X.success?qe(X):X.error&&n.error(X.error)}catch(c){console.error("æµè§ˆç›®å½•å¤±è´¥:",c),n.error(`æµè§ˆç›®å½•å¤±è´¥: ${c.message}`)}},100)}catch(c){console.error("å¤„ç†ç›®å½•é€‰æ‹©æ—¶å‡ºé”™:",c),n.error(`å¤„ç†ç›®å½•é€‰æ‹©æ—¶å‡ºé”™: ${c.message}`)}}return(C,c)=>{const X=Bt,H=je,Se=Bs,Ve=is,ve=Fs,ke=Mt,Re=Pt,ue=Ds,me=Ft,Ye=ns,Pe=Dt;return f(),_($e,null,[e("header",dr,[e("div",fr,[e("img",{src:o(ur),alt:"Zen GitSync Logo",class:"logo"},null,8,pr),c[14]||(c[14]=e("h1",null,"Zen GitSync UI",-1))]),e("div",vr,[o(g).userName&&o(g).userEmail?(f(),_("div",mr,[c[15]||(c[15]=e("span",{class:"user-label"},"ç”¨æˆ·:",-1)),e("span",gr,L(o(g).userName),1),e("span",hr,"<"+L(o(g).userEmail)+">",1),s(H,{type:"primary",size:"small",onClick:B,class:"user-settings-btn",circle:""},{default:a(()=>[s(X,null,{default:a(()=>[s(o(ws))]),_:1})]),_:1})])):(f(),_("div",yr,[c[16]||(c[16]=e("span",{class:"user-label"},"ç”¨æˆ·: ",-1)),c[17]||(c[17]=e("span",{class:"user-warning"},"æœªé…ç½®",-1)),s(H,{type:"primary",size:"small",onClick:B,class:"user-settings-btn",circle:""},{default:a(()=>[s(X,null,{default:a(()=>[s(o(ws))]),_:1})]),_:1})])),e("div",_r,[e("div",wr,[e("div",kr,[s(X,null,{default:a(()=>[s(o(ks))]),_:1})]),e("div",{class:"directory-path",title:E.value},L(E.value),9,$r)]),e("div",br,[s(H,{type:"primary",size:"small",onClick:be,class:"dir-button",circle:"",title:"åˆ‡æ¢ç›®å½•"},{default:a(()=>[s(X,null,{default:a(()=>c[18]||(c[18]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192H128zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32z"})],-1)])),_:1})]),_:1}),s(H,{type:"success",size:"small",onClick:Ue,class:"dir-button",circle:"",title:"åœ¨èµ„æºç®¡ç†å™¨ä¸­æ‰“å¼€"},{default:a(()=>[s(X,null,{default:a(()=>c[19]||(c[19]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 0 0-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"})],-1)])),_:1})]),_:1}),s(H,{type:"info",size:"small",onClick:Fe,class:"dir-button",circle:"",title:"å¤åˆ¶è·¯å¾„"},{default:a(()=>[s(X,null,{default:a(()=>c[20]||(c[20]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64h64z"}),e("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64z"})],-1)])),_:1})]),_:1})])]),o(g).isGitRepo?(f(),_("div",Cr,[s(cr)])):O("",!0)])]),e("main",Sr,[R.value?(f(),_("div",Vr,[e("div",Lr,[s(Nl,{ref_key:"gitStatusRef",ref:p,"initial-directory":E.value},null,8,["initial-directory"])]),e("div",{class:"vertical-resizer",id:"v-resizer",onMousedown:Ce},null,32),o(g).isGitRepo?(f(),_("div",zr,[!o(g).userName||!o(g).userEmail?(f(),_("div",Br,[c[26]||(c[26]=e("h2",null,"Gitç”¨æˆ·æœªé…ç½®",-1)),c[27]||(c[27]=e("p",null,"è¯·å…ˆé…ç½®Gitç”¨æˆ·ä¿¡æ¯æ‰èƒ½è¿›è¡Œæäº¤æ“ä½œã€‚",-1)),e("div",Dr,[c[24]||(c[24]=e("h3",null,"æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é…ç½®ï¼š",-1)),c[25]||(c[25]=e("ol",null,[e("li",null,"ç‚¹å‡»å³ä¸Šè§’çš„è®¾ç½®æŒ‰é’®ï¼Œé…ç½®ç”¨æˆ·åå’Œé‚®ç®±"),e("li",null,"æˆ–è€…ä½¿ç”¨å‘½ä»¤è¡Œé…ç½®ï¼š"),e("div",{class:"code-block"},[y(' git config --global user.name "æ‚¨çš„ç”¨æˆ·å"'),e("br"),y(' git config --global user.email "æ‚¨çš„é‚®ç®±" ')])],-1)),s(H,{type:"primary",onClick:B},{default:a(()=>c[23]||(c[23]=[y(" ç«‹å³é…ç½® ")])),_:1})])])):(f(),J(Yn,{key:1}))])):(f(),_("div",Fr,c[28]||(c[28]=[e("div",{class:"card",style:{padding:"20px"}},[e("h2",null,"Gitä»“åº“åˆå§‹åŒ–"),e("p",null,"å½“å‰ç›®å½•ä¸æ˜¯Gitä»“åº“ï¼Œè¯·å…ˆåˆå§‹åŒ–Gitä»“åº“æˆ–åˆ‡æ¢åˆ°Gitä»“åº“ç›®å½•ã€‚"),e("div",{class:"tips"},[e("h3",null,"å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ä»“åº“ï¼š"),e("div",{class:"code-block"},"git init")])],-1)]))),e("div",{class:"horizontal-resizer",id:"h-resizer",onMousedown:v},null,32),o(g).isGitRepo?(f(),_("div",Rr,[s(Oi,{ref_key:"logListRef",ref:k},null,512)])):O("",!0),s(me,{modelValue:U.value,"onUpdate:modelValue":c[3]||(c[3]=A=>U.value=A),title:"åˆ›å»ºæ–°åˆ†æ”¯",width:"30%","destroy-on-close":""},{footer:a(()=>[e("span",Gr,[s(H,{onClick:c[2]||(c[2]=A=>U.value=!1)},{default:a(()=>c[29]||(c[29]=[y("å–æ¶ˆ")])),_:1}),s(H,{type:"primary",onClick:ie,loading:o(g).isCreatingBranch},{default:a(()=>c[30]||(c[30]=[y(" åˆ›å»º ")])),_:1},8,["loading"])])]),default:a(()=>[s(ue,{model:{newBranchName:Z.value,selectedBaseBranch:Q.value}},{default:a(()=>[s(ve,{label:"æ–°åˆ†æ”¯åç§°"},{default:a(()=>[s(Ve,{modelValue:Z.value,"onUpdate:modelValue":c[0]||(c[0]=A=>Z.value=A),placeholder:"è¯·è¾“å…¥æ–°åˆ†æ”¯åç§°"},null,8,["modelValue"])]),_:1}),s(ve,{label:"åŸºäºåˆ†æ”¯"},{default:a(()=>[s(Re,{modelValue:Q.value,"onUpdate:modelValue":c[1]||(c[1]=A=>Q.value=A),placeholder:"é€‰æ‹©åŸºç¡€åˆ†æ”¯",style:{width:"100%"}},{default:a(()=>[(f(!0),_($e,null,Le(o(g).allBranches,A=>(f(),J(ke,{key:A,label:A,value:A},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])):(f(),_("div",Tr,[s(Se,{class:"loading-card"},{default:a(()=>[e("div",xr,[s(X,{class:"is-loading"},{default:a(()=>c[21]||(c[21]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})],-1)])),_:1})]),c[22]||(c[22]=e("div",{class:"loading-text"},"åŠ è½½ä¸­...",-1))]),_:1})]))]),e("footer",jr,[o(g).currentBranch?(f(),_("div",Ar,[e("div",Ur,[c[32]||(c[32]=e("span",{class:"branch-label"},"å½“å‰åˆ†æ”¯:",-1)),s(Re,{modelValue:o(g).currentBranch,"onUpdate:modelValue":c[4]||(c[4]=A=>o(g).currentBranch=A),size:"small",onChange:_e,loading:o(g).isChangingBranch,class:"branch-select"},{default:a(()=>[(f(!0),_($e,null,Le(o(g).allBranches,A=>(f(),J(ke,{key:A,label:A,value:A},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),s(H,{type:"primary",size:"small",onClick:re,class:"create-branch-btn"},{default:a(()=>[s(X,null,{default:a(()=>[s(o(ja))]),_:1}),c[31]||(c[31]=y(" æ–°å»ºåˆ†æ”¯ "))]),_:1})])])):O("",!0),o(g).remoteUrl?(f(),_("div",Or,[c[34]||(c[34]=e("span",{class:"repo-url-label"},"è¿œç¨‹ä»“åº“:",-1)),e("span",Er,L(o(g).remoteUrl),1),s(H,{type:"primary",circle:"",size:"small",onClick:c[5]||(c[5]=A=>o(g).copyRemoteUrl()),class:"copy-url-btn",title:"å¤åˆ¶ä»“åº“åœ°å€"},{default:a(()=>[s(X,null,{default:a(()=>c[33]||(c[33]=[e("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64h64z"}),e("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64z"})],-1)])),_:1})]),_:1})])):O("",!0)]),s(me,{modelValue:pe.value,"onUpdate:modelValue":c[9]||(c[9]=A=>pe.value=A),title:"Gitç”¨æˆ·è®¾ç½®",width:"30%","destroy-on-close":""},{footer:a(()=>[e("span",Mr,[s(H,{type:"danger",onClick:F},{default:a(()=>c[36]||(c[36]=[y(" æ¸…é™¤é…ç½® ")])),_:1}),s(H,{onClick:c[8]||(c[8]=A=>pe.value=!1)},{default:a(()=>c[37]||(c[37]=[y("å–æ¶ˆ")])),_:1}),s(H,{type:"primary",onClick:W},{default:a(()=>c[38]||(c[38]=[y(" ä¿å­˜ ")])),_:1})])]),default:a(()=>[s(ue,null,{default:a(()=>[s(ve,{label:"ç”¨æˆ·å"},{default:a(()=>[s(Ve,{modelValue:S.value,"onUpdate:modelValue":c[6]||(c[6]=A=>S.value=A),placeholder:"è¯·è¾“å…¥Gitç”¨æˆ·å"},null,8,["modelValue"])]),_:1}),s(ve,{label:"é‚®ç®±"},{default:a(()=>[s(Ve,{modelValue:z.value,"onUpdate:modelValue":c[7]||(c[7]=A=>z.value=A),placeholder:"è¯·è¾“å…¥Gité‚®ç®±"},null,8,["modelValue"])]),_:1}),s(ve,null,{default:a(()=>[s(Ye,{type:"info",closable:!1,"show-icon":""},{default:a(()=>c[35]||(c[35]=[y(" è¿™äº›è®¾ç½®å°†å½±å“å…¨å±€Gité…ç½®ï¼Œå¯¹æ‰€æœ‰Gitä»“åº“ç”Ÿæ•ˆã€‚ ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(me,{modelValue:I.value,"onUpdate:modelValue":c[13]||(c[13]=A=>I.value=A),title:"åˆ‡æ¢å·¥ä½œç›®å½•",width:"50%","destroy-on-close":""},{footer:a(()=>[e("span",Ir,[s(H,{onClick:c[11]||(c[11]=A=>I.value=!1)},{default:a(()=>c[40]||(c[40]=[y("å–æ¶ˆ")])),_:1}),s(H,{type:"primary",onClick:c[12]||(c[12]=A=>oe()),loading:ze.value},{default:a(()=>c[41]||(c[41]=[y(" åˆ‡æ¢ ")])),_:1},8,["loading"])])]),default:a(()=>[s(ue,null,{default:a(()=>[s(ve,{label:"ç›®å½•è·¯å¾„"},{default:a(()=>[e("div",Pr,[s(Ve,{modelValue:te.value,"onUpdate:modelValue":c[10]||(c[10]=A=>te.value=A),placeholder:"è¯·è¾“å…¥ç›®å½•è·¯å¾„"},null,8,["modelValue"]),s(H,{type:"primary",onClick:Ie},{default:a(()=>[s(X,null,{default:a(()=>[s(o(ks))]),_:1}),c[39]||(c[39]=y(" æµè§ˆ "))]),_:1})])]),_:1}),De.value.length>0?(f(),J(ve,{key:0,label:"å¸¸ç”¨ç›®å½•"},{default:a(()=>[e("div",Hr,[(f(!0),_($e,null,Le(De.value,(A,ot)=>(f(),J(Pe,{key:ot,class:"recent-dir-tag",onClick:nt=>te.value=A,effect:"plain"},{default:a(()=>[y(L(A),1)]),_:2},1032,["onClick"]))),128))])]),_:1})):O("",!0)]),_:1})]),_:1},8,["modelValue"])],64)}}}),Jr=Rt(Nr,[["__scopeId","data-v-a5d01110"]]),Gs=Aa(Jr);Gs.use(Ua());Gs.mount("#app");
